this.PlatformAnalytics = function (n) { var i = {}; function r(e) { if (i[e]) return i[e].exports; var t = i[e] = { i: e, l: !1, exports: {} }; return n[e].call(t.exports, t, t.exports, r), t.l = !0, t.exports } return r.m = n, r.c = i, r.d = function (e, t, n) { r.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: n }) }, r.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, r.t = function (t, e) { if (1 & e && (t = r(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var n = Object.create(null); if (r.r(n), Object.defineProperty(n, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var i in t) r.d(n, i, function (e) { return t[e] }.bind(null, i)); return n }, r.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return r.d(t, "a", t), t }, r.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, r.p = "", r(r.s = 9) }([function (e, t) { var n = function () { return this }(); try { n = n || new Function("return this")() } catch (e) { "object" == typeof window && (n = window) } e.exports = n }, function (e, t, n) { e.exports = n(10).Promise }, function (e, t, n) { "use strict"; (function (a) { var t = n(3); function i(e) { t.isTestEnvironment() && console.log(e) } function o() { return "function" == typeof Date.now ? Date.now() : Number(new Date) } e.exports = { toLogStore: function (e, t, n, i, r) { try { "boolean" == typeof r && r && (function (e, t, n, i) { try { var r = document.createElement("meta"); r.id = "uis_debug_" + t + "_" + n + "_" + i, r.dataset.type = "uis-prime-debug", r.dataset.publisher = t, r.dataset.event_type = n, r.dataset.timestamp = o(), r.dataset.debug = JSON.stringify(e), document.getElementsByTagName("head")[0].appendChild(r) } catch (e) { console.log("error logging to meta tags: " + e) } }(e, t, n, i), console.log("[PlatformAnalyticsPrimeJs-publishing-event] Publisher: " + t + ", evenType: " + n + ", message: " + JSON.stringify(e, null, 2)), void 0 === a.uisPrimeLogStore && (a.uisPrimeLogStore = {})), void 0 !== a.uisPrimeLogStore && function (e, t, n, i, r) { void 0 === a.uisPrimeLogStore[t] && (a.uisPrimeLogStore[t] = {}); void 0 === a.uisPrimeLogStore[t][n] && (a.uisPrimeLogStore[t][n] = []); a.uisPrimeLogStore[t][n].push({ timestamp: o(), message: JSON.parse(JSON.stringify(e)), publisher: t, eventType: n, label: i, isDebugEnabled: r }) }(e, t, n, i, r) } catch (e) { console.log("An error occurred while logging debug info: " + e) } }, log: i, logError: function (e, t) { var n = []; t && n.push(t), n.push(e), e.stack && n.push(e.stack), i(n.join("\n")) } } }).call(this, n(0)) }, function (d, e, f) { "use strict"; (function (e) { var t = f(16), n = f(17), i = f(18), r = f(19), a = /(?:(?:test|int|stress)\.expedia\.com|exp-(?:test|int)\.net|karmalab\.net|expedmz.com|staging.*\.(?:traveltainment\.de|myersmediagroup\.com)|localhost|127\.0\.0\.1|[a-z]+\.staging1-[a-z]+\.[a-z]+|docweb\.exp-test\.net|wwwexpediacom\.sandbox\.dev\.sb\.karmalab\.net)$/i, o = /.int.*\.sb\.karmalab\.net/i; function s() { return u() && void 0 !== e.location ? Boolean(e.location.hostname.match(a)) : -1 === ["prod", "production"].indexOf("production") } function c() { return void 0 !== e.location && ("localhost" === e.location.hostname || "127.0.0.1" === e.location.hostname || 0 < e.location.hostname.indexOf("dev")) } function u() { return "undefined" != typeof window } function l() { return u() && window.performance } d.exports = { isTestEnvironment: s, isLocalEnvironment: c, isBrowser: u, isPerformanceTimingSupported: function () { return l() && window.performance.timing && void 0 !== window.performance.timing.navigationStart }, isPerformanceMarkSupported: function () { return l() && ("function" == typeof window.performance.mark || "function" == typeof window.performance.webkitMark) }, isTrackingDisabled: function () { return u() && "1" === navigator.doNotTrack }, isBeaconSupported: function () { return u() && "function" == typeof navigator.sendBeacon }, getConfiguration: function () { return c() ? t : void 0 !== e.location && Boolean(e.location.hostname.match(o)) ? r : s() ? n : i } } }).call(this, f(0)) }, function (e, t, n) { "use strict"; (function (t) { var a = ["chase.com", "ml.com", "bankofamerica.com"]; function o(e, t) { return new RegExp("(^|\\.)" + t + "$", "i").test(e) } function n() { var e = {}; return "function" == typeof performance.getEntriesByType ? e = performance.getEntriesByType("mark") : "function" == typeof performance.webkitGetEntriesByType && (e = performance.webkitGetEntriesByType("mark")), e } function i(e, t) { var n = e.filter(function (e) { return e.name === t }); return 0 < n.length ? n[0] : void 0 } e.exports = { getPointOfSale: function () { var n = window.location.hostname; if ("secure2.traveltainment.de" === n) return "expedia.at"; if (o(n, "traveltainment.de")) return "expedia.de"; if (0 < ["travel.hotels.com", "vacations.alaskaair.com", "reservations.meliapackages.com", "travel.riu.com", "getaway.bjs.com", "travel.uk.hotels.com", "travel.se.hotels.com", "travel.fr.hotels.com", "travel.no.hotels.com", "travel.ca.hotels.com", "travel.jp.hotels.com", "us.expedia.cn"].filter(function (e) { return e === n }).length) return n; var e = ["thailand.airasiago.com", "china.airasiago.com"].filter(function (e) { return o(n, e) }); if (e && 0 < e.length) return e[0]; var t, i = 0 < ["karmalab.net", "eurostar.com", "poweredbygps.com", "citibanamex.expedia.mx"].filter(function (e) { return o(n, e) }).length, r = 0 < ["poweredbygps"].filter(function (e) { return t = n, new RegExp("(^|\\.)" + e + "|\\.$", "i").test(t); var t }).length; return i || r ? n : (t = n).match(RegExp(".*" + a.join("|") + "$", "g")) ? t : t.match(/(^|\.)(localhost)$/) ? RegExp.$2 : t.match(/([^.]+(\.(co|com|web|ne))?\.[^.]+)$/) ? RegExp.$1 : t }, getMobileOrientation: function () { var e = ""; return /iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(window.navigator.userAgent.toLowerCase()) && (e = window.innerHeight > window.innerWidth ? "Portrait" : "Landscape"), e }, getCookie: function (e) { for (var t = e + "=", n = decodeURIComponent(document.cookie).split(";"), i = 0; i < n.length; i += 1) { for (var r = n[i]; " " === r.charAt(0);)r = r.substring(1); if (0 === r.indexOf(t)) return r.substring(t.length, r.length) } return "" }, getDomain: function () { var e = void 0; return "undefined" != typeof window && (e = t.location.hostname).match(/([^.]+(\.(co|com|web|ne))?\.[^.]+)$/) && !e.match(RegExp(".*" + a.join("|") + "$", "g")) && (e = RegExp.$1), e }, getCurrentDate: function () { return new Date }, fetchHours: function (e) { return e.getHours() }, fetchMinutes: function (e) { return e.getMinutes() }, fetchDay: function (e) { return e.getDay() }, uniqueArray: function (e) { var t = [], n = 0; return e.forEach(function (e) { -1 === t.indexOf(e) && (t[n] = e, n += 1) }), t }, findMark: function (e) { return i(n(), e) }, clearMarks: function (e) { "function" == typeof performance.clearMarks && performance.clearMarks(e) }, mark: function (e) { "function" == typeof performance.mark ? performance.mark(e) : "function" == typeof performance.webkitMark && performance.webkitMark(e) }, findSpecificRow: i, getMarkEntries: n, getQueryParameterByName: function (e, t) { if (e && t) { var n = decodeURIComponent(t.replace(new RegExp("^(?:.*[&\\?]" + encodeURIComponent(e).replace(/[\\.\\+\\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1")); return "" !== n ? n : null } return null }, fetchMarketingIdFromCookie: function (e) { e = encodeURIComponent(e); var t, n = new RegExp(e + "=([^;]*)").exec(document.cookie), i = ""; return n && 1 <= n.length && ((t = decodeURIComponent(n[1]).match(/MCMID\|([^|]*)/) ? RegExp.$1 : "unknown") && 1 <= t.length && (i = t)), i } } }).call(this, n(0)) }, function (g, e, m) { "use strict"; (function (n, e) { var r = m(8), a = m(4), i = m(15), t = m(2), o = t.toLogStore, s = t.log; g.exports = { load: function () { c = c || function () { u || (s("loading visitor API"), u = new e(function (e, t) { try { void 0 === n.Visitor && (n.Visitor = i.Visitor), e(p()) } catch (e) { t(e) } })); return u }(); return c }, initVisitorAPI: p }; var c = void 0; var u = void 0, l = !1; function d(e, t) { setTimeout(function () { return function e(t, n, i) { { !t || l || n.isClientSideMarketingCloudVisitorID() || (a.fetchMarketingIdFromCookie("AMCV_" + r.ADOBE_MARKETING_CLOUD_ORGANIZATION_ID) ? (f("/cgp/simple/amcv.set?traceIdOfTheView=" + t), l = !0) : (i += 1) < 4 ? setTimeout(function () { return e(t, n, i) }, 50) : (f("/cgp/simple/amcv.set?traceIdOfTheView=" + t + "&missingAmcvCookie=true"), l = !0)) } }(e, t, 1) }, 50) } function f(e) { var t = window.uisDebugXmlHttpRequest ? window.uisDebugXmlHttpRequest : new XMLHttpRequest; t.onreadystatechange = function () { 4 === t.readyState && console.log("sent call to CGP on visitor ID generation %o", t.status) }, t.open("GET", e, !0), t.withCredentials = !0, t.send(), o(e, "papj", "load", "fireAmcvBeacon", l = !0) } function p(e) { s("fetching visitor"); var t = n.Visitor.getInstance(r.ADOBE_MARKETING_CLOUD_ORGANIZATION_ID, { trackingServer: r.OMNITURE_TRACKING_SERVER, trackingServerSecure: r.OMNITURE_TRACKING_SERVER_SECURE, marketingCloudServer: r.OMNITURE_TRACKING_SERVER, marketingCloudServerSecure: r.OMNITURE_TRACKING_SERVER_SECURE, loadTimeout: 5e3, cookieDomain: a.getDomain(), takeTimeoutMetrics: !0, overwriteCrossDomainMCIDAndAID: !0 }); return s("visitor found!"), o("Visitor", "papj", "load", "visitorLoad", !1), t.getMarketingCloudVisitorID(function () { d(e, t) }), t } }).call(this, m(0), m(1)) }, function (c, e, u) { "use strict"; (function (e) { var r = u(8), a = u(3), o = u(4).getDomain, t = u(5), s = u(24), n = void 0; c.exports.load = function () { return n = n || function () { i = i || new e(function (n, i) { function e() { t.load().then(function () { try { var e = a.getConfiguration().adobeAnalyticsAccount, t = window.s_gi(e); t.trackingServer = r.OMNITURE_TRACKING_SERVER, t.trackingServerSecure = r.OMNITURE_TRACKING_SERVER_SECURE, t.trackDownloadLinks = !0, t.trackExternalLinks = !1, t.trackInlineStats = !1, t.linkDownloadFileTypes = "exe,zip,wav,mp3,mov,mpg,avi,wmv,doc,pdf,xls", t.linkInternalFilters = ["javascript:", document.domain, o].join(","), t.linkLeaveQueryString = !1, t.linkTrackVars = "None", t.linkTrackEvents = "None", t.server = document.domain, t.usePlugins = !0, t.loadModule("AudienceManagement"), t.doPlugins = function (e) { e.AudienceManagement.setup({ partner: 1745, containerNSID: 0, uuidCookie: { name: "aam_uuid", days: 30 } }), e.prop14 && e.visitor.setCustomerIDs({ hasheml: { id: e.prop14, authState: 1 } }) }, t.handlePPVevents = function () { if ("undefined" != typeof s_c_il) { for (var e, t, n, i, r, a, o, s, c, u = 0, l = s_c_il.length; u < l; u += 1)if (s_c_il[u] && (s_c_il[u].getPercentPageViewed || s_c_il[u].getPreviousPageActivity)) { var d = s_c_il[u]; break } d && d.ppvID && (a = document && document.body ? Math.max(Math.max(document.body.scrollHeight, document.documentElement.scrollHeight), Math.max(document.body.offsetHeight, document.documentElement.offsetHeight), Math.max(document.body.clientHeight, document.documentElement.clientHeight)) : 0, t = window.innerHeight || document.documentElement.clientHeight || null === document.body || !document.body.clientHeight ? 1 : document.body.clientHeight, u = (window.pageYOffset || window.document.documentElement.scrollTop || null === document.body || !document.body.scrollTop ? 0 : document.body.scrollTop) + t, l = Math.min(Math.round(u / a * 100), 100), e = Math.floor(u / t), t = Math.floor(a / t), n = "", !d.c_r("s_tp") || d.unescape(d.c_r("s_ppv").split(",")[0]) !== d.ppvID || d.p_fo(d.ppvID) || 1 == d.ppvChange && d.c_r("s_tp") && a != d.c_r("s_tp") ? (d.unescape(d.c_r("s_ppv").split(",")[0]) === d.ppvID && !d.p_fo(d.ppvID + "1") || d.c_w("s_ips", u), d.c_r("s_tp") && d.unescape(d.c_r("s_ppv").split(",")[0]) === d.ppvID && (d.c_r("s_tp"), n = (i = -1 < (n = d.c_r("s_ppv")).indexOf(",") ? n.split(",") : [])[0] ? i[0] : "", i = i[3] ? i[3] : "", r = d.c_r("s_ips"), n = n + "," + Math.round(i / a * 100) + "," + Math.round(r / a * 100) + "," + i + "," + e), d.c_w("s_tp", a)) : n = d.c_r("s_ppv"), a = 0 < (c = n && -1 < n.indexOf(",") ? n.split(",", 6) : []).length ? c[0] : escape(d.ppvID), i = 1 < c.length ? parseInt(c[1]) : l, r = 2 < c.length ? parseInt(c[2]) : l, o = 3 < c.length ? parseInt(c[3]) : u, s = 4 < c.length ? parseInt(c[4]) : e, c = 5 < c.length ? parseInt(c[5]) : t, 0 < l && (n = a + "," + (i < l ? l : i) + "," + r + "," + (o < u ? u : o) + "," + (s < e ? e : s) + "," + (c < t ? t : c)), d.c_w("s_ppv", n)) } }, t.p_fo = function (e) { return this.__fo || (this.__fo = {}), !this.__fo[e] && (this.__fo[e] = {}, !0) }, t.getPercentPageViewed = function (e, t) { var n = this, i = n.c_r("s_ppv"); (i = -1 < i.indexOf(",") ? i.split(",") : [])[0] = n.unescape(i[0]), e = e || (n.pageName ? n.pageName : document.location.href), n.ppvChange = void 0 === t || 1 == t, void 0 !== n.linkType && "o" === n.linkType || (n.ppvID && n.ppvID === e || (n.ppvID = e, n.c_w("s_ppv", ""), n.handlePPVevents()), n.p_fo("s_gppvLoad") && window.addEventListener && (window.addEventListener("load", n.handlePPVevents, !1), window.addEventListener("click", n.handlePPVevents, !1), window.addEventListener("scroll", n.handlePPVevents, !1)), n._ppvPreviousPage = i[0] ? i[0] : "", n._ppvHighestPercentViewed = i[1] ? i[1] : "", n._ppvInitialPercentViewed = i[2] ? i[2] : "", n._ppvHighestPixelsSeen = i[3] ? i[3] : "", n._ppvFoldsSeen = i[4] ? i[4] : "", n._ppvFoldsAvailable = i[5] ? i[5] : "") }, t.getPreviousValue = new Function("v", "c", "el", "var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"), n(t) } catch (e) { i(e) } }) } if (void 0 === window.s_gi) try { s.importScript(), e() } catch (e) { i(e) } else e() }); return i }() }; var i = void 0 }).call(this, u(1)) }, function (e, t, n) { "use strict"; var i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }; function a(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function r(t, e) { if (e && e.events) { if (!t.events) return void (t.events = e.events); e.events.split(",").forEach(function (e) { t.events.indexOf(e) < 0 && (t.events += "," + e) }) } } function o(t, n) { return n && Object.keys(n).forEach(function (e) { t[e] = n[e] }), t } function s(e) { return e && "object" === (void 0 === e ? "undefined" : i(e)) && !Array.isArray(e) } function c(t) { for (var e = arguments.length, n = Array(1 < e ? e - 1 : 0), i = 1; i < e; i++)n[i - 1] = arguments[i]; if (!n.length) return t; var r = n.shift(); return s(t) && s(r) && Object.keys(r).forEach(function (e) { s(r[e]) ? (t[e] || Object.assign(t, a({}, e, {})), c(t[e], r[e])) : Object.assign(t, a({}, e, r[e])) }), c.apply(void 0, [t].concat(n)) } e.exports = { searchPageIdentity: function (e) { var t = ""; return e.forEach(function (e) { "pageIdentity" === e.schemaName && (t = e) }), t }, mergeObjects: o, mergeObjectsDeep: c, mergeAdobeEvents: r, mergeAdobePayloads: function (e, t) { r(t, e), o(e, t) } } }, function (e, t, n) { "use strict"; e.exports = { ADOBE_MARKETING_CLOUD_ORGANIZATION_ID: "C00802BE5330A8350A490D4C@AdobeOrg", OMNITURE_TRACKING_SERVER: "om.expedia.com", OMNITURE_TRACKING_SERVER_SECURE: "oms.expedia.com", TRACK_API_URL: "/api/uisprime/track", TRACK_API_URL_CROSS_SITE: "https://wwwexpediacom.trunk.sb.karmalab.net/api/uisprime/track" } }, function (h, e, v) { "use strict"; (function (o) { var e = function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e }; function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var n = v(13), r = v(14), a = v(5), s = v(2), c = v(20).UisPrime, u = v(6), l = v(7), t = v(32), d = v(33), f = v(34), p = void 0; try { a.load() } catch (e) { console.log(e) } var g = (e(m, [{ key: "collect", value: function (e) { try { var t; this._ctx.pageName && this._ctx.pageName !== d.UNSPECIFIED || (t = d.updatePageName(this, e), this.getClientLog().setConfiguration({ pageName: t })), 0 === this.analyticsPayload.length && d.updateContextualInfoWithFirstPayload(this._ctx, e), f.injectMarketingData(e, this._ctx.isClientSidePageLoad), this.analyticsPayload.push(e), this._resolveHasCollectedEveryAnalyticsPayloads(), void 0 !== e.debug && (i = !0, (n = this).isDebugEnabled = i, n.pm.isDebugEnabled = i, n.cl.setConfiguration({ isDebugEnabled: i }), f.updateDebugData(e), s.toLogStore(e.debug, "papj", "load", this._ctx.pageName, this.isDebugEnabled)), this.fireAmcvBeaconWithTraceId(e) } catch (e) { console.log("PlatformAnalyticsPrime: Error while collecting payload " + e), s.logError(e, "Error while collecting payload") } var n, i } }, { key: "fireAmcvBeaconWithTraceId", value: function (e) { var t = this; return this.payload = e, a.load().then(function () { t.payload && a.initVisitorAPI(t.payload.traceId) }) } }, { key: "markPageUsable", value: function (e) { var t = 0 < arguments.length && void 0 !== e ? e : { microMessages: [], callback: function () { } }, n = (t || {}).microMessages || [], i = (t || {}).callback || function () { }; "function" != typeof i && console.error("[PlatformAnalyticsPrime] callback argument is not a function"), this.pm.markPageUsable({ microMessages: n, callback: i }) } }, { key: "publishWebVitals", value: function () { this.pm.publishWebVitals() } }, { key: "publish", value: function () { var e, t = this; try { if (0 === this.analyticsPayload.length) throw new Error("PlatformAnalyticsPrime: Collect analytics payload before publish"); return this._ctx.hasPub && (e = new Error("PlatformAnalyticsPrime: Data is already published on this platform analytics instance. Publishing again with the same instance indicates an error in the implementation."), this.getClientLog().logError(e)), this._ctx.hasPub = !0, u.load().then(function () { return new c({ context: t._ctx, isDebugEnabled: t.isDebugEnabled }).publish(t.analyticsPayload), t.analyticsPayload = [], !0 }) } catch (e) { return console.error("PlatformAnalyticsPrime: Got this Error while publishing view event  " + e), !1 } } }, { key: "publishClientSidePayload", value: function () { var t = this; try { for (var e = arguments.length, n = Array(e), i = 0; i < e; i++)n[i] = arguments[i]; return 0 === n.length ? o.reject(this.getClientLog().logError(new Error("PlatformAnalyticsPrime: No data to publish"))) : (n.reduce(function (e, t) { return e.concat(t) }, []).forEach(function (e) { t.collect(e) }), this.publish()) } catch (e) { return o.reject(this.getClientLog().logError(new Error("PlatformAnalyticsPrime: Got this Error while publishing view event  " + e))) } } }, { key: "trackEvent", value: function (e, t) { var n = this, i = 0 < arguments.length && void 0 !== e ? e : [], r = t; try { return i instanceof Array || (i = [i]), o.all([this._hasCollectedEveryAnalyticsPayloads, u.load()]).then(function () { new c({ context: n._ctx, isDebugEnabled: n.isDebugEnabled }).trackEvent(i, r) }) } catch (e) { return this.getClientLog().logError(new Error("PlatformAnalytics: Got this Error while publishing track event  " + e)), !1 } } }, { key: "trackAndPublishToAdobe", value: function (e) { try { var t = e.microMessages, n = this._ctx.traceIdOfTheView, i = void 0 !== this._ctx.traceIdOfTheView, r = this._ctx.applicationName; if (void 0 !== this._ctx.applicationName && i && void 0 !== t) return new c({ context: this._ctx, isDebugEnabled: this.isDebugEnabled }).trackPageViewAndPublishToAdobe(e); var a = new Error("PlatformAnalyticsPrime: missing input for trackAndPublishToAdobe " + { traceIdOfTheView: n, applicationName: r }); return this.getClientLog().logError(a), o.reject(a) } catch (a) { return this.getClientLog().logError(new Error("PlatformAnalytics: Error at trackAndPublishToAdobe: " + a)), o.reject(a) } } }, { key: "appendCrossDomainTrackingTo", value: function (t) { return a.load().then(function (e) { return e.appendVisitorIDsTo(t) }).catch(function (e) { return s.logError(e) }) } }, { key: "getPerformanceMetrics", value: function () { return this.pm } }, { key: "getClientLog", value: function () { return this.cl } }, { key: "context", get: function () { return new t(this) } }]), m); function m() { var t = this, e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : { overridenMicroMessages: [], deviceUserAgentId: void 0, isPwa: !1, isPublishWebVitals: !1, isAutomaticAdobePageViewDisabled: !1, additionalHeaders: {} }; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, m), this._ctx = d.createContextualInfo(e), this.analyticsPayload = []; try { p && (n.reset(), this._ctx.isClientSidePageLoad = !0) } catch (e) { console.error("PlatformAnalyticsPrime: Got this Error while resetting Performance metrics  " + e) } this.pm = n, this.cl = new r({ debugLogger: s.toLogStore, pageName: this._ctx.pageName, guid: this._ctx.deviceId }), this.isDebugEnabled = !1, p = this, n.setPlatformAnalyticsClass(m, e), this._hasCollectedEveryAnalyticsPayloads = new o(function (e) { t._resolveHasCollectedEveryAnalyticsPayloads = e }), this._ctx.isCrossSite && this._resolveHasCollectedEveryAnalyticsPayloads(), this.pageName = this.context.pageName, this.overridenMicroMessages = this._ctx.overridenMicroMessages, this.overridePageSchema = l.searchPageIdentity(this.overridenMicroMessages) } g.newInstance = function () { return new g(0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : { overridenMicroMessages: [], deviceUserAgentId: void 0 }) }, g.getInstance = function () { return p }, h.exports = g }).call(this, v(1)) }, function (e, t, de) { (function (ce, ue) { var le; e.exports = function () { "use strict"; function n(e) { return typeof e === "function" || typeof e === "object" && e !== null } function u(e) { return typeof e === "function" } var e = undefined; if (!Array.isArray) { e = function (e) { return Object.prototype.toString.call(e) === "[object Array]" } } else { e = Array.isArray } var i = e, r = 0, a = undefined, o = undefined, s = function e(t, n) { k[r] = t; k[r + 1] = n; r += 2; if (r === 2) { if (o) { o(C) } else { I() } } }; function t(e) { o = e } function c(e) { s = e } var l = typeof window !== "undefined" ? window : undefined, d = l || {}, f = d.MutationObserver || d.WebKitMutationObserver, p = typeof self === "undefined" && typeof ce !== "undefined" && {}.toString.call(ce) === "[object process]", g = typeof Uint8ClampedArray !== "undefined" && typeof importScripts !== "undefined" && typeof MessageChannel !== "undefined"; function m() { return function () { return ce.nextTick(C) } } function h() { return function () { a(C) } } function v() { var e = 0; var t = new f(C); var n = document.createTextNode(""); t.observe(n, { characterData: true }); return function () { n.data = e = ++e % 2 } } function b() { var e = new MessageChannel; e.port1.onmessage = C; return function () { return e.port2.postMessage(0) } } function y() { var e = setTimeout; return function () { return e(C, 1) } } var k = new Array(1e3); function C() { for (var e = 0; e < r; e += 2) { var t = k[e]; var n = k[e + 1]; t(n); k[e] = undefined; k[e + 1] = undefined } r = 0 } function _() { try { var e = le; var t = de(12); a = t.runOnLoop || t.runOnContext; return h() } catch (e) { return y() } } var I = undefined; if (p) { I = m() } else if (f) { I = v() } else if (g) { I = b() } else if (l === undefined && "function" === "function") { I = _() } else { I = y() } function D(e, t) { var n = arguments; var i = this; var r = new this.constructor(T); if (r[S] === undefined) { $(r) } var a = i._state; if (a) { (function () { var e = n[a - 1]; s(function () { return X(a, r, e, i._result) }) })() } else { q(i, r, e, t) } return r } function w(e) { var t = this; if (e && typeof e === "object" && e.constructor === t) { return e } var n = new t(T); U(n, e); return n } var S = Math.random().toString(36).substring(16); function T() { } var E = void 0, A = 1, O = 2, M = new W; function P() { return new TypeError("You cannot resolve a promise with itself") } function x() { return new TypeError("A promises callback cannot return that same promise.") } function L(e) { try { return e.then } catch (e) { M.error = e; return M } } function R(e, t, n, i) { try { e.call(t, n, i) } catch (e) { return e } } function N(e, i, r) { s(function (t) { var n = false; var e = R(r, i, function (e) { if (n) { return } n = true; if (i !== e) { U(t, e) } else { B(t, e) } }, function (e) { if (n) { return } n = true; H(t, e) }, "Settle: " + (t._label || " unknown promise")); if (!n && e) { n = true; H(t, e) } }, e) } function j(t, e) { if (e._state === A) { B(t, e._result) } else if (e._state === O) { H(t, e._result) } else { q(e, undefined, function (e) { return U(t, e) }, function (e) { return H(t, e) }) } } function V(e, t, n) { if (t.constructor === e.constructor && n === D && t.constructor.resolve === w) { j(e, t) } else { if (n === M) { H(e, M.error) } else if (n === undefined) { B(e, t) } else if (u(n)) { N(e, t, n) } else { B(e, t) } } } function U(e, t) { if (e === t) { H(e, P()) } else if (n(t)) { V(e, t, L(t)) } else { B(e, t) } } function F(e) { if (e._onerror) { e._onerror(e._result) } G(e) } function B(e, t) { if (e._state !== E) { return } e._result = t; e._state = A; if (e._subscribers.length !== 0) { s(G, e) } } function H(e, t) { if (e._state !== E) { return } e._state = O; e._result = t; s(F, e) } function q(e, t, n, i) { var r = e._subscribers; var a = r.length; e._onerror = null; r[a] = t; r[a + A] = n; r[a + O] = i; if (a === 0 && e._state) { s(G, e) } } function G(e) { var t = e._subscribers; var n = e._state; if (t.length === 0) { return } var i = undefined, r = undefined, a = e._result; for (var o = 0; o < t.length; o += 3) { i = t[o]; r = t[o + n]; if (i) { X(n, i, r, a) } else { r(a) } } e._subscribers.length = 0 } function W() { this.error = null } var J = new W; function K(e, t) { try { return e(t) } catch (e) { J.error = e; return J } } function X(e, t, n, i) { var r = u(n), a = undefined, o = undefined, s = undefined, c = undefined; if (r) { a = K(n, i); if (a === J) { c = true; o = a.error; a = null } else { s = true } if (t === a) { H(t, x()); return } } else { a = i; s = true } if (t._state !== E) { } else if (r && s) { U(t, a) } else if (c) { H(t, o) } else if (e === A) { B(t, a) } else if (e === O) { H(t, a) } } function Y(n, e) { try { e(function e(t) { U(n, t) }, function e(t) { H(n, t) }) } catch (e) { H(n, e) } } var z = 0; function Q() { return z++ } function $(e) { e[S] = z++; e._state = undefined; e._result = undefined; e._subscribers = [] } function Z(e, t) { this._instanceConstructor = e; this.promise = new e(T); if (!this.promise[S]) { $(this.promise) } if (i(t)) { this._input = t; this.length = t.length; this._remaining = t.length; this._result = new Array(this.length); if (this.length === 0) { B(this.promise, this._result) } else { this.length = this.length || 0; this._enumerate(); if (this._remaining === 0) { B(this.promise, this._result) } } } else { H(this.promise, ee()) } } function ee() { return new Error("Array Methods must be provided an Array") } function te(e) { return new Z(this, e).promise } function ne(r) { var a = this; if (i(r)) return new a(function (e, t) { for (var n = r.length, i = 0; i < n; i++)a.resolve(r[i]).then(e, t) }); else return new a(function (e, t) { return t(new TypeError("You must pass an array to race.")) }) } function ie(e) { var t = new this(T); return H(t, e), t } function re() { throw new TypeError("You must pass a resolver function as the first argument to the promise constructor") } function ae() { throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.") } function oe(e) { this[S] = Q(); this._result = this._state = undefined; this._subscribers = []; if (T !== e) { typeof e !== "function" && re(); this instanceof oe ? Y(this, e) : ae() } } function se() { var e = undefined; if (typeof ue !== "undefined") { e = ue } else if (typeof self !== "undefined") { e = self } else { try { e = Function("return this")() } catch (e) { throw new Error("polyfill failed because global object is unavailable in this environment") } } var t = e.Promise; if (t) { var n = null; try { n = Object.prototype.toString.call(t.resolve()) } catch (e) { } if (n === "[object Promise]" && !t.cast) { return } } e.Promise = oe } return Z.prototype._enumerate = function () { for (var e = this.length, t = this._input, n = 0; this._state === E && n < e; n++)this._eachEntry(t[n], n) }, Z.prototype._eachEntry = function (t, e) { var n, i, r = this._instanceConstructor, a = r.resolve; a === w ? (n = L(t)) === D && t._state !== E ? this._settledAt(t._state, e, t._result) : "function" != typeof n ? (this._remaining--, this._result[e] = t) : r === oe ? (V(i = new r(T), t, n), this._willSettleAt(i, e)) : this._willSettleAt(new r(function (e) { return e(t) }), e) : this._willSettleAt(a(t), e) }, Z.prototype._settledAt = function (e, t, n) { var i = this.promise; i._state === E && (this._remaining--, e === O ? H(i, n) : this._result[t] = n), 0 === this._remaining && B(i, this._result) }, Z.prototype._willSettleAt = function (e, t) { var n = this; q(e, void 0, function (e) { return n._settledAt(A, t, e) }, function (e) { return n._settledAt(O, t, e) }) }, oe.all = function (e) { return new Z(this, e).promise }, oe.race = function (r) { var a = this; return i(r) ? new a(function (e, t) { for (var n = r.length, i = 0; i < n; i++)a.resolve(r[i]).then(e, t) }) : new a(function (e, t) { return t(new TypeError("You must pass an array to race.")) }) }, oe.resolve = w, oe.reject = function (e) { var t = new this(T); return H(t, e), t }, oe._setScheduler = function (e) { o = e }, oe._setAsap = function (e) { s = e }, oe._asap = s, oe.prototype = { constructor: oe, then: D, catch: function (e) { return this.then(null, e) } }, se(), oe.polyfill = se, oe.Promise = oe }() }).call(this, de(11), de(0)) }, function (e, t) { var n, i, r = e.exports = {}; function a() { throw new Error("setTimeout has not been defined") } function o() { throw new Error("clearTimeout has not been defined") } function s(t) { if (n === setTimeout) return setTimeout(t, 0); if ((n === a || !n) && setTimeout) return n = setTimeout, setTimeout(t, 0); try { return n(t, 0) } catch (e) { try { return n.call(null, t, 0) } catch (e) { return n.call(this, t, 0) } } } !function () { try { n = "function" == typeof setTimeout ? setTimeout : a } catch (e) { n = a } try { i = "function" == typeof clearTimeout ? clearTimeout : o } catch (e) { i = o } }(); var c, u = [], l = !1, d = -1; function f() { l && c && (l = !1, c.length ? u = c.concat(u) : d = -1, u.length && p()) } function p() { if (!l) { var e = s(f); l = !0; for (var t = u.length; t;) { for (c = u, u = []; ++d < t;)c && c[d].run(); d = -1, t = u.length } c = null, l = !1, function (t) { if (i === clearTimeout) return clearTimeout(t); if ((i === o || !i) && clearTimeout) return i = clearTimeout, clearTimeout(t); try { i(t) } catch (e) { try { return i.call(null, t) } catch (e) { return i.call(this, t) } } }(e) } } function g(e, t) { this.fun = e, this.array = t } function m() { } r.nextTick = function (e) { var t = new Array(arguments.length - 1); if (1 < arguments.length) for (var n = 1; n < arguments.length; n++)t[n - 1] = arguments[n]; u.push(new g(e, t)), 1 !== u.length || l || s(p) }, g.prototype.run = function () { this.fun.apply(null, this.array) }, r.title = "browser", r.browser = !0, r.env = {}, r.argv = [], r.version = "", r.versions = {}, r.on = m, r.addListener = m, r.once = m, r.off = m, r.removeListener = m, r.removeAllListeners = m, r.emit = m, r.prependListener = m, r.prependOnceListener = m, r.listeners = function (e) { return [] }, r.binding = function (e) { throw new Error("process.binding is not supported") }, r.cwd = function () { return "/" }, r.chdir = function (e) { throw new Error("process.chdir is not supported") }, r.umask = function () { return 0 } }, function (e, t) { }, function (e, t, n) { "use strict"; (function (C) { var f = function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e }; function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var n, r, a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }; function o(e) { if (r[e]) return r[e].exports; var t = r[e] = { i: e, l: !1, exports: {} }; return n[e].call(t.exports, t, t.exports, o), t.l = !0, t.exports } e.exports = (r = {}, o.m = n = [function (e, t) { var n = function () { return this }(); try { n = n || Function("return this")() || (0, eval)("this") } catch (e) { "object" === ("undefined" == typeof window ? "undefined" : a(window)) && (n = window) } e.exports = n }, function (d, e, t) { (function (e) { var s, t, n = (s = window.performance, t = ((s || {}).timing || {}).navigationStart || o(), { mark: function (e) { "function" == typeof (s || {}).mark ? s.mark(e) : "function" == typeof (s || {}).webkitMark ? s.webkitMark(e) : i().push({ name: e, entryType: "mark", startTime: u(), duration: 0 }) }, measure: function (e, t, n) { var i, r, a, o; "function" == typeof (s || {}).measure ? s.measure(e, t, n) : "function" == typeof (s || {}).webkitMeasure ? s.webkitMeasure(e, t, n) : (i = 0, r = u(), t && ((a = l(t)) ? i = a.startTime : ((s || {}).timing || {})[t] && (i = s.timing[t] - s.timing.navigationStart)), n && ((o = l(n)) ? r = o.startTime : ((s || {}).timing || {})[n] && (r = s.timing[n] - s.timing.navigationStart)), c().push({ name: e, entryType: "measure", startTime: i, duration: r - i })) }, getGaMarks: i, getGaMeasures: c, getEntriesByName: function (e) { return "function" == typeof (s || {}).getEntriesByName ? s.getEntriesByName(e) : "function" == typeof (s || {}).webkitGetEntriesByName ? s.webkitGetEntriesByName(e) : [] }, findMark: l, findMeasure: function (e) { return r("function" == typeof (s || {}).getEntriesByType ? s.getEntriesByType("measure") : "function" == typeof (s || {}).webkitGetEntriesByType ? s.webkitGetEntriesByType("measure") : c(), e) }, clearMarks: function (t) { "function" == typeof (s || {}).clearMarks ? s.clearMarks(t) : e.gaMarks = a().filter(function (e) { return e.name !== t }) }, findSpecificRow: r, toJSON: function () { return "function" == typeof (s || {}).toJSON ? s.toJSON() : { timing: (s || {}).timing || {} } } }); function i() { return void 0 === e.gaMarks && (e.gaMarks = []), e.gaMarks } function c() { return void 0 === e.gaMeasures && (e.gaMeasures = []), e.gaMeasures } function u() { return "function" == typeof (window && window.performance || {}).now ? s.now() : o() - t } function l(e) { return r(a(), e) } function r(e, t) { var n = e.filter(function (e) { return e.name === t }); return 0 < n.length ? n[0] : void 0 } function a() { return "function" == typeof (s || {}).getEntriesByType ? s.getEntriesByType("mark") : "function" == typeof (s || {}).webkitGetEntriesByType ? s.webkitGetEntriesByType("mark") : i() } function o() { return "function" == typeof Date.now ? Date.now() : Number(new Date) } d.exports = n }).call(e, t(0)) }, function (e, t, r) { (function (t) { var n = r(3); function i(e) { n.isTestEnvironment() && console.log(e) } e.exports = { toLogStore: function (e) { try { (n.isTestEnvironment() || "undefined" != typeof document && void 0 !== document.cookie && -1 !== document.cookie.indexOf("paLogStore=true")) && (t && t.paLogStore && Array.isArray(t.paLogStore) || (t.paLogStore = [], t.paLogStoreSize = 100), t.paLogStore.push(e), t.paLogStore.length > t.paLogStoreSize && t.paLogStore.shift()) } catch (e) { i(e) } }, log: i } }).call(t, r(0)) }, function (r, e, t) { (function (e) { var t = /(?:(?:test|int|stress)\.expedia\.com|exp-(?:test|int)\.net|karmalab\.net|expedmz.com|staging.*\.(?:traveltainment\.de|myersmediagroup\.com)|localhost|docweb\.exp-tools\.net)$/i; function n() { return "undefined" != typeof window } function i() { return n() && window.performance } r.exports = { isTestEnvironment: function () { return n() && "undefined" != typeof location ? Boolean(location.hostname.match(t)) : -1 === ["prod", "production"].indexOf(e.env.NODE_ENV) }, isLocalEnvironment: function () { return "undefined" != typeof location && "localhost" === location.hostname }, isBrowser: n, isPerformanceTimingSupported: function () { return i() && window.performance.timing && void 0 !== window.performance.timing.navigationStart }, isPerformanceMarkSupported: function () { return i() && ("function" == typeof window.performance.mark || "function" == typeof window.performance.webkitMark) }, isTrackingDisabled: function () { return n() && navigator && "1" === navigator.doNotTrack }, isBeaconSupported: function () { return n() && navigator && "function" == typeof navigator.sendBeacon } } }).call(e, t(19)) }, function (e, t, n) { var i = n(5); e.exports = new i }, function (a, e, d) { (function (s) { var o = d(6), i = d(1), c = d(18), u = "Page Usable", t = "Page Change", e = ["deviceId", "siteId", "requestId", "pageName", "additionalData"]; function l(t, n) { t && e.forEach(function (e) { t.hasOwnProperty(e) && ("siteId" === e && isNaN(t[e]) ? console.log("WARNING: siteId must be Integer!") : n[e] = t[e]) }) } var n = (f(r, [{ key: "setContext", value: function (e) { l(e, this.ctx) } }, { key: "getFilteredPageUsableTime", value: function () { var e = this.getPageUsableTime(); return e && 0 < e.length && (e = parseFloat((e[0].startTime / 1e3).toFixed(2))), e } }, { key: "justMarkPageUsable", value: function (e, t) { var n = this, i = 0 < arguments.length && void 0 !== e ? e : function () { }, r = t; (r || i && (i.callback || i.microMessages)) && (this.microMessages = (i || {}).microMessages || r.microMessages, i = (i || {}).callback || r.callback), setTimeout(function () { n.findMark(u) ? console.log("WARNING: marking a page that was already usable - value won't be updated - use reset() first") : (n.clearMarks(u), n.mark(u)); var e = n.getFilteredPageUsableTime(); "function" == typeof n.puListener && n.puListener.call(n.puScope, e), "function" == typeof i && i(e, n.ctx) }, 50) } }, { key: "publish", value: function (e) { var t, n, i, r = (e || {}).pageUsableTime || this.getFilteredPageUsableTime(), a = (e || {}).microMessages || []; if (this.PlatformAnalytics && "function" == typeof this.PlatformAnalytics.getInstance && this.PlatformAnalytics.getInstance()) o.publishPageUsableToUisPrime(this.PlatformAnalytics.getInstance(), a, r), this.waitingMessage = {}; else if (e && e.uisPrime) this.waitingMessage = { uisPrime: !0, microMessages: a, pageUsableTime: r }; else if (this.setContext(e), this.findMark(u)) try { t = this.ctx, n = this.getFilteredPageUsableTime(), l(t, i = {}), i.pageUsableTime = n, c.publish(i) } catch (e) { console.log("Unable to publish performance metrics" + e.message) } else console.log("WARNING: trying to publish before page being usable") } }, { key: "markPageUsable", value: function (e, t, n) { var i, r = 0 < arguments.length && void 0 !== e ? e : {}, a = this, o = 1 < arguments.length && void 0 !== t ? t : function () { }; n || r.microMessages || r.callback ? (i = r.microMessages || (n || {}).microMessages, o = r.callback || (n || {}).callback, this.justMarkPageUsable({ microMessages: i, callback: function (e) { a.publish({ uisPrime: !0, microMessages: i }), o(e) } })) : (this.setContext(r), this.justMarkPageUsable(function (e, t) { var n; isNaN(a.ctx.siteId) && (n = isNaN(s.siteid) ? isNaN(s.site_id) ? isNaN(s.siteId) ? NaN : s.siteId : s.site_id : s.siteid, isNaN(n) || (t.siteId = parseInt(n, 10))), a.publish(t), "function" == typeof o && o(e, t) })) } }, { key: "getPageUsableTime", value: function () { var e = (this.findMark(u) || {}).startTime - ((this.findMark(t) || {}).startTime || 0); return Math.round(10 * e) / 10 } }, { key: "reset", value: function (e) { this.setContext(e), this.clearMarks(u), this.clearMarks(t), this.mark(t) } }, { key: "setPlatformAnalyticsClass", value: function (e, t) { var n = 1 < arguments.length && void 0 !== t ? t : { isPublishWebVitals: !1 }; this.PlatformAnalytics = e, this.waitingMessage.pageUsableTime ? this.publish(this.waitingMessage) : this.findMark(u) && this.publish({ uisPrime: !0 }), o.publishInteractionMetrics(this.PlatformAnalytics.getInstance()), n.isPublishWebVitals && o.publishWebVitals(this.PlatformAnalytics.getInstance()) } }, { key: "publishWebVitals", value: function () { this.PlatformAnalytics && "function" == typeof this.PlatformAnalytics.getInstance && this.PlatformAnalytics.getInstance() && o.publishWebVitals(this.PlatformAnalytics.getInstance()) } }]), r); function r() { var n = this, e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, r), this.ctx = {}, this.waitingMessage = {}, this.setContext(e), this.findMark = function (e) { return i.findMark(e) }, this.findMeasure = function (e) { return i.findMeasure(e) }, this.clearMarks = function (e) { return i.clearMarks(e) }, this.mark = function (e) { return i.mark(e) }, this.measure = function (e, t, n) { return i.measure(e, t, n) }, this.pul = function (e, t) { void 0 === n.puListener ? (n.puListener = e, n.puScope = t) : console.log("PageUsableListener has already been initialized") } } a.exports = n }).call(e, d(0)) }, function (t, e, d) { (function (e) { var n = d(7), i = d(9), r = d(1), a = d(11), o = d(12), s = d(13), c = d(14), u = d(15), l = { navigator: e.navigator || {} }; t.exports = { publishInteractionMetrics: function (t) { t && "function" == typeof t.trackEvent ? n.collect({ schemaName: "interactivityMetrics", messageContent: {} }, function (e) { i.collect(e, a, function (e) { 0 !== Object.keys(e.messageContent).length && t.trackEvent(e, "page-usable") }) }) : console.error("[PerformanceMetrics] cannot publish interactionMetrics to Uis Prime (platformAnalytics not defined)") }, publishPageUsableToUisPrime: function (t) { var e, n = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : [], i = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : 0; t && "function" == typeof t.trackEvent ? (Array.isArray(n) || (n = [n]), e = { schemaName: "performanceMetrics", messageContent: { markName: "Page Usable", markValue: i } }, s.collect(e, l), o.collect(e, r, function (e) { c.collect(e, r, function (e) { n.push(e), t.trackEvent(n, "page-usable") }) })) : console.error("[PerformanceMetrics] cannot publish page usable to Uis Prime (platformAnalytics not defined)") }, publishWebVitals: function (e) { var t; e && "function" == typeof e.trackEvent ? (t = u.uisPrimeOnReport(e), u.report(t)) : console.error("[PerformanceMetrics] cannot publish web vitals to Uis Prime (platformAnalytics not defined)") } } }).call(e, d(0)) }, function (t, e, n) { (function (e) { n(8), t.exports = { collect: function (t, n) { try { e.perfMetrics.onFirstInputDelay(function (e) { e && (t.messageContent.firstInputDelay = e), n(t) }) } catch (e) { n(t) } } } }).call(e, n(0)) }, function (e, t) { function s(e, t) { a || (a = t, o = e, l = new Date, r(u), n()) } function n() { 0 <= o && o < l - p && (d.forEach(function (e) { e(o, a) }), d = []) } function i(e) { var t, n, i; function r() { s(n, i), o() } function a() { o() } function o() { u(g, r, f), u(m, a, f) } e.cancelable && (t = (1e12 < e.timeStamp ? new Date : performance.now()) - e.timeStamp, "pointerdown" == e.type ? (n = t, i = e, c(g, r, f), c(m, a, f)) : s(t, e)) } function r(t) { ["click", "mousedown", "keydown", "touchstart", "pointerdown"].forEach(function (e) { t(e, i, f) }) } var c, u, a, o, l, d, f, p, g, m; c = addEventListener, u = removeEventListener, d = [], f = { passive: !0, capture: !0 }, p = new Date, g = "pointerup", m = "pointercancel", r(c), self.perfMetrics = self.perfMetrics || {}, self.perfMetrics.onFirstInputDelay = function (e) { d.push(e), n() } }, function (e, t, n) { n(10), e.exports = { collect: function (t, e, n) { try { e.getFirstConsistentlyInteractive().then(function (e) { e && (t.messageContent.timeToInteractive = e), n(t) }) } catch (e) { n(t) } } } }, function (e, t, n) { (function (e) { var t; "PerformanceLongTaskTiming" in e && ((t = e.__tti = { e: [] }).o = new PerformanceObserver(function (e) { t.e = t.e.concat(e.getEntries()) }), t.o.observe({ entryTypes: ["longtask"] })) }).call(t, n(0)) }, function (y, k, e) { (function (v) { var b; !function () { var i = ("undefined" == typeof window || window !== this) && void 0 !== v && null != v ? v : this, t = "function" == typeof Object.defineProperties ? Object.defineProperty : function (e, t, n) { e != Array.prototype && e != Object.prototype && (e[t] = n.value) }; function n() { n = function () { }, i.Symbol || (i.Symbol = e) } var r = 0; function e(e) { return "jscomp_symbol_" + (e || "") + r++ } function a() { n(); var e = (e = i.Symbol.iterator) || (i.Symbol.iterator = i.Symbol("iterator")); "function" != typeof Array.prototype[e] && t(Array.prototype, e, { configurable: !0, writable: !0, value: function () { return o(this) } }), a = function () { } } function o(e) { var t, n = 0; return t = function () { return n < e.length ? { done: !1, value: e[n++] } : { done: !0 } }, a(), (t = { next: t })[i.Symbol.iterator] = function () { return this }, t } function d(e) { a(); var t = e[Symbol.iterator]; return t ? t.call(e) : o(e) } function f(e) { if (!(e instanceof Array)) { e = d(e); for (var t, n = []; !(t = e.next()).done;)n.push(t.value); e = n } return e } var p = 0; var s = "img script iframe link audio video source".split(" "); function g(n) { var e = new MutationObserver(function (e) { for (var t = (e = d(e)).next(); !t.done; t = e.next())("childList" == (t = t.value).type && function e(t, n) { for (var i = (t = d(t)).next(); !i.done; i = t.next())if (i = i.value, n.includes(i.nodeName.toLowerCase()) || e(i.children, n)) return 1 }(t.addedNodes, s) || "attributes" == t.type && s.includes(t.target.tagName.toLowerCase())) && n(t) }); return e.observe(document, { attributes: !0, childList: !0, subtree: !0, attributeFilter: ["href", "src"] }), e } function m(e, t) { if (2 < e.length) return performance.now(); for (var n = [], i = (t = d(t)).next(); !i.done; i = t.next())i = i.value, n.push({ timestamp: i.start, type: "requestStart" }), n.push({ timestamp: i.end, type: "requestEnd" }); for (i = (t = d(e)).next(); !i.done; i = t.next())n.push({ timestamp: i.value, type: "requestStart" }); for (n.sort(function (e, t) { return e.timestamp - t.timestamp }), e = e.length, t = n.length - 1; 0 <= t; t--)switch ((i = n[t]).type) { case "requestStart": e--; break; case "requestEnd": if (2 < ++e) return i.timestamp; break; default: throw Error("Internal Error: This should never happen") }return 0 } function c(e) { e = e || {}, this.w = !!e.useMutationObserver, this.u = e.minValue || null, e = window.__tti && window.__tti.e; var r, a, o, s, c, u, l, i, t = window.__tti && window.__tti.o; this.a = e ? e.map(function (e) { return { start: e.startTime, end: e.startTime + e.duration } }) : [], t && t.disconnect(), this.b = [], this.f = new Map, this.j = null, this.v = -1 / 0, this.i = !1, this.h = this.c = this.s = null, r = this.m.bind(this), a = this.l.bind(this), o = XMLHttpRequest.prototype.send, s = p++, XMLHttpRequest.prototype.send = function (e) { for (var t = [], n = 0; n < arguments.length; ++n)t[+n] = arguments[n]; var i = this; return r(s), this.addEventListener("readystatechange", function () { 4 === i.readyState && a(s) }), o.apply(this, t) }, c = this.m.bind(this), u = this.l.bind(this), l = fetch, fetch = function (e) { for (var r = [], t = 0; t < arguments.length; ++t)r[+t] = arguments[t]; return new C(function (t, n) { var i = p++; c(i), l.apply(null, [].concat(f(r))).then(function (e) { u(i), t(e) }, function (e) { u(e), n(e) }) }) }, (i = this).c = new PerformanceObserver(function (e) { for (var t, n = (e = d(e.getEntries())).next(); !n.done; n = e.next()) { "resource" === (n = n.value).entryType && (i.b.push({ start: n.fetchStart, end: n.responseEnd }), h(i, m(i.g, i.b) + 5e3)), "longtask" === n.entryType && (t = n.startTime + n.duration, i.a.push({ start: n.startTime, end: t }), h(i, t + 5e3)) } }), i.c.observe({ entryTypes: ["longtask", "resource"] }), this.w && (this.h = g(this.B.bind(this))) } function u(e) { e.i = !0; var t = 0 < e.a.length ? e.a[e.a.length - 1].end : 0, n = m(e.g, e.b); h(e, Math.max(n + 5e3, t)) } function h(a, e) { !a.i || a.v > e || (clearTimeout(a.j), a.j = setTimeout(function () { var e = performance.timing.navigationStart, t = m(a.g, a.b), e = (window.a && window.a.A ? 1e3 * window.a.A().C - e : 0) || performance.timing.domContentLoadedEventEnd - e, n = a.u ? a.u : performance.timing.domContentLoadedEventEnd ? (n = performance.timing).domContentLoadedEventEnd - n.navigationStart : null, i = performance.now(); null === n && h(a, Math.max(t + 5e3, i + 1e3)); var r = a.a; (t = i - t < 5e3 ? null : i - (t = r.length ? r[r.length - 1].end : e) < 5e3 ? null : Math.max(t, n)) && (a.s(t), clearTimeout(a.j), a.i = !1, a.c && a.c.disconnect(), a.h && a.h.disconnect()), h(a, performance.now() + 1e3) }, e - performance.now()), a.v = e) } c.prototype.getFirstConsistentlyInteractive = function () { var t = this; return new C(function (e) { t.s = e, "complete" == document.readyState ? u(t) : window.addEventListener("load", function () { u(t) }) }) }, c.prototype.m = function (e) { this.f.set(e, performance.now()) }, c.prototype.l = function (e) { this.f.delete(e) }, c.prototype.B = function () { h(this, performance.now() + 5e3) }, i.Object.defineProperties(c.prototype, { g: { configurable: !0, enumerable: !0, get: function () { return [].concat(f(this.f.values())) } } }); var l = { getFirstConsistentlyInteractive: function (e) { return e = e || {}, "PerformanceLongTaskTiming" in window ? new c(e).getFirstConsistentlyInteractive() : C.resolve(null) } }; void 0 !== y && y.exports ? y.exports = l : void 0 === (b = function () { return l }.apply(k, [])) || (y.exports = b) }() }).call(k, e(0)) }, function (e, t, n) { (function (r) { function a(e, t, n, i) { void 0 !== n && void 0 !== i && (e[t] = n - i) } e.exports = { collect: function (e, t, n) { var i = t.toJSON(); void 0 !== i.timing ? (a(e.messageContent, "dnsLookupTime", i.timing.domainLookupEnd, i.timing.domainLookupStart), a(e.messageContent, "timeToFirstByte", i.timing.responseStart, i.timing.fetchStart), a(e.messageContent, "tcpConnectionTime", i.timing.connectEnd, i.timing.connectStart), a(e.messageContent, "pageLoadTime", i.timing.domContentLoadedEventEnd, i.timing.navigationStart), e.messageContent.pageLoadTime && e.messageContent.pageLoadTime < 0 ? r.addEventListener("load", function () { a(e.messageContent, "pageLoadTime", i.timing.domContentLoadedEventEnd, i.timing.navigationStart), n(e) }) : n(e)) : n(e) } } }).call(t, n(0)) }, function (e, t) { function r(e, t, n) { void 0 !== n && (e[t] = n) } e.exports = { collect: function (e, t) { var n, i; t && t.navigator && ((i = (n = t.navigator).connection || n.mozConnection || n.webkitConnection) && (r(e.messageContent, "networkEffectiveType", i.effectiveType), r(e.messageContent, "networkDownLink", i.downlink))) } } }, function (e, t, n) { (function (i) { e.exports = { collect: function (s, e, c) { if (void 0 !== i.PerformancePaintTiming) { var t = e.getEntriesByName("first-contentful-paint"); if (t && 0 < t.length) { var n = t[0]; return s.messageContent.firstContentfulPaint = Math.round(n.startTime + n.duration), void c(s) } void 0 !== i.PerformanceObserver ? new i.PerformanceObserver(function (e) { var t = !0, n = !1, i = void 0; try { for (var r, a = e.getEntries()[Symbol.iterator](); !(t = (r = a.next()).done); t = !0) { var o = r.value; "first-contentful-paint" === o.name && (s.messageContent.firstContentfulPaint = Math.round(o.startTime + o.duration), c(s)) } } catch (e) { n = !0, i = e } finally { try { !t && a.return && a.return() } finally { if (n) throw i } } }).observe({ entryTypes: ["paint"] }) : c(s) } else c(s) } } }).call(t, n(0)) }, function (e, t, n) { function i() { } var r = n(16), a = n(17); e.exports = { report: function (e) { "undefined" != typeof window && e && "function" == typeof e && (r.getCLS(e), r.getLCP(e)) }, uisPrimeOnReport: function (t) { var e = i; return t && "function" == typeof t.trackEvent ? e = function (e) { t.trackEvent(a.webVitalsMapper(e), "timing") } : console.error("[PerformanceMetrics] cannot publish web vitals to Uis Prime (platformAnalytics not defined)"), e } } }, function (e, t, n) { Object.defineProperty(t, "__esModule", { value: !0 }), n.d(t, "getCLS", function () { return s }), n.d(t, "getFCP", function () { return c }), n.d(t, "getFID", function () { return m }), n.d(t, "getLCP", function () { return h }), n.d(t, "getTTFB", function () { return v }); function u(e, t) { return { name: e, value: 1 < arguments.length && void 0 !== t ? t : -1, delta: 0, entries: [], id: "".concat(Date.now(), "-").concat(Math.floor(8999999999999 * Math.random()) + 1e12), isFinal: !1 } } function l(e, t) { try { if (PerformanceObserver.supportedEntryTypes.includes(e)) { var n = new PerformanceObserver(function (e) { return e.getEntries().map(t) }); return n.observe({ type: e, buffered: !0 }), n } } catch (e) { } } function i(e) { a = !e.persisted } function d(n, e) { var t = 1 < arguments.length && void 0 !== e && e; o || (addEventListener("pagehide", i), addEventListener("unload", function () { }), o = !0), addEventListener("visibilitychange", function (e) { var t = e.timeStamp; "hidden" === document.visibilityState && n({ timeStamp: t, isUnloading: a }) }, { capture: !0, once: t }) } function f(e, t, n, i) { var r; return function () { n && t.isFinal && n.disconnect(), 0 <= t.value && (i || t.isFinal || "hidden" === document.visibilityState) && (t.delta = t.value - (r || 0), (t.delta || t.isFinal || void 0 === r) && (e(t), r = t.value)) } } function p() { return void 0 === r && (r = "hidden" === document.visibilityState ? 0 : 1 / 0, d(function (e) { var t = e.timeStamp; return r = t }, !0)), { get timeStamp() { return r } } } var r, g, a = !1, o = !1, s = function (e, t) { function n(e) { e.hadRecentInput || (a.value += e.value, a.entries.push(e), i()) } var i, r = 1 < arguments.length && void 0 !== t && t, a = u("CLS", 0), o = l("layout-shift", n); o && (i = f(e, a, o, r), d(function (e) { var t = e.isUnloading; o.takeRecords().map(n), t && (a.isFinal = !0), i() })) }, c = function (e) { var t, n = u("FCP"), i = p(), r = l("paint", function (e) { "first-contentful-paint" === e.name && e.startTime < i.timeStamp && (n.value = e.startTime, n.isFinal = !0, n.entries.push(e), t()) }); r && (t = f(e, n, r)) }, m = function (e) { function t(e) { e.startTime < i.timeStamp && (n.value = e.processingStart - e.startTime, n.entries.push(e), n.isFinal = !0, a()) } var n = u("FID"), i = p(), r = l("first-input", t), a = f(e, n, r); r ? d(function () { r.takeRecords().map(t), r.disconnect() }, !0) : window.perfMetrics && window.perfMetrics.onFirstInputDelay && window.perfMetrics.onFirstInputDelay(function (e, t) { t.timeStamp < i.timeStamp && (n.value = e, n.isFinal = !0, n.entries = [{ entryType: "first-input", name: t.type, target: t.target, cancelable: t.cancelable, startTime: t.timeStamp, processingStart: t.timeStamp + e }], a()) }) }, h = function (e, t) { function n(e) { var t = e.startTime; t < s.timeStamp ? (o.value = t, o.entries.push(e)) : o.isFinal = !0, i() } var i, r, a = 1 < arguments.length && void 0 !== t && t, o = u("LCP"), s = p(), c = l("largest-contentful-paint", n); c && (i = f(e, o, c, a), r = function () { o.isFinal || (c.takeRecords().map(n), o.isFinal = !0, i()) }, (g = g || new C(function (t) { return ["scroll", "keydown", "pointerdown"].map(function (e) { addEventListener(e, t, { once: !0, passive: !0, capture: !0 }) }) })).then(r), d(r, !0)) }, v = function (t) { var n = u("TTFB"), e = function () { try { var e = performance.getEntriesByType("navigation")[0] || function () { var e = performance.timing, t = { entryType: "navigation", startTime: 0 }; for (var n in e) "navigationStart" !== n && "toJSON" !== n && (t[n] = Math.max(e[n] - e.navigationStart, 0)); return t }(); n.value = n.delta = e.responseStart, n.entries = [e], n.isFinal = !0, t(n) } catch (e) { } }; "complete" === document.readyState ? setTimeout(e, 0) : addEventListener("pageshow", e) } }, function (e, t) { var r = { CLS: "cumulativeLayoutShift", FID: "firstInputDelay", LCP: "largestContentfulPaint" }; e.exports = { webVitalsMapper: function (e) { var t = {}, n = e && e.name && r[e.name], i = e && e.value; return n && (t[n] = i), { schemaName: "interactivityMetrics", messageContent: t } } } }, function (e, t, n) { var i = n(2).toLogStore, r = n(2).log, a = n(20), o = n(3), s = o.isLocalEnvironment() ? "https://collector.test.expedia.com" : "/cl/data"; function c(e) { return !!(e && e.deviceId && e.pageName && e.pageUsableTime && e.requestId) } e.exports = { publish: function (e) { if (!c(e)) return r("Not valid PM formatted data: "), r(e), !1; this.requestBody = e, this.requestBody.utcTimestamp = Date.now(), this.requestBody.navigationTimingSupport = o.isPerformanceTimingSupported(), this.requestBody.performanceMarkSupport = o.isPerformanceMarkSupported(), this.requestBody.beaconApiSupport = o.isBeaconSupported(); var t = a.sendBeacon(s + "/perfmetrics.json?persist=true", this.requestBody), n = { publisher: "PM Publisher", status: "", sentData: this.requestBody }; return "boolean" == typeof t ? (n.status = t ? "queued" : "failed", i(n)) : (t.onload = function () { n.status = t.status, i(n) }, t.onerror = function () { n.status = "error", i(n) }, t.ontimeout = function () { n.status = "timeout", i(n) }), t }, isValid: c } }, function (e, t) { var n, i, r = e.exports = {}; function a() { throw new Error("setTimeout has not been defined") } function o() { throw new Error("clearTimeout has not been defined") } function s(t) { if (n === setTimeout) return setTimeout(t, 0); if ((n === a || !n) && setTimeout) return n = setTimeout, setTimeout(t, 0); try { return n(t, 0) } catch (e) { try { return n.call(null, t, 0) } catch (e) { return n.call(this, t, 0) } } } !function () { try { n = "function" == typeof setTimeout ? setTimeout : a } catch (e) { n = a } try { i = "function" == typeof clearTimeout ? clearTimeout : o } catch (e) { i = o } }(); var c, u = [], l = !1, d = -1; function f() { l && c && (l = !1, c.length ? u = c.concat(u) : d = -1, u.length && p()) } function p() { if (!l) { var e = s(f); l = !0; for (var t = u.length; t;) { for (c = u, u = []; ++d < t;)c && c[d].run(); d = -1, t = u.length } c = null, l = !1, function (t) { if (i === clearTimeout) return clearTimeout(t); if ((i === o || !i) && clearTimeout) return i = clearTimeout, clearTimeout(t); try { i(t) } catch (e) { try { return i.call(null, t) } catch (e) { return i.call(this, t) } } }(e) } } function g(e, t) { this.fun = e, this.array = t } function m() { } r.nextTick = function (e) { var t = new Array(arguments.length - 1); if (1 < arguments.length) for (var n = 1; n < arguments.length; n++)t[n - 1] = arguments[n]; u.push(new g(e, t)), 1 !== u.length || l || s(p) }, g.prototype.run = function () { this.fun.apply(null, this.array) }, r.title = "browser", r.browser = !0, r.env = {}, r.argv = [], r.version = "", r.versions = {}, r.on = m, r.addListener = m, r.once = m, r.off = m, r.removeListener = m, r.removeAllListeners = m, r.emit = m, r.prependListener = m, r.prependOnceListener = m, r.listeners = function (e) { return [] }, r.binding = function (e) { throw new Error("process.binding is not supported") }, r.cwd = function () { return "/" }, r.chdir = function (e) { throw new Error("process.chdir is not supported") }, r.umask = function () { return 0 } }, function (e, t) { e.exports.sendBeacon = function (e, t) { return "undefined" != typeof navigator && "function" == typeof navigator.sendBeacon ? navigator.sendBeacon(e, JSON.stringify(t)) : (n = e, i = t, r = new XMLHttpRequest, a = { method: "POST", headers: { "Content-type": "application/json" }, body: i }, r.open(a.method, n, !0), r.setRequestHeader("Content-type", "application/json"), r.send(JSON.stringify(a.body)), r); var n, i, r, a } }], o.c = r, o.d = function (e, t, n) { o.o(e, t) || Object.defineProperty(e, t, { configurable: !1, enumerable: !0, get: n }) }, o.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return o.d(t, "a", t), t }, o.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, o.p = "", o(o.s = 4)) }).call(this, n(1)) }, function (e, t) { function i(e) { if (r[e]) return r[e].exports; var t = r[e] = { i: e, l: !1, exports: {} }; return n[e].call(t.exports, t, t.exports, i), t.l = !0, t.exports } var n, r; e.exports = (r = {}, i.m = n = [function (e, t, n) { "use strict"; var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, i = n(7), s = n(1); function c(e) { "undefined" != typeof console && "function" == typeof console.error && console.error(e) } function a() { return new Date } e.exports = { getFixedParams: function (e, t) { var n = []; return n.push("live=" + i.isProductionEnv(window.location.hostname)), function (e) { var t = []; e.gcoAgent ? (t.push("gcoAgent=true"), t.push("agentLogonName=" + (e.agentLogonName || "unknown")), t.push("agentCallCenter=" + (e.agentCallCenter || "unknown")), t.push("agentCountry=" + (e.agentCountry || "unknown"))) : t.push("gcoAgent=false"); return t }(e).concat(function (e, t) { var n = []; e.data && "string" == typeof e.data && e.data.split("|").forEach(function (e) { n.push(e) }); e.data && "object" === r(e.data) && (n = n.concat(function (t) { var n = [], i = void 0; 0 < Object.keys(t).length && Object.keys(t).forEach(function (e) { i = e + "=" + String(t[e]).replace(/\n|\r/gm, ""), n.push(i) }); return n }(e.data))); { t && n.push("level=" + t) } return n }(e, t)).concat(n) }, normalizeMessageParams: function (n) { return n ? "string" == typeof n ? [n] : ("object" !== (void 0 === n ? "undefined" : r(n)) || Array.isArray(n) || (i = [], Object.keys(n).forEach(function (e) { var t; i.push(encodeURIComponent(e) + "=" + encodeURIComponent((t = n[e], String(t).replace(/"/g, "＂")))) }), n = i), n) : []; var i }, normalizeError: function (e) { var t = "NA", n = "NA", i = "NA", r = void 0; try { e && e.stack && (r = e.stack.match(/(([^)]+\d+))/) || e.stack.match(/@([^)]+\d+)\n/)) && (t = (r = r[1].split(":")).pop(), n = r.pop(), i = r.join(":")) } catch (e) { console.log(e + " dcs:util.js") } return e = e && { sourceURL: e.sourceURL || e.fileName || i, line: e.line || e.lineNumber || n, col: e.columnNumber || t, message: e.message, stack: e.stack || "NA" } }, logErrorOnConsole: function (e) { console.error(e) }, expGetISODateString: function (e) { return e.toISOString() ? e.toISOString() : e.getFullYear().toString() + "-" + e.getMonth() + "-" + e.getDate() + "T" + e.getHours() + ":" + e.getMinutes() + ":" + e.getSeconds() }, sendBeacon: function (e) { var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : [], n = new Image; n.src = e, t.push(n) }, isBrowser: function () { return "object" === ("undefined" == typeof window ? "undefined" : r(window)) }, getCurrentDate: a, getCurrentTime: function () { return a().getTime() }, consoleError: c, mergeObjects: function (t, n) { n && Object.keys(n).forEach(function (e) { t[e] = n[e] }) }, logClientLogError: function (e, t, n) { var i = {}; c("Something went wrong while calling " + n + " " + e); try { var r = e.indexOf(":"), a = e.substring(0, r), o = e.substring(r + 1).replace(":", ""); Object.defineProperty(i, a, { value: o, enumerable: !0 }), s.sendClientLog("/cl/2x2.json", i, t) } catch (e) { c("Something went wrong while calling logClientLogError " + e) } } } }, function (e, t, n) { "use strict"; e.exports = { sendClientLog: function (e, t, n) { return "undefined" != typeof navigator && "function" == typeof navigator.sendBeacon ? (n({ publisher: "Splunk and S3 Publisher", clientUrl: e, status: "successful", sentData: t }), navigator.sendBeacon(e, JSON.stringify(t))) : (i = e, r = t, a = n, o = new XMLHttpRequest, s = { method: "POST", headers: { "Content-type": "application/json" }, body: r }, o.open(s.method, i, !0), o.setRequestHeader("Content-type", "application/json"), a({ publisher: "Splunk and S3 Publisher", clientUrl: i, status: "successfull", sentData: r }), o.send(JSON.stringify(s.body)), o); var i, r, a, o, s } } }, function (e, t, n) { "use strict"; var f = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, i = function (e, t, n) { return t && r(e.prototype, t), n && r(e, n), e }; function r(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var p = n(0), g = n(1), m = "/cl/2x2.json", a = (i(o, [{ key: "bindWindowOnError", value: function () { var e = this; window.onerror = function () { e.onWindowError.apply(e, arguments) } } }, { key: "subscribeToOnErrorCallback", value: function (e) { this.onerrorSubscribers.push(e) } }, { key: "publishErrors", value: function () { this.onerrorSubscribers.forEach(function (e) { "function" == typeof e ? e() : console.log(e + " must be a function!") }) } }, { key: "onWindowError", value: function (e, t, n, i, r) { try { var a = r ? s(r, t, n, i) : { onErrorMsg: e }; this.errorsCountByMessage[e] = (this.errorsCountByMessage[e] || 0) + 1; var o = 100 === this.errorsCountByMessage[e]; o && (a.exceedsErrorThreshold = !0), 1 !== this.errorsCountByMessage[e] && !o || this.logMessage("windowOnError", a), this.publishErrors() } catch (e) { p.logClientLogError("" + e, this.debugLogger, "onWindowError") } } }, { key: "logMessage", value: function (e, t, n) { try { var i, r = n || t, a = n ? t : "INFO", o = (u = e, l = this.configuration, (d = { logTime: p.expGetISODateString(p.getCurrentDate()), action: "logErrors", label: u, pageName: l.pageName, pageUrl: window.location.href, guid: l.guid, clientWidth: document.documentElement.clientWidth })[u + "_elapsedTime"] = p.getCurrentTime() - l.pageStartTime, d); "string" == typeof r ? (i = r.split("="), o[i[0]] = i[1]) : Array.isArray(r) ? r.forEach(function (e) { var t = e.split("="); o[t[0]] = t[1] }) : "object" === (void 0 === r ? "undefined" : f(r)) && Object.keys(r).forEach(function (e) { o[e] = r[e] }), p.getFixedParams(this.configuration, a).forEach(function (e) { var t = e.split("="); o[t[0]] = t[1] }); var s = function (e) { var t, n, i = void 0, r = {}; for (i = 0; i < e.length; i += 1) { -1 !== e[i].indexOf("=") && (t = e[i], n = decodeURIComponent(t.substr(t.indexOf("=") + 1)), Object.defineProperty(r, decodeURIComponent(t.substr(0, t.indexOf("="))), { value: n, enumerable: !0, writable: !0 })) } return r }(p.normalizeMessageParams(o)), c = (this.configuration || {}).isDebugEnabled || !1; g.sendClientLog(m, s, this.debugLogger), this.debugLogger({ messageUrl: m, JsonString: s }, "clientLogging", a, this.configuration.pageName, c) } catch (e) { p.logClientLogError("" + e, this.debugLogger, "logMessage") } var u, l, d } }, { key: "logError", value: function (e, t, n) { try { var i = (i = p.normalizeMessageParams(t ? s(t) : { onError: "NA" })).concat(p.normalizeMessageParams(n)); this.logMessage(e, "ERROR", i), this.configuration.logErrorOnConsole && p.logErrorOnConsole(e + "\n" + i.join("\n")) } catch (e) { p.logClientLogError("" + e, this.debugLogger, "logError") } } }, { key: "setConfiguration", value: function (e) { try { p.mergeObjects(this.configuration, e) } catch (e) { p.logClientLogError("" + e, this.debugLogger, "setConfiguration") } } }]), o); function o(e) { if (!function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, o), !p.isBrowser()) throw new Error("Error Logger is only supported on a browser"); this.configuration = e || {}, this.configuration.logErrorOnConsole = this.configuration.logErrorOnConsole || !0, this.configuration.pageStartTime = this.configuration.pageStartTime || p.getCurrentTime(), this.debugLogger = this.configuration.debugLogger || function () { }, this.onerrorSubscribers = []; var t = this.configuration.attachWindowOnErrorHandler; (t = void 0 === t || t) && (this.errorsCountByMessage = {}, this.bindWindowOnError()) } function s(e, t, n, i) { return { onErrorMsg: (e = p.normalizeError(e)).message, onErrorUrl: e.sourceURL || t, onErrorLine: e.line || n, onErrorChar: e.col || i || "NA", stack: e.stack ? e.stack.substr(0, 200) : "NA" } } e.exports = a }, function (e, t, n) { "use strict"; var i = function (e, t, n) { return t && r(e.prototype, t), n && r(e, n), e }; function r(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var o = n(5), a = n(0), s = (i(c, [{ key: "logTrxEvent", value: function (e, t) { try { this.logMetrics(e, t) } catch (e) { a.consoleError("Something went wrong while calling logTrxEvent " + e) } } }, { key: "markPageUsable", value: function () { try { this.performance && "function" == typeof this.performance.mark && this.performance.mark("Page Usable") } catch (e) { a.consoleError("Something went wrong while calling clintLog's markPageUsable " + e) } } }, { key: "setPageUsableTime", value: function (e) { this.pageUsableTime = e } }, { key: "logDefaultMetrics", value: function () { var e = o.collectNavigationTimings(); this.logMetrics("navTiming", e) } }, { key: "bindWindowOnLoad", value: function () { var e = this; try { "function" == typeof setInterval && (window.addEventListener("load", this.logDefaultMetrics(), !1), window.addEventListener("load", function () { return setInterval(e.logMetrics.bind(e, "", ""), 6e4) }, !1)) } catch (e) { a.consoleError("Something went wrong while calling bindWindowOnLoad " + e) } } }, { key: "markIsPageUsableSent", value: function () { this.isPageUsableSent = !0 } }, { key: "logMetrics", value: function (e, t) { var n, i = o.collectDefaultAttributes(this.configuratonParams), r = o.collectProvidedAttributes(this.configuratonParams, e, t), a = "?" + (a = o.joinAttributes(i, r)).replace(/,/g, "&"); this.isPageUsableSent || -1 !== (n = o.collectPageUsableParameter(this.pageUsableTime)).indexOf("pageUsableTime=") && (a = o.joinAttributes(a, n), this.markIsPageUsableSent()), this.publishLog(a) } }, { key: "publishLog", value: function (e) { a.sendBeacon("" + this.webPerfLogPublisher + e, this.beaconImages) } }, { key: "setConfiguration", value: function (e) { try { a.mergeObjects(this.configuratonParams, e) } catch (e) { a.consoleError("Something went wrong while setting configuration " + e) } } }]), c); function c(e) { !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, c), this.webPerfLogPublisher = "/cl/1x1.gif", this.configuratonParams = e || {}, this.performance = window.performance, this.beaconImages = [], this.isPageUsableSent = !1, this.bindWindowOnLoad() } e.exports = s }, function (e, t, i) { "use strict"; var n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, r = function (e, t, n) { return t && a(e.prototype, t), n && a(e, n), e }; function a(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var o = i(0), s = (r(c, [{ key: "logMessage", value: function (e, t, n) { o.isBrowser() && this.errorLogger.logMessage(e, t, n) } }, { key: "logError", value: function (e, t, n) { o.isBrowser() && this.errorLogger.logError(e, t, n) } }, { key: "subscribeToOnErrorCallback", value: function (e) { o.isBrowser() && this.errorLogger.subscribeToOnErrorCallback(e) } }, { key: "logTrxEvent", value: function (e, t) { o.isBrowser() && this.webPerformanceLogger.logTrxEvent(e, t) } }, { key: "markPageUsable", value: function () { o.isBrowser() && this.webPerformanceLogger.markPageUsable() } }, { key: "setPageUsableTime", value: function (e) { o.isBrowser() && this.webPerformanceLogger.setPageUsableTime(e) } }, { key: "setConfiguration", value: function (e) { o.isBrowser() && e && "object" === (void 0 === e ? "undefined" : n(e)) && (o.mergeObjects(this.configuration, e), this.errorLogger.setConfiguration(e), this.webPerformanceLogger.setConfiguration(e)) } }, { key: "getConfiguration", value: function () { return this.configuration } }]), c); function c(e) { var t, n; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, c), this.configuration = e || {}, o.isBrowser() && (t = i(2), n = i(3), this.configuration.attachWindowOnErrorHandler = this.configuration.attachWindowOnErrorHandler || !0, this.configuration.logErrorOnConsole = this.configuration.logErrorOnConsole || !0, this.configuration.pageStartTime = this.configuration.pageStartTime || new Date, this.configuration.pageName = this.configuration.pageName || "unknown", this.configuration.guid = this.configuration.guid || "unknown", this.configuration.pageStartTime = this.configuration.pageStartTime || o.getCurrentTime(), this.errorLogger = new t(this.configuration), this.webPerformanceLogger = new n(this.configuration)) } e.exports = s }, function (e, t, n) { "use strict"; var r = n(0), a = n(6); e.exports = { collectDefaultAttributes: function (e) { return r.getFixedParams(e) + "&pageName=" + a.getPageName(e) + "&guid=" + a.getGuid(e) + "&logTime=" + r.expGetISODateString(r.getCurrentDate()) + "&sessionDuration=" + a.getTimeOnPage() }, collectNavigationTimings: function () { var e = a.getNavigationTimings(); return r.normalizeMessageParams(e) }, collectPageUsableParameter: function (e) { var t = void 0 === e ? a.getPageUsable() : e; return t && "" !== t ? "pageUsableTime=" + t : "" }, collectProvidedAttributes: function (e, t, n) { var i = []; return t && (i = [t + "_elapsedTime=" + (r.getCurrentTime() - a.getPageStartTime(e))]), n && (i = i.concat(r.normalizeMessageParams(n))), "action=logTrxEvent&" + (i || []).join("&") }, joinAttributes: function (e, t) { return e && t ? e + "&" + t : "" } } }, function (e, t, n) { "use strict"; var a = n(0); function i(e) { return window.performance && window.performance.timing && window.performance.timing[e] || NaN } e.exports = { getTimeOnPage: function () { var e, t, n, i = void 0, r = a.getCurrentTime(); try { if (!window.localStorage) return 0; e = "dctk_clientLogging_firstInteractionTimestamp", t = "dctk_clientLogging_lastInteractionTimestamp", n = Number(localStorage.getItem(t)), i = Number(localStorage.getItem(e)), (18e5 < r - n || 0 === i) && (i = r, localStorage.setItem(e, i)), n = r, localStorage.setItem(t, n) } catch (e) { i = r, console.log(e + "  dcs:web-perf-logger") } return r - i }, getLoggingData: function (e) { var t = ""; if (e.data) for (var n = 0, i = e.data.split("|"); n < i.length && 0 < i[n].length; n += 1)t += "&" + i[n]; return t }, getPageUsable: function () { if (window.performance && window.performance.getEntriesByName) { var e = window.performance.getEntriesByName("Page Usable", "mark"); return e && e.length ? Math.round(e[0].startTime) : "" } return "" }, getNavigationTimings: function () { return { unloadTime: i("unloadEventEnd") - i("unloadEventStart"), redirectTime: i("redirectEnd") - i("redirectStart"), dnsTime: i("domainLookupEnd") - i("domainLookupStart"), connectionTime: i("connectEnd") - i("connectStart"), requestTime: i("responseStart") - i("requestStart"), responseTime: i("responseEnd") - i("responseStart"), parsingTime: i("domInteractive") - i("domLoading"), domReadyCallbackTime: i("domContentLoadedEventEnd") - i("domContentLoadedEventStart"), onLdCallbackTime: i("loadEventEnd") - i("loadEventStart"), processingTime: i("domComplete") - i("domLoading"), navigationToResponse: i("responseStart") - i("navigationStart"), navigationToDomContentLoaded: i("domContentLoadedEventStart") - i("navigationStart"), navigationToOnLd: i("loadEventStart") - i("navigationStart"), fetchToResponse: i("responseStart") - i("fetchStart"), fetchToDomContentLoaded: i("domContentLoadedEventStart") - i("fetchStart"), fetchToOnLd: i("loadEventStart") - i("fetchStart"), responseToDomContentLoaded: i("domContentLoadedEventStart") - i("responseStart"), responseToOnLd: i("loadEventStart") - i("responseStart"), navigationToDomInteractive: i("domInteractive") - i("navigationStart") } }, getPageName: function (e) { return e.pageName || "unknown" }, getGuid: function (e) { return e.guid || "unknown" }, getPageStartTime: function (e) { var t = i("responseStart"); isNaN(t) ? e.pageStartTime = e.pageStartTime || a.getCurrentTime() : e.pageStartTime = t } } }, function (e, t, n) { "use strict"; var i = /(?:(?:test|int|stress)\.expedia\.com|exp-(?:test|int)\.net|karmalab\.net|expedmz.com|staging.*\.(?:traveltainment\.de|myersmediagroup\.com)|localhost|docweb\.exp-tools\.net)$/i; e.exports = { isProductionEnv: function (e) { return !e.match(i) } } }], i.c = r, i.i = function (e) { return e }, i.d = function (e, t, n) { i.o(e, t) || Object.defineProperty(e, t, { configurable: !1, enumerable: !0, get: n }) }, i.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return i.d(t, "a", t), t }, i.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, i.p = "", i(i.s = 4)) }, function (e, t, n) {
    (function (Pe) {
        /**
         * @license
         * Adobe Visitor API for JavaScript version: 4.4.0
         * Copyright 2019 Adobe, Inc. All Rights Reserved
         * More info available at https://marketing.adobe.com/resources/help/en_US/mcvid/
         */
        !function () { "use strict"; function L(e) { return (L = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e })(e) } function e(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function u(e, t, n) { var i = null == e ? void 0 : e[t]; return void 0 === i ? n : i } function n(e, t) { if (e === t) return 0; var n = e.toString().split("."), i = t.toString().split("."); return function (e) { for (var t = /^\d+$/, n = 0, i = e.length; n < i; n++)if (!t.test(e[n])) return; return 1 }(n.concat(i)) ? (function (e, t) { for (; e.length < t.length;)e.push("0"); for (; t.length < e.length;)t.push("0") }(n, i), function (e, t) { for (var n = 0; n < e.length; n++) { var i = parseInt(e[n], 10), r = parseInt(t[n], 10); if (r < i) return 1; if (i < r) return -1 } return 0 }(n, i)) : NaN } function i(e) { this.name = this.constructor.name, this.message = e, "function" == typeof Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : this.stack = new Error(e).stack } function t() { function t(e, t) { var n, i, r = G(e); return r.length ? r.every(function (e) { return !!t[e] }) : (n = t, !!(i = Object.keys(n)).length && i.every(function (e) { return !0 === n[e] })) } function i() { R(x), L(fe), w(D.status, D.permissions), I.set(D.permissions, { optInCookieDomain: u, optInStorageExpiry: l }), S.execute(_e) } function e(n) { return function (e, t) { if (!W(e)) throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum."); return L(de), Object.assign(x, J(G(e), n)), t || i(), D } } var n, r = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, a = r.doesOptInApply, o = r.previousPermissions, s = r.preOptInApprovals, c = r.isOptInStorageEnabled, u = r.optInCookieDomain, l = r.optInStorageExpiry, d = r.isIabContext, f = (1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}).cookies, p = q(n = o, "function") ? n() : n; Y(p, "Invalid `previousPermissions`!"), Y(s, "Invalid `preOptInApprovals`!"); var g, m, h, v, b, y, k, C, _, I = function (e, t) { var n = 0 < arguments.length && void 0 !== e ? e : {}, i = n.isEnabled, r = n.cookieName, a = (1 < arguments.length && void 0 !== t ? t : {}).cookies; return i && r && a ? { remove: function () { a.remove(r) }, get: function () { var e = a.get(r), t = {}; try { t = JSON.parse(e) } catch (e) { t = {} } return t }, set: function (e, t) { t = t || {}, a.set(r, JSON.stringify(e), { domain: t.optInCookieDomain || "", cookieLifetime: t.optInStorageExpiry || 3419e4, expires: !0 }) } } : { get: Ce, set: Ce, remove: Ce } }({ isEnabled: !!c, cookieName: "adobeujs-optin" }, { cookies: f }), D = this, w = (C = {}, (k = D).on = function (e, t, n) { if (!t || "function" != typeof t) throw new Error("[ON] Callback should be a function."); C.hasOwnProperty(e) || (C[e] = []); var i = C[e].push({ callback: t, context: n }) - 1; return function () { C[e].splice(i, 1), C[e].length || delete C[e] } }, k.off = function (e, t) { C.hasOwnProperty(e) && (C[e] = C[e].filter(function (e) { if (e.callback !== t) return e })) }, k.publish = function (e) { var t; C.hasOwnProperty(e) && (t = [].slice.call(arguments, 1), C[e].slice(0).forEach(function (e) { e.callback.apply(e.context, t) })) }, k.publish), S = H(), T = K(p), E = K(s), A = I.get(), O = {}, M = (y = A, X(T) || y && X(y) ? fe : le), P = (m = E, h = T, v = A, b = J(he, !a), a ? Object.assign({}, b, m, h, v) : b), x = (g = P, JSON.parse(JSON.stringify(g))), L = function (e) { return M = e }, R = function (e) { return P = e }; D.deny = e(!1), D.approve = e(!0), D.denyAll = D.deny.bind(D, he), D.approveAll = D.approve.bind(D, he), D.isApproved = function (e) { return t(e, D.permissions) }, D.isPreApproved = function (e) { return t(e, E) }, D.fetchPermissions = function (e) { var t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1], n = t ? D.on(fe, e) : Ce; return !a || a && D.isComplete || s ? e(D.permissions) : t || S.add(_e, function () { return e(D.permissions) }), n }, D.complete = function () { D.status === de && i() }, D.registerPlugin = function (e) { if (!e || !e.name || "function" != typeof e.onRegister) throw new Error("[OptIn#registerPlugin] Plugin is invalid."); O[e.name] || (O[e.name] = e).onRegister.call(e, D) }, D.execute = (_ = O, function () { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, t = e.command, n = e.params, i = void 0 === n ? {} : n, r = e.callback, a = void 0 === r ? Ce : r; if (!t || -1 === t.indexOf(".")) throw new Error("[OptIn.execute] Please provide a valid command."); try { var o = t.split("."), s = _[o[0]], c = o[1]; if (!s || "function" != typeof s[c]) throw new Error("Make sure the plugin and API name exist."); var u = Object.assign(i, { callback: a }); s[c].call(s, u) } catch (e) { ve.error("[execute] Something went wrong: " + e.message) } }), Object.defineProperties(D, { permissions: { get: function () { return P } }, status: { get: function () { return M } }, Categories: { get: function () { return pe } }, doesOptInApply: { get: function () { return !!a } }, isPending: { get: function () { return D.status === le } }, isComplete: { get: function () { return D.status === fe } }, __plugins: { get: function () { return Object.keys(O) } }, isIabContext: { get: function () { return d } } }) } function l(e, t) { if (void 0 === t) return e; var n = setTimeout(function () { n = null, e.call(e, new i("The call took longer than you wanted!")) }, t); return function () { n && (clearTimeout(n), e.apply(e, arguments)) } } function r() { if (window.__cmp) return window.__cmp; var a, e = window; if (e !== window.top) { for (; !a;) { e = e.parent; try { e.frames.__cmpLocator && (a = e) } catch (e) { } if (e === window.top) break } if (a) { var o = {}; return window.__cmp = function (e, t, n) { var i = Math.random() + "", r = { __cmpCall: { command: e, parameter: t, callId: i } }; o[i] = n, a.postMessage(r, "*") }, window.addEventListener("message", function (e) { var t, n = e.data; if ("string" == typeof n) try { n = JSON.parse(e.data) } catch (e) { } n.__cmpReturn && (t = n.__cmpReturn, o[t.callId] && (o[t.callId](t.returnValue, t.success), delete o[t.callId])) }, !1), window.__cmp } ve.error("__cmp not found") } else ve.error("__cmp not found") } var R = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : void 0 !== Pe ? Pe : "undefined" != typeof self ? self : {}; Object.assign = Object.assign || function (e) { for (var t, n, i = 1; i < arguments.length; ++i)for (t in n = arguments[i]) Object.prototype.hasOwnProperty.call(n, t) && (e[t] = n[t]); return e }; function g(a) { function i() { } this.getMarketingCloudVisitorID = function (e) { e = e || i; var t = this.findField(_.MCMID, e), n = function (n, i) { var r = this; return function () { var e = a(0, n), t = {}; return t[n] = e, r.setStateAndPublish(t), i(e), e } }.call(this, _.MCMID, e); return void 0 !== t ? t : n() }, this.getVisitorValues = function (t) { this.getMarketingCloudVisitorID(function (e) { t({ MCMID: e }) }) } } function m() { function r() { } Object.keys(D).forEach(function (i) { this[D[i]] = function (e) { e = e || r; var t = this.findField(i, e), n = function (e, t) { var n = this; return function () { return n.callbackRegistry.add(e, t), n.messageParent(I.GETSTATE), "" } }.call(this, i, e); return void 0 !== t ? t : n() } }, this), Object.keys(w).forEach(function (e) { this[w[e]] = function () { return this.findField(e, r) || {} } }, this) } function h() { Object.keys(S).forEach(function (t) { this[S[t]] = function (e) { this.callbackRegistry.add(t, e) } }, this) } function N(a, o) { this.parse = function (e) { try { var n = {}; return e.data.split("|").forEach(function (e, t) { void 0 !== e && (n[A[t]] = 2 !== t ? e : JSON.parse(e)) }), n } catch (e) { } }, this.isInvalid = function (e) { var t = this.parse(e); if (!t || Object.keys(t).length < 2) return !0; var n = a !== t.orgID, i = !o || e.origin !== o, r = -1 === Object.keys(E).indexOf(t.prefix); return n || i || r }, this.send = function (e, t, n) { var i = t + "|" + a; n && n === Object(n) && (i += "|" + JSON.stringify(n)); try { e.postMessage(i, o) } catch (e) { } } } function d(e, t, n, i) { function r(e) { Object.assign(l, e) } function a(e) { var t; p.isInvalid(e) || (f = !1, t = p.parse(e), l.setStateAndPublish(t.state)) } function o(e) { !f && d && (f = !0, p.send(i, e)) } function s() { r(new g(n._generateID)), l.getMarketingCloudVisitorID(), l.callbackRegistry.executeAll(l.state, !0), R.removeEventListener("message", c) } function c(e) { var t; p.isInvalid(e) || (t = p.parse(e), f = !1, R.clearTimeout(l._handshakeTimeout), R.removeEventListener("message", c), r(new m), R.addEventListener("message", a), l.setStateAndPublish(t.state), l.callbackRegistry.hasCallbacks() && o(O.GETSTATE)) } function u() { Object.keys(n).forEach(function (e) { 0 !== e.indexOf("_") && "function" == typeof n[e] && (l[e] = function () { }) }), l.getSupplementalDataID = n.getSupplementalDataID, l.isAllowed = function () { return !0 } } var l = this, d = t.whitelistParentDomain; l.state = { ALLFIELDS: {} }, l.version = n.version, l.marketingCloudOrgID = e, l.cookieDomain = n.cookieDomain || ""; var f = !(l._instanceType = "child"), p = new N(e, d); l.callbackRegistry = T(), l.init = function () { R.s_c_in || (R.s_c_il = [], R.s_c_in = 0), l._c = "Visitor", l._il = R.s_c_il, l._in = R.s_c_in, l._il[l._in] = l, R.s_c_in++, u(), r(new h), d && postMessage ? (R.addEventListener("message", c), o(O.HANDSHAKE), l._handshakeTimeout = setTimeout(s, 250)) : s() }, l.findField = function (e, t) { if (void 0 !== l.state[e]) return t(l.state[e]), l.state[e] }, l.messageParent = o, l.setStateAndPublish = function (e) { Object.assign(l.state, e), Object.assign(l.state.ALLFIELDS, e), l.callbackRegistry.executeAll(l.state) } } function j(o, r) { function t(a) { return function e(t) { var n, i, r = (n = [], o._loading && Object.keys(o._loading).forEach(function (e) { var t; o._loading[e] && (t = ee[e], n.push(t)) }), n.length ? n : null); r ? (i = x[r[0]], o[i](e, !0)) : a() } } function i(e, t) { var i, n = (i = {}, Object.keys(P).forEach(function (e) { var t = P[e], n = o[t](); Z.isValueEmpty(n) || (i[e] = n) }), i); r.send(e, t, n) } function n(e) { var t, n; t = e, n = o.setCustomerIDs, o.setCustomerIDs = function (e) { n.call(o, e), r.send(t, M.PARENTSTATE, { CUSTOMERIDS: o.getCustomerIDs() }) }, i(e, M.HANDSHAKE) } return function (e) { r.isInvalid(e) || (r.parse(e).prefix === M.HANDSHAKE ? n : function (e) { t(function () { i(e, M.PARENTSTATE) })() })(e.source) } } function V(r, a) { var o = {}, s = 0, c = Object.keys(r).length; Object.keys(r).forEach(function (e) { var t, n, i = r[e]; i.fn && ((t = i.args || []).unshift((n = e, function (e) { o[n] = e, ++s === c && a(o) })), i.fn.apply(i.context || null, t)) }) } function U(e) { var t; !e && R.location && (e = R.location.hostname); for (var n = (t = e).split("."), i = n.length - 2; 0 <= i; i--)if (t = n.slice(i).join("."), te.set("test", "cookie", { domain: t })) return te.remove("test", { domain: t }), t; return "" } function F(e) { var t, n, i = "0123456789", r = "", a = "", o = 8, s = 10, c = 10; if (1 == e) { for (i += "ABCDEF", t = 0; t < 16; t++)n = Math.floor(Math.random() * o), r += i.substring(n, n + 1), n = Math.floor(Math.random() * o), a += i.substring(n, n + 1), o = 16; return r + "-" + a } for (t = 0; t < 19; t++)n = Math.floor(Math.random() * s), r += i.substring(n, n + 1), 0 === t && 9 == n ? s = 3 : ((1 == t || 2 == t) && 10 != s && n < 2 || 2 < t) && (s = 10), n = Math.floor(Math.random() * c), a += i.substring(n, n + 1), 0 === t && 9 == n ? c = 3 : ((1 == t || 2 == t) && 10 != c && n < 2 || 2 < t) && (c = 10); return r + a } function B(i, e) { return { corsMetadata: (t = "none", n = !0, "undefined" != typeof XMLHttpRequest && XMLHttpRequest === Object(XMLHttpRequest) && ("withCredentials" in new XMLHttpRequest ? t = "XMLHttpRequest" : "undefined" != typeof XDomainRequest && XDomainRequest === Object(XDomainRequest) && (n = !1), 0 < Object.prototype.toString.call(R.HTMLElement).indexOf("Constructor") && (n = !1)), { corsType: t, corsCookiesEnabled: n }), getCORSInstance: function () { return "none" === this.corsMetadata.corsType ? null : new R[this.corsMetadata.corsType] }, fireCORS: function (a, e, t) { var o = this; e && (a.loadErrorHandler = e); try { var n = this.getCORSInstance(); n.open("get", a.corsUrl + "&ts=" + (new Date).getTime(), !0), "XMLHttpRequest" === this.corsMetadata.corsType && (n.withCredentials = !0, n.timeout = i.loadTimeout, n.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), n.onreadystatechange = function () { 4 === this.readyState && 200 === this.status && function (e) { var t; try { if ((t = JSON.parse(e)) !== Object(t)) return o.handleCORSError(a, null, "Response is not JSON") } catch (e) { return o.handleCORSError(a, e, "Error parsing response as JSON") } try { for (var n = a.callback, i = R, r = 0; r < n.length; r++)i = i[n[r]]; i(t) } catch (e) { o.handleCORSError(a, e, "Error forming callback function") } }(this.responseText) }), n.onerror = function (e) { o.handleCORSError(a, e, "onerror") }, n.ontimeout = function (e) { o.handleCORSError(a, e, "ontimeout") }, n.send(), i._log.requests.push(a.corsUrl) } catch (e) { this.handleCORSError(a, e, "try-catch") } }, handleCORSError: function (e, t, n) { i.CORSErrors.push({ corsData: e, error: t, description: n }), e.loadErrorHandler && ("ontimeout" === n ? e.loadErrorHandler(!0) : e.loadErrorHandler(!1)) } }; var t, n } function H() { var r = {}; return r.callbacks = Object.create(null), r.add = function (e, t) { if (!("function" == typeof (n = t) || n instanceof Array && n.length)) throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions."); var n; r.callbacks[e] = r.callbacks[e] || []; var i = r.callbacks[e].push(t) - 1; return function () { r.callbacks[e].splice(i, 1) } }, r.execute = function (e, t) { if (r.callbacks[e]) { t = (t = void 0 === t ? [] : t) instanceof Array ? t : [t]; try { for (; r.callbacks[e].length;) { var n = r.callbacks[e].shift(); "function" == typeof n ? n.apply(null, t) : n instanceof Array && n[1].apply(n[0], t) } delete r.callbacks[e] } catch (e) { } } }, r.executeAll = function (n, e) { var t; (e || n && ((t = n) !== Object(t) || 0 !== Object.keys(t).length)) && Object.keys(r.callbacks).forEach(function (e) { var t = void 0 !== n[e] ? n[e] : ""; r.execute(e, t) }, r) }, r.hasCallbacks = function () { return Boolean(Object.keys(r.callbacks).length) }, r } function s() { } function a(a, o, e) { return e() ? function () { if (i = a, (r = window.console) && "function" == typeof r[i]) { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; console[a].apply(console, [o].concat(t)) } var i, r } : s } function q(e, t) { return L(e) === t } function G(e, t) { return e instanceof Array ? e : q(e, "string") ? [e] : t || [] } function W(e) { return !(!e || be(e)) && G(e).every(function (e) { return -1 < he.indexOf(e) }) } function J(e, n) { return e.reduce(function (e, t) { return e[t] = n, e }, {}) } function K(e) { if (ke(e)) return e; try { return JSON.parse(e) } catch (e) { return {} } } function X(e) { return void 0 === e || (ke(e) ? W(Object.keys(e)) : ye(e)) } function Y(e, t) { X(e) || ve.error("".concat(t)) } var o, c, f, p, v, b = { HANDSHAKE: "HANDSHAKE", GETSTATE: "GETSTATE", PARENTSTATE: "PARENTSTATE" }, y = { MCMID: "getMarketingCloudVisitorID", MCAID: "getAnalyticsVisitorID", MCAAMB: "getAudienceManagerBlob", MCAAMLH: "getAudienceManagerLocationHint", MCOPTOUT: "isOptedOut", ALLFIELDS: "getVisitorValues" }, k = { MCMID: "getMarketingCloudVisitorID", MCAAMB: "getAudienceManagerBlob", MCAAMLH: "getAudienceManagerLocationHint", MCOPTOUT: "isOptedOut", MCAID: "getAnalyticsVisitorID", CUSTOMERIDS: "getCustomerIDs", ALLFIELDS: "getVisitorValues" }, C = { MC: "MCMID", A: "MCAID", AAM: "MCAAMB" }, z = { MCMID: "MCMID", MCOPTOUT: "MCOPTOUT", MCAID: "MCAID", MCAAMLH: "MCAAMLH", MCAAMB: "MCAAMB" }, Q = { UNKNOWN: 0, AUTHENTICATED: 1, LOGGED_OUT: 2 }, $ = { GLOBAL: "global" }, _ = { MCMID: "MCMID", MCAID: "MCAID", MCAAMB: "MCAAMB", MCAAMLH: "MCAAMLH", MCOPTOUT: "MCOPTOUT", CUSTOMERIDS: "CUSTOMERIDS" }, I = b, D = y, w = { CUSTOMERIDS: "getCustomerIDs" }, S = y, Z = ((v = (p = { exports: {} }).exports).isObjectEmpty = function (e) { return e === Object(e) && 0 === Object.keys(e).length }, v.isValueEmpty = function (e) { return "" === e || v.isObjectEmpty(e) }, v.getIeVersion = function () { if (document.documentMode) return document.documentMode; for (var e = 7; 4 < e; e--) { var t = document.createElement("div"); if (t.innerHTML = "\x3c!--[if IE " + e + "]><span></span><![endif]--\x3e", t.getElementsByTagName("span").length) return t = null, e; t = null } return null }, v.encodeAndBuildRequest = function (e, t) { return e.map(encodeURIComponent).join(t) }, v.isObject = function (e) { return null !== e && "object" === L(e) && !1 === Array.isArray(e) }, v.defineGlobalNamespace = function () { return window.adobe = v.isObject(window.adobe) ? window.adobe : {}, window.adobe }, v.pluck = function (n, e) { return e.reduce(function (e, t) { return n[t] && (e[t] = n[t]), e }, Object.create(null)) }, v.parseOptOut = function (e, t, n) { t || (t = n, e.d_optout && e.d_optout instanceof Array && (t = e.d_optout.join(","))); var i = parseInt(e.d_ottl, 10); return isNaN(i) && (i = 7200), { optOut: t, d_ottl: i } }, v.normalizeBoolean = function (e) { var t = e; return "true" === e ? t = !0 : "false" === e && (t = !1), t }, p.exports), T = (Z.isObjectEmpty, Z.isValueEmpty, Z.getIeVersion, Z.encodeAndBuildRequest, Z.isObject, Z.defineGlobalNamespace, Z.pluck, Z.parseOptOut, Z.normalizeBoolean, function () { return { callbacks: {}, add: function (e, t) { this.callbacks[e] = this.callbacks[e] || []; var n = this.callbacks[e].push(t) - 1, i = this; return function () { i.callbacks[e].splice(n, 1) } }, execute: function (e, t) { if (this.callbacks[e]) { t = (t = void 0 === t ? [] : t) instanceof Array ? t : [t]; try { for (; this.callbacks[e].length;) { var n = this.callbacks[e].shift(); "function" == typeof n ? n.apply(null, t) : n instanceof Array && n[1].apply(n[0], t) } delete this.callbacks[e] } catch (e) { } } }, executeAll: function (n, e) { (e || n && !Z.isObjectEmpty(n)) && Object.keys(this.callbacks).forEach(function (e) { var t = void 0 !== n[e] ? n[e] : ""; this.execute(e, t) }, this) }, hasCallbacks: function () { return Boolean(Object.keys(this.callbacks).length) } } }), E = b, A = { 0: "prefix", 1: "orgID", 2: "state" }, O = b, M = b, P = k, x = y, ee = C, te = { get: function (e) { e = encodeURIComponent(e); var t = (";" + document.cookie).split(" ").join(";"), n = t.indexOf(";" + e + "="), i = n < 0 ? n : t.indexOf(";", n + 1); return n < 0 ? "" : decodeURIComponent(t.substring(n + 2 + e.length, i < 0 ? t.length : i)) }, set: function (e, t, n) { var i, r, a = u(n, "cookieLifetime"), o = u(n, "expires"), s = u(n, "domain"), c = u(n, "secure") ? "Secure" : ""; return o && "SESSION" !== a && "NONE" !== a ? (i = "" !== t ? parseInt(a || 0, 10) : -60) ? (o = new Date).setTime(o.getTime() + 1e3 * i) : 1 === o && (r = (o = new Date).getYear(), o.setYear(r + 2 + (r < 1900 ? 1900 : 0))) : o = 0, e && "NONE" !== a ? (document.cookie = encodeURIComponent(e) + "=" + encodeURIComponent(t) + "; path=/;" + (o ? " expires=" + o.toGMTString() + ";" : "") + (s ? " domain=" + s + ";" : "") + c, this.get(e) === t) : 0 }, remove: function (e, t) { var n = (n = u(t, "domain")) ? " domain=" + n + ";" : ""; document.cookie = encodeURIComponent(e) + "=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;" + n } }, ne = function (e, t) { return n(e, t) < 0 }, ie = function (e, t) { return 0 !== n(e, t) }, re = !!R.postMessage, ae = function (e, t, n) { t && (re ? n.postMessage(e, t.replace(/([^:]+:\/\/[^\/]+).*/, "$1")) : t && (n.location = t.replace(/#.*$/, "") + "#" + +new Date + "1&" + e)) }, oe = function (t, n) { var e; try { re && (t && (e = function (e) { if ("string" == typeof n && e.origin !== n || "[object Function]" === Object.prototype.toString.call(n) && !1 === n(e.origin)) return !1; t(e) }), R.addEventListener ? R[t ? "addEventListener" : "removeEventListener"]("message", e) : R[t ? "attachEvent" : "detachEvent"]("onmessage", e)) } catch (t) { } }, se = { POST_MESSAGE_ENABLED: !!R.postMessage, DAYS_BETWEEN_SYNC_ID_CALLS: 1, MILLIS_PER_DAY: 864e5, ADOBE_MC: "adobe_mc", ADOBE_MC_SDID: "adobe_mc_sdid", VALID_VISITOR_ID_REGEX: /^[0-9a-fA-F\-]+$/, ADOBE_MC_TTL_IN_MIN: 5, VERSION_REGEX: /vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/, FIRST_PARTY_SERVER_COOKIE: "s_ecid" }, ce = { audienceManagerServer: {}, audienceManagerServerSecure: {}, cookieDomain: {}, cookieLifetime: {}, cookieName: {}, doesOptInApply: {}, disableThirdPartyCalls: {}, discardTrackingServerECID: {}, idSyncAfterIDCallResult: {}, idSyncAttachIframeOnWindowLoad: {}, idSyncContainerID: {}, idSyncDisable3rdPartySyncing: {}, disableThirdPartyCookies: {}, idSyncDisableSyncs: {}, disableIdSyncs: {}, idSyncIDCallResult: {}, idSyncSSLUseAkamai: {}, isCoopSafe: {}, isIabContext: {}, isOptInStorageEnabled: {}, loadSSL: {}, loadTimeout: {}, marketingCloudServer: {}, marketingCloudServerSecure: {}, optInCookieDomain: {}, optInStorageExpiry: {}, overwriteCrossDomainMCIDAndAID: {}, preOptInApprovals: {}, previousPermissions: {}, resetBeforeVersion: {}, sdidParamExpiry: {}, serverState: {}, sessionCookieName: {}, secureCookie: {}, takeTimeoutMetrics: {}, trackingServer: {}, trackingServerSecure: {}, whitelistIframeDomains: {}, whitelistParentDomain: {} }, ue = { getConfigNames: function () { return Object.keys(ce) }, getConfigs: function () { return ce }, normalizeConfig: function (e) { return "function" != typeof e ? e : e() } }, le = "pending", de = "changed", fe = "complete", pe = { AAM: "aam", ADCLOUD: "adcloud", ANALYTICS: "aa", CAMPAIGN: "campaign", ECID: "ecid", LIVEFYRE: "livefyre", TARGET: "target", VIDEO_ANALYTICS: "videoaa" }, ge = (e(o = {}, pe.AAM, 565), e(o, pe.ECID, 565), o), me = (e(c = {}, pe.AAM, [1, 2, 5]), e(c, pe.ECID, [1, 2, 5]), c), he = (f = pe, Object.keys(f).map(function (e) { return f[e] })), ve = new function () { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : "", t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : function () { return !0 }; this.log = a("log", e, t), this.warn = a("warn", e, t), this.error = a("error", e, t) }("[ADOBE OPT-IN]"), be = function (e) { return "[object Array]" === Object.prototype.toString.call(e) && !e.length }, ye = function (e) { try { var t = JSON.parse(e); return !!e && q(e, "string") && W(Object.keys(t)) } catch (e) { return !1 } }, ke = function (e) { return null !== e && q(e, "object") && !1 === Array.isArray(e) }, Ce = function () { }; (i.prototype = Object.create(Error.prototype)).constructor = i; var _e = "fetchPermissions"; t.Categories = pe, t.TimeoutError = i; function Ie(e, t) { return "SHA-256" !== t && "SHA256" !== t && "sha256" !== t && "sha-256" !== t || (e = function e(t) { function n(e, t) { return e >>> t | e << 32 - t } for (var i, r, a = Math.pow, o = a(2, 32), s = "", c = [], u = 8 * t.length, l = e.h = e.h || [], d = e.k = e.k || [], f = d.length, p = {}, g = 2; f < 64; g++)if (!p[g]) { for (i = 0; i < 313; i += g)p[i] = g; l[f] = a(g, .5) * o | 0, d[f++] = a(g, 1 / 3) * o | 0 } for (t += ""; t.length % 64 - 56;)t += "\0"; for (i = 0; i < t.length; i++) { if ((r = t.charCodeAt(i)) >> 8) return; c[i >> 2] |= r << (3 - i) % 4 * 8 } for (c[c.length] = u / o | 0, c[c.length] = u, r = 0; r < c.length;) { var m = c.slice(r, r += 16), h = l; for (l = l.slice(0, 8), i = 0; i < 64; i++) { var v = m[i - 15], b = m[i - 2], y = l[0], k = l[4], C = l[7] + (n(k, 6) ^ n(k, 11) ^ n(k, 25)) + (k & l[5] ^ ~k & l[6]) + d[i] + (m[i] = i < 16 ? m[i] : m[i - 16] + (n(v, 7) ^ n(v, 18) ^ v >>> 3) + m[i - 7] + (n(b, 17) ^ n(b, 19) ^ b >>> 10) | 0); (l = [C + ((n(y, 2) ^ n(y, 13) ^ n(y, 22)) + (y & l[1] ^ y & l[2] ^ l[1] & l[2])) | 0].concat(l))[4] = l[4] + C | 0 } for (i = 0; i < 8; i++)l[i] = l[i] + h[i] | 0 } for (i = 0; i < 8; i++)for (r = 3; r + 1; r--) { var _ = l[i] >> 8 * r & 255; s += (_ < 16 ? 0 : "") + _.toString(16) } return s }(e)), e } function De(e) { return String(e).trim().toLowerCase() } var we = Object.freeze({ OptIn: t, IabPlugin: function () { var e = this; function a(e) { var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}; return s[e] = t } e.name = "iabPlugin", e.version = "0.0.1"; var o = H(), s = { allConsentData: null }; e.fetchConsentData = function (e) { var t = l(e.callback, e.timeout); i({ callback: t }) }, e.isApproved = function (e) { var r = e.callback, a = e.category, t = e.timeout; if (s.allConsentData) return r(null, u(a, s.allConsentData.vendorConsents, s.allConsentData.purposeConsents)); var n = l(function (e) { var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, n = t.vendorConsents, i = t.purposeConsents; r(e, u(a, n, i)) }, t); i({ category: a, callback: n }) }, e.onRegister = function (a) { var o = Object.keys(ge); e.fetchConsentData({ callback: function (e) { var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, n = t.purposeConsents, i = t.gdprApplies, r = t.vendorConsents; !e && i && r && n && (o.forEach(function (e) { var t = u(e, r, n); a[t ? "approve" : "deny"](e, !0) }), a.complete()) } }) }; var i = function (e) { var t = e.callback; if (s.allConsentData) return t(null, s.allConsentData); o.add("FETCH_CONSENT_DATA", t); var r = {}; n(function () { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}, t = e.purposeConsents, n = e.gdprApplies, i = e.vendorConsents; 1 < arguments.length && arguments[1] && a("allConsentData", r = { purposeConsents: t, gdprApplies: n, vendorConsents: i }), c(function () { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}; 1 < arguments.length && arguments[1] && (r.consentString = e.consentData, a("allConsentData", r)), o.execute("FETCH_CONSENT_DATA", [null, s.allConsentData]) }) }) }, c = function (e) { var t = r(); t && t("getConsentData", null, e) }, n = function (e) { var t = function (t) { return Object.keys(t).map(function (e) { return t[e] }) }(ge).filter(function (e, t, n) { return n.indexOf(e) === t }), n = r(); n && n("getVendorConsents", t, e) }, u = function (e) { var t = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}; return !!(1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {})[ge[e]] && me[e].every(function (e) { return t[e] }) } } }), Se = we.OptIn; Z.defineGlobalNamespace(), window.adobe.OptInCategories = Se.Categories; function Te(r, n, e) { function t(e) { var i = e; return function (e) { var t = e || m.location.href; try { var n = p._extractParamFromUri(t, i); if (n) return S.parsePipeDelimetedKeyValues(n) } catch (e) { } } } function a(e) { e = e || {}, p._supplementalDataIDCurrent = e.supplementalDataIDCurrent || "", p._supplementalDataIDCurrentConsumed = e.supplementalDataIDCurrentConsumed || {}, p._supplementalDataIDLast = e.supplementalDataIDLast || "", p._supplementalDataIDLastConsumed = e.supplementalDataIDLastConsumed || {} } function i(e) { var t, n = e.reduce(function (e, t) { var n, i = t[0], r = t[1]; return null != r && r !== I && (e = (n = (n = e) ? n += "|" : n) + (i + "=" + encodeURIComponent(r))), e }, ""); return (t = (t = n) ? t += "|" : t) + "TS=" + S.getTimestampInSeconds() } function d() { return p.configs.isIabContext ? u.optIn.isApproved(u.optIn.Categories.ECID) && l : u.optIn.isApproved(u.optIn.Categories.ECID) } function o(e, t) { if (l = !0, e) throw new Error("[IAB plugin] : " + e); t.gdprApplies && (g = t.consentString), p.init(), c() } function s() { u.optIn.isApproved(u.optIn.Categories.ECID) && (p.configs.isIabContext ? u.optIn.execute({ command: "iabPlugin.fetchConsentData", callback: o }) : (p.init(), c())) } function c() { u.optIn.off("complete", s) } if (!e || e.split("").reverse().join("") !== r) throw new Error("Please use `Visitor.getInstance` to instantiate Visitor."); var p = this, u = window.adobe, g = "", l = !1, f = !1; p.version = "4.4.0"; var m = R, h = m.Visitor; function v(e) { return !Object.prototype[e] } h.version = p.version, h.AuthState = Q, h.OptOut = $, m.s_c_in || (m.s_c_il = [], m.s_c_in = 0), p._c = "Visitor", p._il = m.s_c_il, p._in = m.s_c_in, p._il[p._in] = p, m.s_c_in++, p._instanceType = "regular", p._log = { requests: [] }, p.marketingCloudOrgID = r, p.cookieName = "AMCV_" + r, p.sessionCookieName = "AMCVS_" + r, p.cookieDomain = U(), p.loadSSL = 0 <= m.location.protocol.toLowerCase().indexOf("https"), p.loadTimeout = 3e4, p.CORSErrors = [], p.marketingCloudServer = p.audienceManagerServer = "dpm.demdex.net", p.sdidParamExpiry = 30; var b = null, y = "MCMID", k = "MCAID", C = "AAM", _ = "MCAAMB", I = "NONE", D = B(p); p.FIELDS = z, p.cookieRead = function (e) { return te.get(e) }, p.cookieWrite = function (e, t, n) { var i = p.cookieLifetime ? ("" + p.cookieLifetime).toUpperCase() : "", r = !1; return p.configs && p.configs.secureCookie && "https:" === location.protocol && (r = !0), te.set(e, "" + t, { expires: n, domain: p.cookieDomain, cookieLifetime: i, secure: r }) }, p.resetState = function (e) { e ? p._mergeServerState(e) : a() }, p._isAllowedDone = !1, p._isAllowedFlag = !1, p.isAllowed = function () { return p._isAllowedDone || (p._isAllowedDone = !0, (p.cookieRead(p.cookieName) || p.cookieWrite(p.cookieName, "T", 1)) && (p._isAllowedFlag = !0)), "T" === p.cookieRead(p.cookieName) && p._helpers.removeCookie(p.cookieName), p._isAllowedFlag }, p.setMarketingCloudVisitorID = function (e) { p._setMarketingCloudFields(e) }, p._use1stPartyMarketingCloudServer = !1, p.getMarketingCloudVisitorID = function (e, t) { p.marketingCloudServer && p.marketingCloudServer.indexOf(".demdex.net") < 0 && (p._use1stPartyMarketingCloudServer = !0); var n = p._getAudienceManagerURLData("_setMarketingCloudFields"), i = n.url; return p._getRemoteField(y, i, e, t, n) }, p.getVisitorValues = function (e, t) { var n = { MCMID: { fn: p.getMarketingCloudVisitorID, args: [!0], context: p }, MCOPTOUT: { fn: p.isOptedOut, args: [void 0, !0], context: p }, MCAID: { fn: p.getAnalyticsVisitorID, args: [!0], context: p }, MCAAMLH: { fn: p.getAudienceManagerLocationHint, args: [!0], context: p }, MCAAMB: { fn: p.getAudienceManagerBlob, args: [!0], context: p } }, i = t && t.length ? Z.pluck(n, t) : n; V(i, e) }, p._currentCustomerIDs = {}, p._customerIDsHashChanged = !1, p._newCustomerIDsHash = "", p.setCustomerIDs = function (e, t) { if (!p.isOptedOut() && e) { if (!Z.isObject(e) || Z.isObjectEmpty(e)) return !1; var n, i, r; for (n in p._readVisitor(), e) if (v(n) && (t = (i = e[n]).hasOwnProperty("hashType") ? i.hashType : t, i)) if ("object" === L(i)) { var a = {}; if (i.id) { if (t) { if (!(r = Ie(De(i.id), t))) return; i.id = r, a.hashType = t } a.id = i.id } null != i.authState && (a.authState = i.authState), p._currentCustomerIDs[n] = a } else if (t) { if (!(r = Ie(De(i), t))) return; p._currentCustomerIDs[n] = { id: r, hashType: t } } else p._currentCustomerIDs[n] = { id: i }; var o = p.getCustomerIDs(), s = "", c = (c = p._getField("MCCIDH")) || 0; for (n in o) v(n) && (s += (s ? "|" : "") + n + "|" + ((i = o[n]).id ? i.id : "") + (i.authState ? i.authState : "")); p._newCustomerIDsHash = String(p._hash(s)), p._newCustomerIDsHash !== c && (p._customerIDsHashChanged = !0, p._mapCustomerIDs(function () { p._customerIDsHashChanged = !1 })) } }, p.getCustomerIDs = function () { p._readVisitor(); var e, t, n = {}; for (e in p._currentCustomerIDs) v(e) && (t = p._currentCustomerIDs[e], n[e] || (n[e] = {}), t.id && (n[e].id = t.id), null != t.authState ? n[e].authState = t.authState : n[e].authState = h.AuthState.UNKNOWN, t.hashType && (n[e].hashType = t.hashType)); return n }, p.setAnalyticsVisitorID = function (e) { p._setAnalyticsFields(e) }, p.getAnalyticsVisitorID = function (t, e, n) { if (!S.isTrackingServerPopulated() && !n) return p._callCallback(t, [""]), ""; var i = ""; if (n || (i = p.getMarketingCloudVisitorID(function (e) { p.getAnalyticsVisitorID(t, !0) })), i || n) { var r = n ? p.marketingCloudServer : p.trackingServer, a = ""; p.loadSSL && (n ? p.marketingCloudServerSecure && (r = p.marketingCloudServerSecure) : p.trackingServerSecure && (r = p.trackingServerSecure)); var o, s, c, u = {}; return r && (o = "http" + (p.loadSSL ? "s" : "") + "://" + r + "/id", s = "d_visid_ver=" + p.version + "&mcorgid=" + encodeURIComponent(p.marketingCloudOrgID) + (i ? "&mid=" + encodeURIComponent(i) : "") + (p.idSyncDisable3rdPartySyncing || p.disableThirdPartyCookies ? "&d_coppa=true" : ""), c = ["s_c_il", p._in, "_set" + (n ? "MarketingCloud" : "Analytics") + "Fields"], a = o + "?" + s + "&callback=s_c_il%5B" + p._in + "%5D._set" + (n ? "MarketingCloud" : "Analytics") + "Fields", u.corsUrl = o + "?" + s, u.callback = c), u.url = a, p._getRemoteField(n ? y : k, a, t, e, u) } return "" }, p.getAudienceManagerLocationHint = function (t, e) { if (p.getMarketingCloudVisitorID(function (e) { p.getAudienceManagerLocationHint(t, !0) })) { var n = p._getField(k); if (!n && S.isTrackingServerPopulated() && (n = p.getAnalyticsVisitorID(function (e) { p.getAudienceManagerLocationHint(t, !0) })), n || !S.isTrackingServerPopulated()) { var i = p._getAudienceManagerURLData(), r = i.url; return p._getRemoteField("MCAAMLH", r, t, e, i) } } return "" }, p.getLocationHint = p.getAudienceManagerLocationHint, p.getAudienceManagerBlob = function (t, e) { if (p.getMarketingCloudVisitorID(function (e) { p.getAudienceManagerBlob(t, !0) })) { var n = p._getField(k); if (!n && S.isTrackingServerPopulated() && (n = p.getAnalyticsVisitorID(function (e) { p.getAudienceManagerBlob(t, !0) })), n || !S.isTrackingServerPopulated()) { var i = p._getAudienceManagerURLData(), r = i.url; return p._customerIDsHashChanged && p._setFieldExpire(_, -1), p._getRemoteField(_, r, t, e, i) } } return "" }, p._supplementalDataIDCurrent = "", p._supplementalDataIDCurrentConsumed = {}, p._supplementalDataIDLast = "", p._supplementalDataIDLastConsumed = {}; var w = !(p.getSupplementalDataID = function (e, t) { p._supplementalDataIDCurrent || t || (p._supplementalDataIDCurrent = p._generateID(1)); var n = p._supplementalDataIDCurrent; return p._supplementalDataIDLast && !p._supplementalDataIDLastConsumed[e] ? (n = p._supplementalDataIDLast, p._supplementalDataIDLastConsumed[e] = !0) : n && (p._supplementalDataIDCurrentConsumed[e] && (p._supplementalDataIDLast = p._supplementalDataIDCurrent, p._supplementalDataIDLastConsumed = p._supplementalDataIDCurrentConsumed, p._supplementalDataIDCurrent = n = t ? "" : p._generateID(1), p._supplementalDataIDCurrentConsumed = {}), n && (p._supplementalDataIDCurrentConsumed[e] = !0)), n }); p._liberatedOptOut = null, p.getOptOut = function (e, t) { var n = p._getAudienceManagerURLData("_setMarketingCloudFields"), i = n.url; if (d()) return p._getRemoteField("MCOPTOUT", i, e, t, n); if (p._registerCallback("liberatedOptOut", e), null !== p._liberatedOptOut) return p._callAllCallbacks("liberatedOptOut", [p._liberatedOptOut]), w = !1, p._liberatedOptOut; if (w) return null; w = !0; var r = "liberatedGetOptOut"; return n.corsUrl = n.corsUrl.replace(/dpm\.demdex\.net\/id\?/, "dpm.demdex.net/optOutStatus?"), n.callback = [r], R[r] = function (e) { var t, n, i; e === Object(e) && (n = (t = Z.parseOptOut(e, n, I)).optOut, i = 1e3 * t.d_ottl, p._liberatedOptOut = n, setTimeout(function () { p._liberatedOptOut = null }, i)), p._callAllCallbacks("liberatedOptOut", [n]), w = !1 }, D.fireCORS(n), null }, p.isOptedOut = function (n, i, e) { i = i || h.OptOut.GLOBAL; var t = p.getOptOut(function (e) { var t = e === h.OptOut.GLOBAL || 0 <= e.indexOf(i); p._callCallback(n, [t]) }, e); return t ? t === h.OptOut.GLOBAL || 0 <= t.indexOf(i) : null }, p._fields = null, p._fieldsExpired = null, p._hash = function (e) { var t, n = 0; if (e) for (t = 0; t < e.length; t++)n = (n << 5) - n + e.charCodeAt(t), n &= n; return n }, p._generateID = F, p._generateLocalMID = function () { var e = p._generateID(0); return x.isClientSideMarketingCloudVisitorID = !0, e }, p._callbackList = null, p._callCallback = function (e, t) { try { "function" == typeof e ? e.apply(m, t) : e[1].apply(e[0], t) } catch (e) { } }, p._registerCallback = function (e, t) { t && (null == p._callbackList && (p._callbackList = {}), null == p._callbackList[e] && (p._callbackList[e] = []), p._callbackList[e].push(t)) }, p._callAllCallbacks = function (e, t) { if (null != p._callbackList) { var n = p._callbackList[e]; if (n) for (; 0 < n.length;)p._callCallback(n.shift(), t) } }, p._addQuerystringParam = function (e, t, n, i) { var r = encodeURIComponent(t) + "=" + encodeURIComponent(n), a = S.parseHash(e), o = S.hashlessUrl(e); if (-1 === o.indexOf("?")) return o + "?" + r + a; var s = o.split("?"), c = s[0] + "?", u = s[1]; return c + S.addQueryParamAtLocation(u, r, i) + a }, p._extractParamFromUri = function (e, t) { var n = new RegExp("[\\?&#]" + t + "=([^&#]*)").exec(e); if (n && n.length) return decodeURIComponent(n[1]) }, p._parseAdobeMcFromUrl = t(se.ADOBE_MC), p._parseAdobeMcSdidFromUrl = t(se.ADOBE_MC_SDID), p._attemptToPopulateSdidFromUrl = function (e) { var t = p._parseAdobeMcSdidFromUrl(e), n = 1e9; t && t.TS && (n = S.getTimestampInSeconds() - t.TS), t && t.SDID && t.MCORGID === r && n < p.sdidParamExpiry && (p._supplementalDataIDCurrent = t.SDID, p._supplementalDataIDCurrentConsumed.SDID_URL_PARAM = !0) }, p._attemptToPopulateIdsFromUrl = function () { var e, t = p._parseAdobeMcFromUrl(); if (t && t.TS) { var n = S.getTimestampInSeconds() - t.TS; if (Math.floor(n / 60) > se.ADOBE_MC_TTL_IN_MIN || t.MCORGID !== r) return; i((e = t)[y], p.setMarketingCloudVisitorID, y), p._setFieldExpire(_, -1), i(e[k], p.setAnalyticsVisitorID) } function i(e, t, n) { e && e.match(se.VALID_VISITOR_ID_REGEX) && (n === y && (f = !0), t(e)) } }, p._mergeServerState = function (e) { if (e) try { var t; i = e, (e = S.isObject(i) ? i : JSON.parse(i))[p.marketingCloudOrgID] && (t = e[p.marketingCloudOrgID], n = t.customerIDs, S.isObject(n) && p.setCustomerIDs(n), a(t.sdid)) } catch (e) { throw new Error("`serverState` has an invalid format.") } var n, i }, p._timeout = null, p._loadData = function (e, t, n, i) { t = p._addQuerystringParam(t, "d_fieldgroup", e, 1), i.url = p._addQuerystringParam(i.url, "d_fieldgroup", e, 1), i.corsUrl = p._addQuerystringParam(i.corsUrl, "d_fieldgroup", e, 1), x.fieldGroupObj[e] = !0, i === Object(i) && i.corsUrl && "XMLHttpRequest" === D.corsMetadata.corsType && D.fireCORS(i, n, e) }, p._clearTimeout = function (e) { null != p._timeout && p._timeout[e] && (clearTimeout(p._timeout[e]), p._timeout[e] = 0) }, p._settingsDigest = 0, p._getSettingsDigest = function () { var e; return p._settingsDigest || (e = p.version, p.audienceManagerServer && (e += "|" + p.audienceManagerServer), p.audienceManagerServerSecure && (e += "|" + p.audienceManagerServerSecure), p._settingsDigest = p._hash(e)), p._settingsDigest }, p._readVisitorDone = !1, p._readVisitor = function () { if (!p._readVisitorDone) { p._readVisitorDone = !0; var e, t, n, i, r, a, o = p._getSettingsDigest(), s = !1, c = p.cookieRead(p.cookieName), u = new Date; if (c || f || p.discardTrackingServerECID || (c = p.cookieRead(se.FIRST_PARTY_SERVER_COOKIE)), null == p._fields && (p._fields = {}), c && "T" !== c) for ((c = c.split("|"))[0].match(/^[\-0-9]+$/) && (parseInt(c[0], 10) !== o && (s = !0), c.shift()), c.length % 2 == 1 && c.pop(), e = 0; e < c.length; e += 2)n = (t = c[e].split("-"))[0], i = c[e + 1], a = 1 < t.length ? (r = parseInt(t[1], 10), 0 < t[1].indexOf("s")) : (r = 0, !1), s && ("MCCIDH" === n && (i = ""), 0 < r && (r = u.getTime() / 1e3 - 60)), n && i && (p._setField(n, i, 1), 0 < r && (p._fields["expire" + n] = r + (a ? "s" : ""), (u.getTime() >= 1e3 * r || a && !p.cookieRead(p.sessionCookieName)) && (p._fieldsExpired || (p._fieldsExpired = {}), p._fieldsExpired[n] = !0))); !p._getField(k) && S.isTrackingServerPopulated() && (c = p.cookieRead("s_vi")) && (1 < (c = c.split("|")).length && 0 <= c[0].indexOf("v1") && (0 <= (e = (i = c[1]).indexOf("[")) && (i = i.substring(0, e)), i && i.match(se.VALID_VISITOR_ID_REGEX) && p._setField(k, i))) } }, p._appendVersionTo = function (e) { var t = "vVersion|" + p.version, n = e ? p._getCookieVersion(e) : null; return n ? ie(n, p.version) && (e = e.replace(se.VERSION_REGEX, t)) : e += (e ? "|" : "") + t, e }, p._writeVisitor = function () { var e, t, n = p._getSettingsDigest(); for (e in p._fields) v(e) && p._fields[e] && "expire" !== e.substring(0, 6) && (t = p._fields[e], n += (n ? "|" : "") + e + (p._fields["expire" + e] ? "-" + p._fields["expire" + e] : "") + "|" + t); n = p._appendVersionTo(n), p.cookieWrite(p.cookieName, n, 1) }, p._getField = function (e, t) { return null == p._fields || !t && p._fieldsExpired && p._fieldsExpired[e] ? null : p._fields[e] }, p._setField = function (e, t, n) { null == p._fields && (p._fields = {}), p._fields[e] = t, n || p._writeVisitor() }, p._getFieldList = function (e, t) { var n = p._getField(e, t); return n ? n.split("*") : null }, p._setFieldList = function (e, t, n) { p._setField(e, t ? t.join("*") : "", n) }, p._getFieldMap = function (e, t) { var n = p._getFieldList(e, t); if (n) { for (var i = {}, r = 0; r < n.length; r += 2)i[n[r]] = n[r + 1]; return i } return null }, p._setFieldMap = function (e, t, n) { var i, r = null; if (t) for (i in r = [], t) v(i) && (r.push(i), r.push(t[i])); p._setFieldList(e, r, n) }, p._setFieldExpire = function (e, t, n) { var i = new Date; i.setTime(i.getTime() + 1e3 * t), null == p._fields && (p._fields = {}), p._fields["expire" + e] = Math.floor(i.getTime() / 1e3) + (n ? "s" : ""), t < 0 ? (p._fieldsExpired || (p._fieldsExpired = {}), p._fieldsExpired[e] = !0) : p._fieldsExpired && (p._fieldsExpired[e] = !1), n && (p.cookieRead(p.sessionCookieName) || p.cookieWrite(p.sessionCookieName, "1")) }, p._findVisitorID = function (e) { return e && ("object" === L(e) && (e = e.d_mid ? e.d_mid : e.visitorID ? e.visitorID : e.id ? e.id : e.uuid ? e.uuid : "" + e), e && "NOTARGET" === (e = e.toUpperCase()) && (e = I), e && (e === I || e.match(se.VALID_VISITOR_ID_REGEX)) || (e = "")), e }, p._setFields = function (e, t) { if (p._clearTimeout(e), null != p._loading && (p._loading[e] = !1), x.fieldGroupObj[e] && x.setState(e, !1), "MC" === e) { !0 !== x.isClientSideMarketingCloudVisitorID && (x.isClientSideMarketingCloudVisitorID = !1); var n = p._getField(y); if (!n || p.overwriteCrossDomainMCIDAndAID) { if (!(n = "object" === L(t) && t.mid ? t.mid : p._findVisitorID(t))) { if (p._use1stPartyMarketingCloudServer && !p.tried1stPartyMarketingCloudServer) return p.tried1stPartyMarketingCloudServer = !0, void p.getAnalyticsVisitorID(null, !1, !0); n = p._generateLocalMID() } p._setField(y, n) } n && n !== I || (n = ""), "object" === L(t) && ((t.d_region || t.dcs_region || t.d_blob || t.blob) && p._setFields(C, t), p._use1stPartyMarketingCloudServer && t.mid && p._setFields("A", { id: t.id })), p._callAllCallbacks(y, [n]) } var i, r, a, o, s, c, u, l; e === C && "object" === L(t) && (i = 604800, null != t.id_sync_ttl && t.id_sync_ttl && (i = parseInt(t.id_sync_ttl, 10)), r = O.getRegionAndCheckIfChanged(t, i), p._callAllCallbacks("MCAAMLH", [r]), a = p._getField(_), (t.d_blob || t.blob) && (a = (a = t.d_blob) || t.blob, p._setFieldExpire(_, i), p._setField(_, a)), a = a || "", p._callAllCallbacks(_, [a]), !t.error_msg && p._newCustomerIDsHash && p._setField("MCCIDH", p._newCustomerIDsHash)), "A" === e && ((o = p._getField(k)) && !p.overwriteCrossDomainMCIDAndAID || ((o = p._findVisitorID(t)) ? o !== I && p._setFieldExpire(_, -1) : o = I, p._setField(k, o)), o && o !== I || (o = ""), p._callAllCallbacks(k, [o])), p.idSyncDisableSyncs || p.disableIdSyncs ? O.idCallNotProcesssed = !0 : (O.idCallNotProcesssed = !1, (s = {}).ibs = t.ibs, s.subdomain = t.subdomain, O.processIDCallData(s)), t === Object(t) && (d() && p.isAllowed() && (u = p._getField("MCOPTOUT")), u = (c = Z.parseOptOut(t, u, I)).optOut, l = c.d_ottl, p._setFieldExpire("MCOPTOUT", l, !0), p._setField("MCOPTOUT", u), p._callAllCallbacks("MCOPTOUT", [u])) }, p._loading = null, p._getRemoteField = function (n, e, t, i, r) { var a, o = "", s = S.isFirstPartyAnalyticsVisitorIDCall(n); if (d() && p.isAllowed()) if (p._readVisitor(), !(!(o = p._getField(n, !0 === { MCAAMLH: !0, MCAAMB: !0 }[n])) || p._fieldsExpired && p._fieldsExpired[n]) || p.disableThirdPartyCalls && !s) o || (n === y ? (p._registerCallback(n, t), o = p._generateLocalMID(), p.setMarketingCloudVisitorID(o)) : n === k ? (p._registerCallback(n, t), o = "", p.setAnalyticsVisitorID(o)) : i = !(o = "")); else if (n === y || "MCOPTOUT" === n ? a = "MC" : "MCAAMLH" === n || n === _ ? a = C : n === k && (a = "A"), a) return !e || null != p._loading && p._loading[a] || (null == p._loading && (p._loading = {}), p._loading[a] = !0, p._loadData(a, e, function (e) { var t; p._getField(n) || (e && x.setState(a, !0), t = "", n === y ? t = p._generateLocalMID() : a === C && (t = { error_msg: "timeout" }), p._setFields(a, t)) }, r)), p._registerCallback(n, t), o || (e || p._setFields(a, { id: I }), ""); return n !== y && n !== k || o !== I || (i = !(o = "")), t && i && p._callCallback(t, [o]), o }, p._setMarketingCloudFields = function (e) { p._readVisitor(), p._setFields("MC", e) }, p._mapCustomerIDs = function (e) { p.getAudienceManagerBlob(e, !0) }, p._setAnalyticsFields = function (e) { p._readVisitor(), p._setFields("A", e) }, p._setAudienceManagerFields = function (e) { p._readVisitor(), p._setFields(C, e) }, p._getAudienceManagerURLData = function (e) { var t = p.audienceManagerServer, n = "", i = p._getField(y), r = p._getField(_, !0), a = p._getField(k), o = a && a !== I ? "&d_cid_ic=AVID%01" + encodeURIComponent(a) : ""; if (p.loadSSL && p.audienceManagerServerSecure && (t = p.audienceManagerServerSecure), t) { var s, c, u = p.getCustomerIDs(); if (u) for (s in u) v(s) && (c = u[s], o += "&d_cid_ic=" + encodeURIComponent(s) + "%01" + encodeURIComponent(c.id ? c.id : "") + (c.authState ? "%01" + c.authState : "")); e = e || "_setAudienceManagerFields"; var l = "http" + (p.loadSSL ? "s" : "") + "://" + t + "/id", d = "d_visid_ver=" + p.version + (g && -1 !== l.indexOf("demdex.net") ? "&gdpr=1&gdpr_force=1&gdpr_consent=" + g : "") + "&d_rtbd=json&d_ver=2" + (!i && p._use1stPartyMarketingCloudServer ? "&d_verify=1" : "") + "&d_orgid=" + encodeURIComponent(p.marketingCloudOrgID) + "&d_nsid=" + (p.idSyncContainerID || 0) + (i ? "&d_mid=" + encodeURIComponent(i) : "") + (p.idSyncDisable3rdPartySyncing || p.disableThirdPartyCookies ? "&d_coppa=true" : "") + (!0 === b ? "&d_coop_safe=1" : !1 === b ? "&d_coop_unsafe=1" : "") + (r ? "&d_blob=" + encodeURIComponent(r) : "") + o, f = ["s_c_il", p._in, e]; return { url: n = l + "?" + d + "&d_cb=s_c_il%5B" + p._in + "%5D." + e, corsUrl: l + "?" + d, callback: f } } return { url: n } }, p.appendVisitorIDsTo = function (e) { try { var t = [[y, p._getField(y)], [k, p._getField(k)], ["MCORGID", p.marketingCloudOrgID]]; return p._addQuerystringParam(e, se.ADOBE_MC, i(t)) } catch (t) { return e } }, p.appendSupplementalDataIDTo = function (e, t) { if (!(t = t || p.getSupplementalDataID(S.generateRandomString(), !0))) return e; try { var n = i([["SDID", t], ["MCORGID", p.marketingCloudOrgID]]); return p._addQuerystringParam(e, se.ADOBE_MC_SDID, n) } catch (t) { return e } }; var S = { parseHash: function (e) { var t = e.indexOf("#"); return 0 < t ? e.substr(t) : "" }, hashlessUrl: function (e) { var t = e.indexOf("#"); return 0 < t ? e.substr(0, t) : e }, addQueryParamAtLocation: function (e, t, n) { var i = e.split("&"); return n = null != n ? n : i.length, i.splice(n, 0, t), i.join("&") }, isFirstPartyAnalyticsVisitorIDCall: function (e, t, n) { return e === k && (t = t || p.trackingServer, n = n || p.trackingServerSecure, !("string" != typeof (i = p.loadSSL ? n : t) || !i.length) && i.indexOf("2o7.net") < 0 && i.indexOf("omtrdc.net") < 0); var i }, isObject: function (e) { return Boolean(e && e === Object(e)) }, removeCookie: function (e) { te.remove(e, { domain: p.cookieDomain }) }, isTrackingServerPopulated: function () { return !!p.trackingServer || !!p.trackingServerSecure }, getTimestampInSeconds: function () { return Math.round((new Date).getTime() / 1e3) }, parsePipeDelimetedKeyValues: function (e) { return e.split("|").reduce(function (e, t) { var n = t.split("="); return e[n[0]] = decodeURIComponent(n[1]), e }, {}) }, generateRandomString: function (e) { e = e || 5; for (var t = "", n = "abcdefghijklmnopqrstuvwxyz0123456789"; e--;)t += n[Math.floor(Math.random() * n.length)]; return t }, normalizeBoolean: function (e) { return "true" === e || "false" !== e && e }, parseBoolean: function (e) { return "true" === e || "false" !== e && null }, replaceMethodsWithFunction: function (e, t) { for (var n in e) e.hasOwnProperty(n) && "function" == typeof e[n] && (e[n] = t); return e } }; p._helpers = S; var T, E, A, O = (T = p, E = h, A = R.document, { THROTTLE_START: 3e4, MAX_SYNCS_LENGTH: 649, throttleTimerSet: !1, id: null, onPagePixels: [], iframeHost: null, getIframeHost: function (e) { if ("string" == typeof e) { var t = e.split("/"); return t[0] + "//" + t[2] } }, subdomain: null, url: null, getUrl: function () { var e, t = "http://fast.", n = "?d_nsid=" + T.idSyncContainerID + "#" + encodeURIComponent(A.location.origin); return this.subdomain || (this.subdomain = "nosubdomainreturned"), T.loadSSL && (t = T.idSyncSSLUseAkamai ? "https://fast." : "https://"), e = t + this.subdomain + ".demdex.net/dest5.html" + n, this.iframeHost = this.getIframeHost(e), this.id = "destination_publishing_iframe_" + this.subdomain + "_" + T.idSyncContainerID, e }, checkDPIframeSrc: function () { var e = "?d_nsid=" + T.idSyncContainerID + "#" + encodeURIComponent(A.location.href); "string" == typeof T.dpIframeSrc && T.dpIframeSrc.length && (this.id = "destination_publishing_iframe_" + (T._subdomain || this.subdomain || (new Date).getTime()) + "_" + T.idSyncContainerID, this.iframeHost = this.getIframeHost(T.dpIframeSrc), this.url = T.dpIframeSrc + e) }, idCallNotProcesssed: null, doAttachIframe: !1, startedAttachingIframe: !1, iframeHasLoaded: null, iframeIdChanged: null, newIframeCreated: null, originalIframeHasLoadedAlready: null, iframeLoadedCallbacks: [], regionChanged: !1, timesRegionChanged: 0, sendingMessages: !1, messages: [], messagesPosted: [], messagesReceived: [], messageSendingInterval: se.POST_MESSAGE_ENABLED ? null : 100, onPageDestinationsFired: [], jsonForComparison: [], jsonDuplicates: [], jsonWaiting: [], jsonProcessed: [], canSetThirdPartyCookies: !0, receivedThirdPartyCookiesNotification: !1, readyToAttachIframePreliminary: function () { return !(T.idSyncDisableSyncs || T.disableIdSyncs || T.idSyncDisable3rdPartySyncing || T.disableThirdPartyCookies || T.disableThirdPartyCalls) }, readyToAttachIframe: function () { return this.readyToAttachIframePreliminary() && (this.doAttachIframe || T._doAttachIframe) && (this.subdomain && "nosubdomainreturned" !== this.subdomain || T._subdomain) && this.url && !this.startedAttachingIframe }, attachIframe: function () { function e() { (i = A.createElement("iframe")).sandbox = "allow-scripts allow-same-origin", i.title = "Adobe ID Syncing iFrame", i.id = n.id, i.name = n.id + "_name", i.style.cssText = "display: none; width: 0; height: 0;", i.src = n.url, n.newIframeCreated = !0, t(), A.body.appendChild(i) } function t(e) { i.addEventListener("load", function () { i.className = "aamIframeLoaded", n.iframeHasLoaded = !0, n.fireIframeLoadedCallbacks(e), n.requestToProcess() }) } this.startedAttachingIframe = !0; var n = this, i = A.getElementById(this.id); i ? "IFRAME" !== i.nodeName ? (this.id += "_2", this.iframeIdChanged = !0, e()) : (this.newIframeCreated = !1, "aamIframeLoaded" !== i.className ? (this.originalIframeHasLoadedAlready = !1, t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")) : (this.originalIframeHasLoadedAlready = !0, this.iframeHasLoaded = !0, this.iframe = i, this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."), this.requestToProcess())) : e(), this.iframe = i }, fireIframeLoadedCallbacks: function (t) { this.iframeLoadedCallbacks.forEach(function (e) { "function" == typeof e && e({ message: t || "The destination publishing iframe was attached and loaded successfully." }) }), this.iframeLoadedCallbacks = [] }, requestToProcess: function (e) { function t() { r.jsonForComparison.push(e), r.jsonWaiting.push(e), r.processSyncOnPage(e) } var n, i, r = this; if (e === Object(e) && e.ibs) if (n = JSON.stringify(e.ibs || []), this.jsonForComparison.length) { for (var a, o = !1, s = 0, c = this.jsonForComparison.length; s < c; s++)if (a = this.jsonForComparison[s], n === JSON.stringify(a.ibs || [])) { o = !0; break } o ? this.jsonDuplicates.push(e) : t() } else t(); (this.receivedThirdPartyCookiesNotification || !se.POST_MESSAGE_ENABLED || this.iframeHasLoaded) && this.jsonWaiting.length && (i = this.jsonWaiting.shift(), this.process(i), this.requestToProcess()), T.idSyncDisableSyncs || T.disableIdSyncs || !this.iframeHasLoaded || !this.messages.length || this.sendingMessages || (this.throttleTimerSet || (this.throttleTimerSet = !0, setTimeout(function () { r.messageSendingInterval = se.POST_MESSAGE_ENABLED ? null : 150 }, this.THROTTLE_START)), this.sendingMessages = !0, this.sendMessages()) }, getRegionAndCheckIfChanged: function (e, t) { var n = T._getField("MCAAMLH"), i = e.d_region || e.dcs_region; return n ? i && (T._setFieldExpire("MCAAMLH", t), T._setField("MCAAMLH", i), parseInt(n, 10) !== i && (this.regionChanged = !0, this.timesRegionChanged++, T._setField("MCSYNCSOP", ""), T._setField("MCSYNCS", ""), n = i)) : (n = i) && (T._setFieldExpire("MCAAMLH", t), T._setField("MCAAMLH", n)), n = n || "" }, processSyncOnPage: function (e) { var t, n, i, r; if ((t = e.ibs) && t instanceof Array && (n = t.length)) for (i = 0; i < n; i++)(r = t[i]).syncOnPage && this.checkFirstPartyCookie(r, "", "syncOnPage") }, process: function (e) { var t, n, i, r, a, o = encodeURIComponent, s = !1; if ((t = e.ibs) && t instanceof Array && (n = t.length)) for (s = !0, i = 0; i < n; i++)r = t[i], a = [o("ibs"), o(r.id || ""), o(r.tag || ""), Z.encodeAndBuildRequest(r.url || [], ","), o(r.ttl || ""), "", "", r.fireURLSync ? "true" : "false"], r.syncOnPage || (this.canSetThirdPartyCookies ? this.addMessage(a.join("|")) : r.fireURLSync && this.checkFirstPartyCookie(r, a.join("|"))); s && this.jsonProcessed.push(e) }, checkFirstPartyCookie: function (e, t, n) { var i = "syncOnPage" === n, r = i ? "MCSYNCSOP" : "MCSYNCS"; T._readVisitor(); var a, o, s, c, u = T._getField(r), l = Math.ceil((new Date).getTime() / se.MILLIS_PER_DAY); u ? (a = u.split("*"), s = (o = this.pruneSyncData(a, e.id, l)).dataPresent, c = o.dataValid, s && c || this.fireSync(i, e, t, a, r, l)) : (a = [], this.fireSync(i, e, t, a, r, l)) }, pruneSyncData: function (e, t, n) { for (var i, r, a = !1, o = !1, s = 0; s < e.length; s++)i = e[s], r = parseInt(i.split("-")[1], 10), i.match("^" + t + "-") ? (a = !0, n < r ? o = !0 : (e.splice(s, 1), s--)) : r <= n && (e.splice(s, 1), s--); return { dataPresent: a, dataValid: o } }, manageSyncsSize: function (e) { if (e.join("*").length > this.MAX_SYNCS_LENGTH) for (e.sort(function (e, t) { return parseInt(e.split("-")[1], 10) - parseInt(t.split("-")[1], 10) }); e.join("*").length > this.MAX_SYNCS_LENGTH;)e.shift() }, fireSync: function (e, t, n, i, l, r) { var d = this; if (e) { if ("img" === t.tag) for (var a, o, s = t.url, c = T.loadSSL ? "https:" : "http:", u = 0, f = s.length; u < f; u++) { a = s[u], o = /^\/\//.test(a); var p = new Image; p.addEventListener("load", function (o, s, c, u) { return function () { d.onPagePixels[o] = null, T._readVisitor(); var e = T._getField(l), t = []; if (e) for (var n, i, r = 0, a = (i = e.split("*")).length; r < a; r++)(n = i[r]).match("^" + s.id + "-") || t.push(n); d.setSyncTrackingData(t, s, c, u) } }(this.onPagePixels.length, t, l, r)), p.src = (o ? c : "") + a, this.onPagePixels.push(p) } } else this.addMessage(n), this.setSyncTrackingData(i, t, l, r) }, addMessage: function (e) { var t = encodeURIComponent(T._enableErrorReporting ? "---destpub-debug---" : "---destpub---"); this.messages.push((se.POST_MESSAGE_ENABLED ? "" : t) + e) }, setSyncTrackingData: function (e, t, n, i) { e.push(t.id + "-" + (i + Math.ceil(t.ttl / 60 / 24))), this.manageSyncsSize(e), T._setField(n, e.join("*")) }, sendMessages: function () { var e, t = this, n = "", i = encodeURIComponent; this.regionChanged && (n = i("---destpub-clear-dextp---"), this.regionChanged = !1), this.messages.length ? se.POST_MESSAGE_ENABLED ? (e = n + i("---destpub-combined---") + this.messages.join("%01"), this.postMessage(e), this.messages = [], this.sendingMessages = !1) : (e = this.messages.shift(), this.postMessage(n + e), setTimeout(function () { t.sendMessages() }, this.messageSendingInterval)) : this.sendingMessages = !1 }, postMessage: function (e) { ae(e, this.url, this.iframe.contentWindow), this.messagesPosted.push(e) }, receiveMessage: function (e) { var t, n = /^---destpub-to-parent---/; "string" == typeof e && n.test(e) && ("canSetThirdPartyCookies" === (t = e.replace(n, "").split("|"))[0] && (this.canSetThirdPartyCookies = "true" === t[1], this.receivedThirdPartyCookiesNotification = !0, this.requestToProcess()), this.messagesReceived.push(e)) }, processIDCallData: function (e) { (null == this.url || e.subdomain && "nosubdomainreturned" === this.subdomain) && ("string" == typeof T._subdomain && T._subdomain.length ? this.subdomain = T._subdomain : this.subdomain = e.subdomain || "", this.url = this.getUrl()), e.ibs instanceof Array && e.ibs.length && (this.doAttachIframe = !0), this.readyToAttachIframe() && (T.idSyncAttachIframeOnWindowLoad ? !E.windowLoaded && "complete" !== A.readyState && "loaded" !== A.readyState || this.attachIframe() : this.attachIframeASAP()), "function" == typeof T.idSyncIDCallResult ? T.idSyncIDCallResult(e) : this.requestToProcess(e), "function" == typeof T.idSyncAfterIDCallResult && T.idSyncAfterIDCallResult(e) }, canMakeSyncIDCall: function (e, t) { return T._forceSyncIDCall || !e || t - e > se.DAYS_BETWEEN_SYNC_ID_CALLS }, attachIframeASAP: function () { var t = this; !function e() { t.startedAttachingIframe || (A.body ? t.attachIframe() : setTimeout(e, 30)) }() } }); p._destinationPublishing = O, p.timeoutMetricsLog = []; var M, P, x = { isClientSideMarketingCloudVisitorID: null, MCIDCallTimedOut: null, AnalyticsIDCallTimedOut: null, AAMIDCallTimedOut: null, fieldGroupObj: {}, setState: function (e, t) { switch (e) { case "MC": !1 === t ? !0 !== this.MCIDCallTimedOut && (this.MCIDCallTimedOut = !1) : this.MCIDCallTimedOut = t; break; case "A": !1 === t ? !0 !== this.AnalyticsIDCallTimedOut && (this.AnalyticsIDCallTimedOut = !1) : this.AnalyticsIDCallTimedOut = t; break; case C: !1 === t ? !0 !== this.AAMIDCallTimedOut && (this.AAMIDCallTimedOut = !1) : this.AAMIDCallTimedOut = t } } }; p.isClientSideMarketingCloudVisitorID = function () { return x.isClientSideMarketingCloudVisitorID }, p.MCIDCallTimedOut = function () { return x.MCIDCallTimedOut }, p.AnalyticsIDCallTimedOut = function () { return x.AnalyticsIDCallTimedOut }, p.AAMIDCallTimedOut = function () { return x.AAMIDCallTimedOut }, p.idSyncGetOnPageSyncInfo = function () { return p._readVisitor(), p._getField("MCSYNCSOP") }, p.idSyncByURL = function (e) { if (!p.isOptedOut()) { var t = (c = (s = e || {}).minutesToLive, u = "", (p.idSyncDisableSyncs || p.disableIdSyncs) && (u = u || "Error: id syncs have been disabled"), "string" == typeof s.dpid && s.dpid.length || (u = u || "Error: config.dpid is empty"), "string" == typeof s.url && s.url.length || (u = u || "Error: config.url is empty"), void 0 === c ? c = 20160 : (c = parseInt(c, 10), (isNaN(c) || c <= 0) && (u = u || "Error: config.minutesToLive needs to be a positive number")), { error: u, ttl: c }); if (t.error) return t.error; var n = e.url, i = encodeURIComponent, r = O, n = n.replace(/^https:/, "").replace(/^http:/, ""), a = Z.encodeAndBuildRequest(["", e.dpid, e.dpuuid || ""], ","), o = ["ibs", i(e.dpid), "img", i(n), t.ttl, "", a]; return r.addMessage(o.join("|")), r.requestToProcess(), "Successfully queued" } var s, c, u }, p.idSyncByDataSource = function (e) { if (!p.isOptedOut()) return e === Object(e) && "string" == typeof e.dpuuid && e.dpuuid.length ? (e.url = "//dpm.demdex.net/ibs:dpid=" + e.dpid + "&dpuuid=" + e.dpuuid, p.idSyncByURL(e)) : "Error: config or config.dpuuid is empty" }, P = O, (M = p).publishDestinations = function (e) { var t = arguments[1], n = arguments[2]; try { n = "function" == typeof n ? n : e.callback } catch (e) { n = function () { } } var i = P; if (i.readyToAttachIframePreliminary()) { if ("string" == typeof e) { if (!e.length) return void n({ error: "subdomain is not a populated string." }); if (!(t instanceof Array && t.length)) return void n({ error: "messages is not a populated array." }); var r = !1; if (t.forEach(function (e) { "string" == typeof e && e.length && (i.addMessage(e), r = !0) }), !r) return void n({ error: "None of the messages are populated strings." }) } else { if (!Z.isObject(e)) return void n({ error: "Invalid parameters passed." }); var a = e; if ("string" != typeof (e = a.subdomain) || !e.length) return void n({ error: "config.subdomain is not a populated string." }); var o = a.urlDestinations; if (!(o instanceof Array && o.length)) return void n({ error: "config.urlDestinations is not a populated array." }); var s = []; o.forEach(function (e) { Z.isObject(e) && (e.hideReferrer ? e.message && i.addMessage(e.message) : s.push(e)) }), function n() { s.length && setTimeout(function () { var e = new Image, t = s.shift(); e.src = t.url, i.onPageDestinationsFired.push(t), n() }, 100) }() } i.iframe ? (n({ message: "The destination publishing iframe is already attached and loaded." }), i.requestToProcess()) : !M.subdomain && M._getField("MCMID") ? (i.subdomain = e, i.doAttachIframe = !0, i.url = i.getUrl(), i.readyToAttachIframe() ? (i.iframeLoadedCallbacks.push(function (e) { n({ message: "Attempted to attach and load the destination publishing iframe through this API call. Result: " + (e.message || "no result") }) }), i.attachIframe()) : n({ error: "Encountered a problem in attempting to attach and load the destination publishing iframe through this API call." })) : i.iframeLoadedCallbacks.push(function (e) { n({ message: "Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: " + (e.message || "no result") }) }) } else n({ error: "The destination publishing iframe is disabled in the Visitor library." }) }, p._getCookieVersion = function (e) { e = e || p.cookieRead(p.cookieName); var t = se.VERSION_REGEX.exec(e); return t && 1 < t.length ? t[1] : null }, p._resetAmcvCookie = function (e) { var t = p._getCookieVersion(); t && !ne(t, e) || S.removeCookie(p.cookieName) }, p.setAsCoopSafe = function () { b = !0 }, p.setAsCoopUnsafe = function () { b = !1 }, function () { if (p.configs = Object.create(null), S.isObject(n)) for (var e in n) v(e) && (p[e] = n[e], p.configs[e] = n[e]) }(), [["getMarketingCloudVisitorID"], ["setCustomerIDs", void 0], ["getAnalyticsVisitorID"], ["getAudienceManagerLocationHint"], ["getLocationHint"], ["getAudienceManagerBlob"]].forEach(function (e) { var t = e[0], n = 2 === e.length ? e[1] : "", i = p[t]; p[t] = function (e) { return d() && p.isAllowed() ? i.apply(p, arguments) : ("function" == typeof e && p._callCallback(e, [n]), n) } }), p.init = function () { if (p.configs.doesOptInApply && (!u.optIn.isComplete || !d())) return u.optIn.fetchPermissions(s, !0); var e, t; S.isObject(n) ? (p.idSyncContainerID = p.idSyncContainerID || 0, b = "boolean" == typeof p.isCoopSafe ? p.isCoopSafe : S.parseBoolean(p.isCoopSafe), p.resetBeforeVersion && p._resetAmcvCookie(p.resetBeforeVersion), p._attemptToPopulateIdsFromUrl(), p._attemptToPopulateSdidFromUrl(), p._readVisitor(), e = p._getField("MCIDTS"), t = Math.ceil((new Date).getTime() / se.MILLIS_PER_DAY), p.idSyncDisableSyncs || p.disableIdSyncs || !O.canMakeSyncIDCall(e, t) || (p._setFieldExpire(_, -1), p._setField("MCIDTS", t)), p.getMarketingCloudVisitorID(), p.getAudienceManagerLocationHint(), p.getAudienceManagerBlob(), p._mergeServerState(p.serverState)) : (p._attemptToPopulateIdsFromUrl(), p._attemptToPopulateSdidFromUrl()), function () { if (!p.idSyncDisableSyncs && !p.disableIdSyncs) { O.checkDPIframeSrc(); m.addEventListener("load", function () { var e; h.windowLoaded = !0, (e = O).readyToAttachIframe() && e.attachIframe() }); try { oe(function (e) { O.receiveMessage(e.data) }, O.iframeHost) } catch (e) { } } }(), p.whitelistIframeDomains && se.POST_MESSAGE_ENABLED && (p.whitelistIframeDomains = p.whitelistIframeDomains instanceof Array ? p.whitelistIframeDomains : [p.whitelistIframeDomains], p.whitelistIframeDomains.forEach(function (e) { var t = new N(r, e), n = j(p, t); oe(n, e) })) } } Te.config = ue; var Ee = R.Visitor = Te, Ae = we.OptIn, Oe = we.IabPlugin; return Ee.getInstance = function (i, e) { if (!i) throw new Error("Visitor requires Adobe Marketing Cloud Org ID."); i.indexOf("@") < 0 && (i += "@AdobeOrg"); var t = function () { var e = R.s_c_il; if (e) for (var t = 0; t < e.length; t++) { var n = e[t]; if (n && "Visitor" === n._c && n.marketingCloudOrgID === i) return n } }(); if (t) return t; var r, n = function (r) { if (Z.isObject(r)) return Object.keys(r).filter(function (e) { return "" !== r[e] }).reduce(function (e, t) { var n = "doesOptInApply" !== t ? r[t] : ue.normalizeConfig(r[t]), i = Z.normalizeBoolean(n); return e[t] = i, e }, Object.create(null)) }(e); r = n || {}, R.adobe.optIn = R.adobe.optIn || function () { var e = Z.pluck(r, ["doesOptInApply", "previousPermissions", "preOptInApprovals", "isOptInStorageEnabled", "optInStorageExpiry", "isIabContext"]), t = r.optInCookieDomain || r.cookieDomain; t = (t = t || U()) === window.location.hostname ? "" : t, e.optInCookieDomain = t; var n, i = new Ae(e, { cookies: te }); return e.isIabContext && (n = new Oe(window.__cmp), i.registerPlugin(n)), i }(); var a = i.split("").reverse().join(""), o = new Ee(i, null, a); Z.isObject(n) && n.cookieDomain && (o.cookieDomain = n.cookieDomain), R.s_c_il.splice(--R.s_c_in, 1); var s = Z.getIeVersion(); if ("number" == typeof s && s < 10) return o._helpers.replaceMethodsWithFunction(o, function () { }); var c, u = function () { try { return R.self !== R.parent } catch (e) { return 1 } }() && ((c = o).cookieWrite("TEST_AMCV_COOKIE", "T", 1), "T" !== c.cookieRead("TEST_AMCV_COOKIE") || (c._helpers.removeCookie("TEST_AMCV_COOKIE"), 0)) && R.parent ? new d(i, n, o, R.parent) : new Ee(i, n, a), o = null; return u.init(), u }, R.addEventListener ? R.addEventListener("load", Me) : R.attachEvent && R.attachEvent("onload", Me), Ee.codeLoadEnd = (new Date).getTime(); function Me() { Ee.windowLoaded = !0 } }()
    }).call(this, n(0))
}, function (t, e, n) { "use strict"; (function (e) { t.exports = { adobeAnalyticsAccount: "expediaglobaldev", travelPixel: { url: "https://b.travel-assets.com/travel-pixel-js/1.0.0/app.js", domain: (e.location || {}).hostname, environment: "dev" }, TRACK_API_URL: "/api/uisprime/track", TRACK_API_URL_CROSS_SITE: "https://wwwexpediacom.trunk.sb.karmalab.net/api/uisprime/track" } }).call(this, n(0)) }, function (t, e, n) { "use strict"; (function (e) { t.exports = { adobeAnalyticsAccount: "expediaglobaldev", travelPixel: { url: "https://b.travel-assets.com/travel-pixel-js/1.0.0/app.js", domain: (e.location || {}).hostname, environment: "trunk" }, TRACK_API_URL: "/api/uisprime/track", TRACK_API_URL_CROSS_SITE: "https://wwwexpediacom.trunk.sb.karmalab.net/api/uisprime/track" } }).call(this, n(0)) }, function (t, e, n) { "use strict"; (function (e) { t.exports = { adobeAnalyticsAccount: "expediaglobal", travelPixel: { url: "https://b.travel-assets.com/travel-pixel-js/1.0.0/app.js", domain: (e.location || {}).hostname, environment: "prod" }, TRACK_API_URL: "/api/uisprime/track", TRACK_API_URL_CROSS_SITE: "https://www.expedia.com/api/uisprime/track" } }).call(this, n(0)) }, function (t, e, n) { "use strict"; (function (e) { t.exports = { adobeAnalyticsAccount: "expediaglobaldev", travelPixel: { url: "https://b.travel-assets.com/travel-pixel-js/1.0.0/app.js", domain: (e.location || {}).hostname, environment: "int" }, TRACK_API_URL: "/api/uisprime/track", TRACK_API_URL_CROSS_SITE: "https://wwwexpediacom.trunk.sb.karmalab.net/api/uisprime/track" } }).call(this, n(0)) }, function (h, e, v) { "use strict"; (function (a) { var u = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, e = function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e }; function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var l = v(21), r = v(29), o = v(7), d = v(31), n = v(3), f = "view", p = "click", t = (e(s, [{ key: "mergePayloads", value: function (e) { var t = this; this.adobeMappedData = {}, this.tealiumUtagData = "undefined" != typeof window && window.utag_data || {}, this.tagCommanderData = "undefined" != typeof window && window.tc_vars || {}; var n = void 0; e.forEach(function (e) { e.adobeMappedData && (!n && e.adobeMappedData.prop10 && (n = e.adobeMappedData.prop10), o.mergeAdobePayloads(t.adobeMappedData, e.adobeMappedData)), e.tealiumUtagData && o.mergeObjectsDeep(t.tealiumUtagData, e.tealiumUtagData), e.tagCommanderData && o.mergeObjectsDeep(t.tagCommanderData, e.tagCommanderData) }), n && (this.adobeMappedData.prop10 = n) } }, { key: "publish", value: function (e) { var t = this; try { this.mergePayloads(e), r.getAllSchemas(this.context.overridenMicroMessages, e).then(function (e) { 0 !== e.schema.length && t.trackPrime(e.schema, f), e.adobeData && (o.mergeAdobePayloads(t.adobeMappedData, e.adobeData), t.context.isAutomaticAdobePageViewDisabled || m({ adobeMappedData: t.adobeMappedData, eventType: f, isDebugEnabled: t.isDebugEnabled, tealiumUtagData: t.tealiumUtagData, context: t.context })) }); var n = void 0, n = this.context.isPwa ? this.context.tealiumContext ? this.context.tealiumContext.tealiumAccountDetailsPWA : this.context.tealiumAccountDetailsPWA : this.context.tealiumContext ? this.context.tealiumContext.tealiumAccountDetails : this.context.tealiumAccountDetails; !function (e, t, n) { try { new l.TagCommanderPublisher({ config: e, isDebugEnabled: n }).publish(t) } catch (e) { console.error("[PlatformAnalyticsPrime] TagCommander publishing failed because of: " + e) } }(this.context.tc_context || this.tealiumUtagData.tc_context, this.context.tc_vars || this.tealiumUtagData.tc_vars, this.isDebugEnabled), c(this.tealiumUtagData, n, this.isDebugEnabled) } catch (e) { console.error("[PlatformAnalyticsPrime] Error while publishing view event : " + e) } return !0 } }, { key: "trackEvent", value: function (e, t) { var n = 1 < arguments.length && void 0 !== t ? t : p; try { this.trackPrime(e, n) } catch (e) { console.error("[PlatformAnalyticsPrime] Error while publishing " + n + " event: " + e) } return !0 } }, { key: "trackPrime", value: function (e, n) { var i = this, t = l.UisPublisher, r = this.context && this.context.applicationName, a = this.context && this.context.traceIdOfTheView, o = this.context && this.context.additionalHeaders; d.addPageIdentity(e, this.context), d.addParentView(e, this.context), d.addVisitEvents(e, this.context); var s = { applicationName: r, traceIdOfTheView: a, microMessages: e }, c = ((e[0] || {}).messageContent || {}).referrerId || this.context.pageName; new t({ isDebugEnabled: this.isDebugEnabled, eventType: n, label: c, trackApiUrl: g(this.context.isCrossSite), additionalHeaders: o }).publish(s).then(function (e) { var t = JSON.parse(e.response); "string" == typeof t && (t = JSON.parse(t)), "object" !== u(t.adobeMappedData) && console.error("[trackPrime] error: the response from trackPrime endpoint does not contain the expected data"), n === f && t.adobeMappedData && i.context.isAutomaticAdobePageViewDisabled && ("undefined" != typeof window && (t.adobeMappedData.pageURL = window.location.href), m({ adobeMappedData: t.adobeMappedData, eventType: f, isDebugEnabled: i.isDebugEnabled, tealiumUtagData: t.tealiumUtagData, context: i.context })), n === p && t.adobeMappedData && m({ adobeMappedData: t.adobeMappedData, eventType: p, isDebugEnabled: i.isDebugEnabled }) }) } }, { key: "trackPageViewAndPublishToAdobe", value: function (e) { var n = this, t = this.context.pageName, i = new l.UisPublisher({ isDebugEnabled: this.isDebugEnabled, eventType: f, label: t, trackApiUrl: g(this.context.isCrossSite) }), r = { applicationName: this.context && this.context.applicationName, traceIdOfTheView: this.context && this.context.traceIdOfTheView, microMessages: e.microMessages }; return i.publish(r).then(function (e) { var t = JSON.parse(e.response); return "string" == typeof t && (t = JSON.parse(t)), "object" !== u(t.adobeMappedData) && console.error("[trackPrime] error: the response from trackPrime endpoint does not contain the expected data"), t.adobeMappedData && m({ adobeMappedData: t.adobeMappedData, eventType: f, isDebugEnabled: n.isDebugEnabled }), a.resolve(e) }) } }]), s); function s() { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : { context: [], tealiumContext: [], isDebugEnabled: !1 }; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, s), this.context = e.context, this.tealiumContext = e.tealiumContext, this.isDebugEnabled = e.isDebugEnabled } function g(e) { var t = n.getConfiguration(); return e ? t.TRACK_API_URL_CROSS_SITE : t.TRACK_API_URL } function c(e, t, n) { try { if ("object" !== (void 0 === e ? "undefined" : u(e))) return void console.error("[TealiumPublisher] error: trying to publish something that is not an object (type was: " + (void 0 === e ? "undefined" : u(e)) + ")"); 0 < Object.keys(e).length && new l.TealiumPublisher({ tealiumAccountDetails: t, isDebugEnabled: n }).publish(e) } catch (e) { console.error("[PlatformAnalyticsPrime] Tealium publishing failed because of: " + e) } } function m(e) { try { if ("object" !== u(e.adobeMappedData)) return void console.error("[AdobePublisher] error: trying to publish something that is not an object (type was: " + u(e.adobeMappedData) + ")"); 0 < Object.keys(e.adobeMappedData).length && new l.AdobePublisher({ eventType: e.eventType, isDebugEnabled: e.isDebugEnabled, context: e.context }).publish(e.adobeMappedData, e.tealiumUtagData) } catch (e) { console.error("Adobe publishing failed because of : " + e.stack) } } h.exports = { UisPrime: t, publishTealiumData: c, getTrackApiUrl: g } }).call(this, v(1)) }, function (e, t, n) { "use strict"; var i = n(22), r = n(23), a = n(27), o = n(28); e.exports = { UisPublisher: i, AdobePublisher: r, TealiumPublisher: a, TagCommanderPublisher: o } }, function (s, e, c) { "use strict"; (function (t, n) { var e = function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e }; function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var m = c(2).toLogStore, r = "/api/uisprime/track"; var a = (e(o, [{ key: "publish", value: function (e) { return this.requestBody = e, function r(a, o, s, c, u, l, d) { var f = "x-hcom-origin-id", p = "x-page-id", g = /https:\/\/\w+.(staging1-)?(hotels|hoteis|hoteles).(com|cn)\/*/; return new t(function (t, n) { var e = { method: "POST", body: o }; s.onload = function () { var e; 200 <= s.status && s.status < 300 ? (m({ status: "successful", url: a, sentData: o }, "uis", u, l, c), t(s)) : 405 === s.status && s.responseURL && s.responseURL.match(g) ? ((e = new XMLHttpRequest).withCredentials = !0, t(r(s.responseURL, o, e, c, u, l, d))) : (m({ status: "FAILED - Http " + s.status, url: a, sentData: o }, "uis", u, l, c), n(new Error("UIS (" + a + ")replied with HTTP status code: " + s.status))) }, s.onerror = function () { return n(new Error("Could not connect to ", a)) }, s.ontimeout = function () { return n(new Error("Request timed out.")) }, s.open(e.method, a, !0), s.setRequestHeader("Content-type", "text/plain"), d[f] && s.setRequestHeader(f, d[f]), d[p] && s.setRequestHeader(p, d[p]); var i = JSON.stringify(e.body); s.send(i) }) }(this.trackApiUrl, this.requestBody, this.xmlHttpRequest, this.isDebugEnabled, this.eventType, this.label, this.additionalHeaders) } }]), o); function o() { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : { isDebugEnabled: !1, eventType: "", label: "", additionalHeaders: {} }; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, o), this.trackApiUrl = e.trackApiUrl || r, this.requestBody = {}, this.isDebugEnabled = "boolean" == typeof e.isDebugEnabled && e.isDebugEnabled, this.eventType = e.eventType, this.label = e.label, void 0 !== n.uisDebugXmlHttpRequest ? this.xmlHttpRequest = n.uisDebugXmlHttpRequest : this.xmlHttpRequest = new XMLHttpRequest, this.additionalHeaders = e.additionalHeaders || {} } s.exports = a }).call(this, c(1), c(0)) }, function (l, e, d) { "use strict"; (function (n) { var e = function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e }; function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var r = d(5), a = d(6), o = d(2).toLogStore, s = d(25), c = "view", t = (e(u, [{ key: "publish", value: function (i, r) { var a = this; return this.readyToPublish.then(function () { var e, t = ""; if (a.eventType === c) { if (t = ((r || {}).pageInfo || {}).pageName, a.s) try { a.s.t(i) } catch (e) { o("Something went wrong with minified appMeasurement lib at this.s.t(data)", "adobe-publisher", a.eventType, t, !0) } if (a.travelPixel) try { a.travelPixel.publish(r) } catch (e) { o("Something went wrong with Travel-pixel library", "travel-pixel", a.eventType, t, !0) } } else { i.linkTrackVars = Object.keys(i).toString(), (e = i).events ? e.linkTrackEvents = e.events.replace(/=[^,]*/g, "") : e.linkTrackEvents = "None"; var n = i.linkName || "Custom Event", t = n.replace(/\s/g, "-"); a.s.tl(!0, "o", n, i) } if (o({ eventType: a.eventType, sentData: i }, "adobe", a.eventType, t, a.isDebugEnabled), a.s) try { a.s.clearVars() } catch (e) { o("Something went wrong with minified appMeasurement lib at this.s.clearVars", "adobe-publisher", a.eventType, t, !0) } }) } }]), u); function u() { var t = this, e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : { eventType: c, isDebugEnabled: !1, context: context }; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, u), this.isDebugEnabled = e.isDebugEnabled, this.eventType = e.eventType, this.executeXdid = !0, this.readyToPublish = n.all([r.load(), a.load()]).then(function (e) { t.s = e[1], t.s.visitor = e[0] }), this.executeXdid && (this.travelPixel = new s(this.isDebugEnabled)) } l.exports = t }).call(this, d(1)) }, function (e, t) { function n(e) { var t = this; t.s = e; var n = window; n.s_c_in || (n.s_c_il = [], n.s_c_in = 0), t._il = n.s_c_il, t._in = n.s_c_in, t._il[t._in] = t, n.s_c_in++, t._c = "s_m", t.setup = function (e) { n.DIL && e && (e.disableDefaultRequest = !0, e.disableScriptAttachment = !0, e.disableCORS = !0, e.secureDataCollection = !1, t.instance = n.DIL.create(e), t.tools = n.DIL.tools) }, t.isReady = function () { return !!t.instance }, t.getEventCallConfigParams = function () { return t.instance && t.instance.api && t.instance.api.getEventCallConfigParams ? t.instance.api.getEventCallConfigParams() : {} }, t.passData = function (e) { t.instance && t.instance.api && t.instance.api.passData && t.instance.api.passData(e) } } function r(e) { if (a[e]) return a[e].exports; var t = a[e] = { i: e, l: !1, exports: {} }; return i[e].call(t.exports, t, t.exports, r), t.l = !0, t.exports } var i, a; function u(e) { var f = this; f.version = "2.6.0"; var d = window; d.s_c_in || (d.s_c_il = [], d.s_c_in = 0), f._il = d.s_c_il, f._in = d.s_c_in, f._il[f._in] = f, d.s_c_in++, f._c = "s_c"; var t, n, i, r, p = (p = d.AppMeasurement.Pb) || null, g = d; try { for (t = g.parent, n = g.location; t && t.location && n && "" + t.location != "" + n && g.location && "" + t.location != "" + g.location && t.location.host == n.host;)t = (g = t).parent } catch (e) { } f.F = function (e) { try { console.log(e) } catch (e) { } }, f.Ma = function (e) { return "" + parseInt(e) == "" + e }, f.replace = function (e, t, n) { return !e || e.indexOf(t) < 0 ? e : e.split(t).join(n) }, f.escape = function (e) { var t, n; if (!e) return e; for (e = encodeURIComponent(e), t = 0; t < 7; t++)n = "+~!*()'".substring(t, t + 1), 0 <= e.indexOf(n) && (e = f.replace(e, n, "%" + n.charCodeAt(0).toString(16).toUpperCase())); return e }, f.unescape = function (e) { if (!e) return e; e = 0 <= e.indexOf("+") ? f.replace(e, "+", " ") : e; try { return decodeURIComponent(e) } catch (e) { } return unescape(e) }, f.wb = function () { var e, t = d.location.hostname, n = (n = f.fpCookieDomainPeriods) || f.cookieDomainPeriods; if (t && !f.Ea && !/^[0-9.]+$/.test(t) && (n = 2 < (n = n ? parseInt(n) : 2) ? n : 2, 0 <= (e = t.lastIndexOf(".")))) { for (; 0 <= e && 1 < n;)e = t.lastIndexOf(".", e - 1), n--; f.Ea = 0 < e ? t.substring(e) : t } return f.Ea }, f.c_r = f.cookieRead = function (e) { e = f.escape(e); var t = " " + f.d.cookie, n = t.indexOf(" " + e + "="), i = n < 0 ? n : t.indexOf(";", n); return "[[B]]" != (e = n < 0 ? "" : f.unescape(t.substring(n + 2 + e.length, i < 0 ? t.length : i))) ? e : "" }, f.c_w = f.cookieWrite = function (e, t, n) { var i, r = f.wb(), a = f.cookieLifetime; return t = "" + t, a = a ? ("" + a).toUpperCase() : "", n && "SESSION" != a && "NONE" != a && ((i = "" != t ? parseInt(a || 0) : -60) ? (n = new Date).setTime(n.getTime() + 1e3 * i) : 1 == n && (i = (n = new Date).getYear(), n.setYear(i + 5 + (i < 1900 ? 1900 : 0)))), e && "NONE" != a ? (f.d.cookie = f.escape(e) + "=" + f.escape("" != t ? t : "[[B]]") + "; path=/;" + (n && "SESSION" != a ? " expires=" + n.toUTCString() + ";" : "") + (r ? " domain=" + r + ";" : ""), f.cookieRead(e) == t) : 0 }, f.L = [], f.ia = function (e, t, n) { if (f.Fa) return 0; f.maxDelay || (f.maxDelay = 250); var i = 0, r = (new Date).getTime() + f.maxDelay, a = f.d.visibilityState, o = ["webkitvisibilitychange", "visibilitychange"]; if ((a = a || f.d.webkitVisibilityState) && "prerender" == a) { if (!f.ja) for (f.ja = 1, n = 0; n < o.length; n++)f.d.addEventListener(o[n], function () { "visible" == (f.d.visibilityState || f.d.webkitVisibilityState) && (f.ja = 0, f.delayReady()) }); i = 1, r = 0 } else n || f.p("_d") && (i = 1); return i && (f.L.push({ m: e, a: t, t: r }), f.ja || setTimeout(f.delayReady, f.maxDelay)), i }, f.delayReady = function () { var e, t = (new Date).getTime(), n = 0; for (f.p("_d") ? n = 1 : f.xa(); 0 < f.L.length;) { if (e = f.L.shift(), n && !e.t && e.t > t) { f.L.unshift(e), setTimeout(f.delayReady, parseInt(f.maxDelay / 2)); break } f.Fa = 1, f[e.m].apply(f, e.a), f.Fa = 0 } }, f.setAccount = f.sa = function (e) { var t, n; if (!f.ia("setAccount", arguments)) if (f.account = e, f.allAccounts) for (t = f.allAccounts.concat(e.split(",")), f.allAccounts = [], t.sort(), n = 0; n < t.length; n++)0 != n && t[n - 1] == t[n] || f.allAccounts.push(t[n]); else f.allAccounts = e.split(",") }, f.foreachVar = function (e, t) { var n, i, r, a = "", o = i = ""; for (f.lightProfileID ? (n = f.P, (a = f.lightTrackVars) && (a = "," + a + "," + f.na.join(",") + ",")) : (n = f.g, (f.pe || f.linkType) && (a = f.linkTrackVars, i = f.linkTrackEvents, f.pe && (o = f.pe.substring(0, 1).toUpperCase() + f.pe.substring(1), f[o] && (a = f[o].Nb, i = f[o].Mb))), a = a && "," + a + "," + f.H.join(",") + ",", i && a && (a += ",events,")), t = t && "," + t + ",", i = 0; i < n.length; i++)o = n[i], (r = f[o]) && (!a || 0 <= a.indexOf("," + o + ",")) && (!t || 0 <= t.indexOf("," + o + ",")) && e(o, r) }, f.r = function (e, t, n, i, r) { var a, o, s, c, u = "", l = 0; if ("contextData" == e && (e = "c"), t) { for (a in t) if (!(Object.prototype[a] || r && a.substring(0, r.length) != r) && t[a] && (!n || 0 <= n.indexOf("," + (i ? i + "." : "") + a + ","))) { if (s = !1, l) for (o = 0; o < l.length; o++)a.substring(0, l[o].length) == l[o] && (s = !0); if (!s && ("" == u && (u += "&" + e + "."), o = t[a], r && (a = a.substring(r.length)), 0 < a.length)) if (0 < (s = a.indexOf("."))) o = a.substring(0, s), (l = l || []).push(s = (r || "") + o + "."), u += f.r(o, t, n, i, s); else if ("boolean" == typeof o && (o = o ? "true" : "false"), o) { if ("retrieveLightData" == i && r.indexOf(".contextData.") < 0) switch (s = a.substring(0, 4), c = a.substring(4), a) { case "transactionID": a = "xact"; break; case "channel": a = "ch"; break; case "campaign": a = "v0"; break; default: f.Ma(c) && ("prop" == s ? a = "c" + c : "eVar" == s ? a = "v" + c : "list" == s ? a = "l" + c : "hier" == s && (a = "h" + c, o = o.substring(0, 255))) }u += "&" + f.escape(a) + "=" + f.escape(o) } } "" != u && (u += "&." + e) } return u }, f.usePostbacks = 0, f.zb = function () { var e, t, n, i, r, a, o, s, c = "", u = "", l = "", d = i = ""; if (f.lightProfileID ? (e = f.P, (u = f.lightTrackVars) && (u = "," + u + "," + f.na.join(",") + ",")) : (e = f.g, (f.pe || f.linkType) && (u = f.linkTrackVars, l = f.linkTrackEvents, f.pe && (i = f.pe.substring(0, 1).toUpperCase() + f.pe.substring(1), f[i] && (u = f[i].Nb, l = f[i].Mb))), u = u && "," + u + "," + f.H.join(",") + ",", l && (l = "," + l + ",", u && (u += ",events,")), f.events2 && (d += ("" != d ? "," : "") + f.events2)), f.visitor && f.visitor.getCustomerIDs) { if (i = p, r = f.visitor.getCustomerIDs()) for (t in r) Object.prototype[t] || "object" == typeof (n = r[t]) && (i = i || {}, n.id && (i[t + ".id"] = n.id), n.authState && (i[t + ".as"] = n.authState)); i && (c += f.r("cid", i)) } for (f.AudienceManagement && f.AudienceManagement.isReady() && (c += f.r("d", f.AudienceManagement.getEventCallConfigParams())), t = 0; t < e.length; t++) { if (i = e[t], r = f[i], n = i.substring(0, 4), a = i.substring(4), r || ("events" == i && d ? (r = d, d = "") : "marketingCloudOrgID" == i && f.visitor && (r = f.visitor.marketingCloudOrgID)), r && (!u || 0 <= u.indexOf("," + i + ","))) { switch (i) { case "customerPerspective": i = "cp"; break; case "marketingCloudOrgID": i = "mcorgid"; break; case "supplementalDataID": i = "sdid"; break; case "timestamp": i = "ts"; break; case "dynamicVariablePrefix": i = "D"; break; case "visitorID": i = "vid"; break; case "marketingCloudVisitorID": i = "mid"; break; case "analyticsVisitorID": i = "aid"; break; case "audienceManagerLocationHint": i = "aamlh"; break; case "audienceManagerBlob": i = "aamb"; break; case "authState": i = "as"; break; case "pageURL": i = "g", 255 < r.length && (f.pageURLRest = r.substring(255), r = r.substring(0, 255)); break; case "pageURLRest": i = "-g"; break; case "referrer": i = "r"; break; case "vmk": case "visitorMigrationKey": i = "vmt"; break; case "visitorMigrationServer": i = "vmf", f.ssl && f.visitorMigrationServerSecure && (r = ""); break; case "visitorMigrationServerSecure": i = "vmf", !f.ssl && f.visitorMigrationServer && (r = ""); break; case "charSet": i = "ce"; break; case "visitorNamespace": i = "ns"; break; case "cookieDomainPeriods": i = "cdp"; break; case "cookieLifetime": i = "cl"; break; case "variableProvider": i = "vvp"; break; case "currencyCode": i = "cc"; break; case "channel": i = "ch"; break; case "transactionID": i = "xact"; break; case "campaign": i = "v0"; break; case "latitude": i = "lat"; break; case "longitude": i = "lon"; break; case "resolution": i = "s"; break; case "colorDepth": i = "c"; break; case "javascriptVersion": i = "j"; break; case "javaEnabled": i = "v"; break; case "cookiesEnabled": i = "k"; break; case "browserWidth": i = "bw"; break; case "browserHeight": i = "bh"; break; case "connectionType": i = "ct"; break; case "homepage": i = "hp"; break; case "events": if (d && (r += ("" != r ? "," : "") + d), l) for (a = r.split(","), r = "", n = 0; n < a.length; n++)0 <= (s = (o = a[n]).indexOf("=")) && (o = o.substring(0, s)), 0 <= (s = o.indexOf(":")) && (o = o.substring(0, s)), 0 <= l.indexOf("," + o + ",") && (r += (r ? "," : "") + a[n]); break; case "events2": r = ""; break; case "contextData": c += f.r("c", f[i], u, i), r = ""; break; case "lightProfileID": i = "mtp"; break; case "lightStoreForSeconds": i = "mtss", f.lightProfileID || (r = ""); break; case "lightIncrementBy": i = "mti", f.lightProfileID || (r = ""); break; case "retrieveLightProfiles": i = "mtsr"; break; case "deleteLightProfiles": i = "mtsd"; break; case "retrieveLightData": f.retrieveLightProfiles && (c += f.r("mts", f[i], u, i)), r = ""; break; default: f.Ma(a) && ("prop" == n ? i = "c" + a : "eVar" == n ? i = "v" + a : "list" == n ? i = "l" + a : "hier" == n && (i = "h" + a, r = r.substring(0, 255))) }r && (c += "&" + i + "=" + ("pev" != i.substring(0, 3) ? f.escape(r) : r)) } "pev3" == i && f.e && (c += f.e) } return c }, f.D = function (e) { var t = e.tagName; return "undefined" != "" + e.Sb || "undefined" != "" + e.Ib && "HTML" != ("" + e.Ib).toUpperCase() ? "" : ("SHAPE" == (t = t && t.toUpperCase ? t.toUpperCase() : "") && (t = ""), t && (("INPUT" == t || "BUTTON" == t) && e.type && e.type.toUpperCase ? t = e.type.toUpperCase() : !t && e.href && (t = "A")), t) }, f.Ia = function (e) { var t = d.location, n = e.href ? e.href : "", i = n.indexOf(":"), r = n.indexOf("?"), a = n.indexOf("/"); return n && (i < 0 || 0 <= r && r < i || 0 <= a && a < i) && (r = e.protocol && 1 < e.protocol.length ? e.protocol : t.protocol ? t.protocol : "", i = t.pathname.lastIndexOf("/"), n = (r ? r + "//" : "") + (e.host ? e.host : t.host ? t.host : "") + ("/" != n.substring(0, 1) ? t.pathname.substring(0, i < 0 ? 0 : i) + "/" : "") + n), n }, f.M = function (e) { var t, n, i = f.D(e), r = "", a = 0; return i && (t = e.protocol, n = e.onclick, !e.href || "A" != i && "AREA" != i || n && t && !(t.toLowerCase().indexOf("javascript") < 0) ? n ? (r = f.replace(f.replace(f.replace(f.replace("" + n, "\r", ""), "\n", ""), "\t", ""), " ", ""), a = 2) : "INPUT" == i || "SUBMIT" == i ? (e.value ? r = e.value : e.innerText ? r = e.innerText : e.textContent && (r = e.textContent), a = 3) : "IMAGE" == i && e.src && (r = e.src) : r = f.Ia(e), r) ? { id: r.substring(0, 100), type: a } : 0 }, f.Qb = function (e) { for (var t = f.D(e), n = f.M(e); e && !n && "BODY" != t;)(e = e.parentElement ? e.parentElement : e.parentNode) && (t = f.D(e), n = f.M(e)); return n && "BODY" != t || (e = 0), e && (0 <= (t = e.onclick ? "" + e.onclick : "").indexOf(".tl(") || 0 <= t.indexOf(".trackLink(")) && (e = 0), e }, f.Hb = function () { var e, t, n, i, r, a = f.linkObject, o = f.linkType, s = f.linkURL; if (f.oa = 1, a || (f.oa = 0, a = f.clickObject), a) { for (e = f.D(a), t = f.M(a); a && !t && "BODY" != e;)(a = a.parentElement ? a.parentElement : a.parentNode) && (e = f.D(a), t = f.M(a)); t && "BODY" != e || (a = 0), !a || f.linkObject || (0 <= (r = a.onclick ? "" + a.onclick : "").indexOf(".tl(") || 0 <= r.indexOf(".trackLink(")) && (a = 0) } else f.oa = 1; if (!s && a && (s = f.Ia(a)), s && !f.linkLeaveQueryString && (0 <= (n = s.indexOf("?")) && (s = s.substring(0, n))), !o && s) { var c, u = 0, l = 0; if (f.trackDownloadLinks && f.linkDownloadFileTypes) for (n = (r = s.toLowerCase()).indexOf("?"), i = r.indexOf("#"), 0 <= n && !(0 <= i && i < n) || (n = i), 0 <= n && (r = r.substring(0, n)), n = f.linkDownloadFileTypes.toLowerCase().split(","), i = 0; i < n.length; i++)(c = n[i]) && r.substring(r.length - (c.length + 1)) == "." + c && (o = "d"); if (f.trackExternalLinks && !o && (r = s.toLowerCase(), f.La(r) && (f.linkInternalFilters || (f.linkInternalFilters = d.location.hostname), n = 0, f.linkExternalFilters ? (n = f.linkExternalFilters.toLowerCase().split(","), u = 1) : f.linkInternalFilters && (n = f.linkInternalFilters.toLowerCase().split(",")), n))) { for (i = 0; i < n.length; i++)c = n[i], 0 <= r.indexOf(c) && (l = 1); l ? u && (o = "e") : u || (o = "e") } } f.linkObject = a, f.linkURL = s, f.linkType = o, (f.trackClickMap || f.trackInlineStats) && (f.e = "", a && (o = f.pageName, s = 1, a = a.sourceIndex, o || (o = f.pageURL, s = 0), d.s_objectID && (t.id = d.s_objectID, a = t.type = 1), o && t && t.id && e && (f.e = "&pid=" + f.escape(o.substring(0, 255)) + (s ? "&pidt=" + s : "") + "&oid=" + f.escape(t.id.substring(0, 100)) + (t.type ? "&oidt=" + t.type : "") + "&ot=" + e + (a ? "&oi=" + a : "")))) }, f.Ab = function () { var e = f.oa, t = f.linkType, n = f.linkURL, i = f.linkName; if (t && (n || i) && ("d" != (t = t.toLowerCase()) && "e" != t && (t = "o"), f.pe = "lnk_" + t, f.pev1 = n ? f.escape(n) : "", f.pev2 = i ? f.escape(i) : "", e = 1), f.abort && (e = 0), f.trackClickMap || f.trackInlineStats || f.ActivityMap) { var r, a, o, t = {}, n = 0, s = (c = f.cookieRead("s_sq")) ? c.split("&") : 0, c = 0; if (s) for (r = 0; r < s.length; r++)a = s[r].split("="), i = f.unescape(a[0]).split(","), t[a = f.unescape(a[1])] = i; for (o in i = f.account.split(","), r = {}, f.contextData) o && !Object.prototype[o] && "a.activitymap." == o.substring(0, 14) && (r[o] = f.contextData[o], f.contextData[o] = ""); if (f.e = f.r("c", r) + (f.e ? f.e : ""), e || f.e) { for (a in e && !f.e && (c = 1), t) if (!Object.prototype[a]) for (o = 0; o < i.length; o++)for (c && ((s = t[a].join(",")) == f.account && (f.e += ("&" != a.charAt(0) ? "&" : "") + a, t[a] = [], n = 1)), r = 0; r < t[a].length; r++)(s = t[a][r]) == i[o] && (c && (f.e += "&u=" + f.escape(s) + ("&" != a.charAt(0) ? "&" : "") + a + "&u=0"), t[a].splice(r, 1), n = 1); if (e || (n = 1), n) { for (a in c = "", r = 2, !e && f.e && (c = f.escape(i.join(",")) + "=" + f.escape(f.e), r = 1), t) !Object.prototype[a] && 0 < r && 0 < t[a].length && (c += (c ? "&" : "") + f.escape(t[a].join(",")) + "=" + f.escape(a), r--); f.cookieWrite("s_sq", c) } } } return e }, f.Bb = function () { if (!f.Lb) { var e, t, n, i, r = new Date, a = g.location, o = t = e = "", s = "1.2", c = f.cookieWrite("s_cc", "true", 0) ? "Y" : "N", u = "", l = ""; if (r.setUTCDate && (s = "1.3", (0).toPrecision && (s = "1.5", (r = []).forEach))) { s = "1.6", t = 0, e = {}; try { (t = new Iterator(e)).next && (s = "1.7", r.reduce && ((s = "1.8").trim && (s = "1.8.1", Date.parse && (s = "1.8.2", Object.create && (s = "1.8.5"))))) } catch (e) { } } e = screen.width + "x" + screen.height, o = navigator.javaEnabled() ? "Y" : "N", t = screen.pixelDepth ? screen.pixelDepth : screen.colorDepth, n = f.w.innerWidth ? f.w.innerWidth : f.d.documentElement.offsetWidth, i = f.w.innerHeight ? f.w.innerHeight : f.d.documentElement.offsetHeight; try { f.b.addBehavior("#default#homePage"), u = f.b.Rb(a) ? "Y" : "N" } catch (e) { } try { f.b.addBehavior("#default#clientCaps"), l = f.b.connectionType } catch (e) { } f.resolution = e, f.colorDepth = t, f.javascriptVersion = s, f.javaEnabled = o, f.cookiesEnabled = c, f.browserWidth = n, f.browserHeight = i, f.connectionType = l, f.homepage = u, f.Lb = 1 } }, f.Q = {}, f.loadModule = function (t, e) { var n = f.Q[t]; if (!n) { n = d["AppMeasurement_Module_" + t] ? new d["AppMeasurement_Module_" + t](f) : {}, (f.Q[t] = f[t] = n).eb = function () { return n.ib }, n.jb = function (e) { (n.ib = e) && (f[t + "_onLoad"] = e, f.ia(t + "_onLoad", [f, n], 1) || e(f, n)) }; try { Object.defineProperty ? Object.defineProperty(n, "onLoad", { get: n.eb, set: n.jb }) : n._olc = 1 } catch (e) { n._olc = 1 } } e && (f[t + "_onLoad"] = e, f.ia(t + "_onLoad", [f, n], 1) || e(f, n)) }, f.p = function (e) { var t, n; for (t in f.Q) if (!Object.prototype[t] && (n = f.Q[t]) && (n._olc && n.onLoad && (n._olc = 0, n.onLoad(f, n)), n[e] && n[e]())) return 1; return 0 }, f.Db = function () { var e = Math.floor(1e13 * Math.random()), t = f.visitorSampling, n = f.visitorSamplingGroup, n = "s_vsn_" + (f.visitorNamespace ? f.visitorNamespace : f.account) + (n ? "_" + n : ""), i = f.cookieRead(n); if (t) { if (t *= 100, !(i = i && parseInt(i))) { if (!f.cookieWrite(n, e)) return 0; i = e } if (t < i % 1e4) return 0 } return 1 }, f.R = function (e, t) { for (var n, i, r, a, o, s = 0; s < 2; s++)for (n = 0 < s ? f.Aa : f.g, i = 0; i < n.length; i++)if ((a = e[r = n[i]]) || e["!" + r]) { if (!t && ("contextData" == r || "retrieveLightData" == r) && f[r]) for (o in f[r]) a[o] || (a[o] = f[r][o]); f[r] = a } }, f.Va = function (e, t) { for (var n, i, r, a = 0; a < 2; a++)for (n = 0 < a ? f.Aa : f.g, i = 0; i < n.length; i++)e[r = n[i]] = f[r], t || e[r] || (e["!" + r] = 1) }, f.vb = function (e) { var t, n, i, r, a, o, s = 0, c = "", u = ""; if (e && 255 < e.length && (0 < (n = (t = "" + e).indexOf("?")) && (o = t.substring(n + 1), i = 0, "http://" == (r = (t = t.substring(0, n)).toLowerCase()).substring(0, 7) ? i += 7 : "https://" == r.substring(0, 8) && (i += 8), 0 < (n = r.indexOf("/", i)) && (r = r.substring(i, n), a = t.substring(n), t = t.substring(0, n), 0 <= r.indexOf("google") ? s = ",q,ie,start,search_key,word,kw,cd," : 0 <= r.indexOf("yahoo.co") && (s = ",p,ei,"), s && o)))) { if ((e = o.split("&")) && 1 < e.length) { for (i = 0; i < e.length; i++)0 < (n = (r = e[i]).indexOf("=")) && 0 <= s.indexOf("," + r.substring(0, n) + ",") ? c += (c ? "&" : "") + r : u += (u ? "&" : "") + r; c && u ? o = c + "&" + u : u = "" } e = t + (0 < (n = 253 - (o.length - u.length) - t.length) ? a.substring(0, n) : "") + "?" + o } return e }, f.ab = function (e) { var t = f.d.visibilityState, n = ["webkitvisibilitychange", "visibilitychange"]; if ((t = t || f.d.webkitVisibilityState) && "prerender" == t) { if (e) for (t = 0; t < n.length; t++)f.d.addEventListener(n[t], function () { "visible" == (f.d.visibilityState || f.d.webkitVisibilityState) && e() }); return !1 } return !0 }, f.ea = !1, f.J = !1, f.lb = function () { f.J = !0, f.j() }, f.ca = !1, f.V = !1, f.hb = function (e) { f.marketingCloudVisitorID = e, f.V = !0, f.j() }, f.fa = !1, f.W = !1, f.mb = function (e) { f.visitorOptedOut = e, f.W = !0, f.j() }, f.Z = !1, f.S = !1, f.Xa = function (e) { f.analyticsVisitorID = e, f.S = !0, f.j() }, f.ba = !1, f.U = !1, f.Za = function (e) { f.audienceManagerLocationHint = e, f.U = !0, f.j() }, f.aa = !1, f.T = !1, f.Ya = function (e) { f.audienceManagerBlob = e, f.T = !0, f.j() }, f.$a = function (e) { return f.maxDelay || (f.maxDelay = 250), !f.p("_d") || (e && setTimeout(function () { e() }, f.maxDelay), !1) }, f.da = !1, f.I = !1, f.xa = function () { f.I = !0, f.j() }, f.isReadyToTrack = function () { var e, t, n, i = !0, r = f.visitor; return f.ea || f.J || (f.ab(f.lb) ? f.J = !0 : f.ea = !0), !(f.ea && !f.J) && (r && r.isAllowed() && (f.ca || f.marketingCloudVisitorID || !r.getMarketingCloudVisitorID || (f.ca = !0, f.marketingCloudVisitorID = r.getMarketingCloudVisitorID([f, f.hb]), f.marketingCloudVisitorID && (f.V = !0)), f.fa || f.visitorOptedOut || !r.isOptedOut || (f.fa = !0, f.visitorOptedOut = r.isOptedOut([f, f.mb]), f.visitorOptedOut != p && (f.W = !0)), f.Z || f.analyticsVisitorID || !r.getAnalyticsVisitorID || (f.Z = !0, f.analyticsVisitorID = r.getAnalyticsVisitorID([f, f.Xa]), f.analyticsVisitorID && (f.S = !0)), f.ba || f.audienceManagerLocationHint || !r.getAudienceManagerLocationHint || (f.ba = !0, f.audienceManagerLocationHint = r.getAudienceManagerLocationHint([f, f.Za]), f.audienceManagerLocationHint && (f.U = !0)), f.aa || f.audienceManagerBlob || !r.getAudienceManagerBlob || (f.aa = !0, f.audienceManagerBlob = r.getAudienceManagerBlob([f, f.Ya]), f.audienceManagerBlob && (f.T = !0)), i = f.ca && !f.V && !f.marketingCloudVisitorID, r = f.Z && !f.S && !f.analyticsVisitorID, e = f.ba && !f.U && !f.audienceManagerLocationHint, t = f.aa && !f.T && !f.audienceManagerBlob, n = f.fa && !f.W, i = !(i || r || e || t || n)), f.da || f.I || (f.$a(f.xa) ? f.I = !0 : f.da = !0), f.da && !f.I && (i = !1), i) }, f.o = p, f.u = 0, f.callbackWhenReadyToTrack = function (e, t, n) { var i = {}; i.qb = e, i.pb = t, i.nb = n, f.o == p && (f.o = []), f.o.push(i), 0 == f.u && (f.u = setInterval(f.j, 100)) }, f.j = function () { var e; if (f.isReadyToTrack() && (f.kb(), f.o != p)) for (; 0 < f.o.length;)(e = f.o.shift()).pb.apply(e.qb, e.nb) }, f.kb = function () { f.u && (clearInterval(f.u), f.u = 0) }, f.fb = function (e) { var t, n, i, r = p; if (f.isReadyToTrack()) return !1; if (t = [], e != p) for (n in r = {}, e) r[n] = e[n]; return i = {}, f.Va(i, !0), t.push(r), t.push(i), f.callbackWhenReadyToTrack(f, f.track, t), !0 }, f.xb = function () { var e = f.cookieRead("s_fid"), t = "", n = "", i = 8, r = 4; if (!e || e.indexOf("-") < 0) { for (e = 0; e < 16; e++)i = Math.floor(Math.random() * i), t += "0123456789ABCDEF".substring(i, i + 1), i = Math.floor(Math.random() * r), n += "0123456789ABCDEF".substring(i, i + 1), i = r = 16; e = t + "-" + n } return f.cookieWrite("s_fid", e, 1) || (e = 0), e }, f.t = f.track = function (e, t) { var n, i = new Date, r = "s" + Math.floor(i.getTime() / 108e5) % 10 + Math.floor(1e13 * Math.random()), a = i.getYear(), a = "t=" + f.escape(i.getDate() + "/" + i.getMonth() + "/" + (a < 1900 ? a + 1900 : a) + " " + i.getHours() + ":" + i.getMinutes() + ":" + i.getSeconds() + " " + i.getDay() + " " + i.getTimezoneOffset()); f.visitor && f.visitor.getAuthState && (f.authState = f.visitor.getAuthState()), f.p("_s"), f.fb(e) || (t && f.R(t), e && (n = {}, f.Va(n, 0), f.R(e)), f.Db() && !f.visitorOptedOut && (f.analyticsVisitorID || f.marketingCloudVisitorID || (f.fid = f.xb()), f.Hb(), f.usePlugins && f.doPlugins && f.doPlugins(f), f.account && (f.abort || (f.trackOffline && !f.timestamp && (f.timestamp = Math.floor(i.getTime() / 1e3)), i = d.location, f.pageURL || (f.pageURL = i.href ? i.href : i), f.referrer || f.Wa || (i = f.Util.getQueryParam("adobe_mc_ref", null, null, !0), f.referrer = i || void 0 === i ? void 0 === i ? "" : i : g.document.referrer), f.Wa = 1, f.referrer = f.vb(f.referrer), f.p("_g")), f.Ab() && !f.abort && (f.visitor && !f.supplementalDataID && f.visitor.getSupplementalDataID && (f.supplementalDataID = f.visitor.getSupplementalDataID("AppMeasurement:" + f._in, !f.expectSupplementalData)), f.Bb(), a += f.zb(), f.Gb(r, a), f.p("_t"), f.referrer = ""))), e && f.R(n, 1)), f.abort = f.supplementalDataID = f.timestamp = f.pageURLRest = f.linkObject = f.clickObject = f.linkURL = f.linkName = f.linkType = d.s_objectID = f.pe = f.pev1 = f.pev2 = f.pev3 = f.e = f.lightProfileID = 0 }, f.za = [], f.registerPreTrackCallback = function (e) { for (var t = [], n = 1; n < arguments.length; n++)t.push(arguments[n]); "function" == typeof e ? f.za.push([e, t]) : f.debugTracking && f.F("DEBUG: Non function type passed to registerPreTrackCallback") }, f.cb = function (e) { f.wa(f.za, e) }, f.ya = [], f.registerPostTrackCallback = function (e) { for (var t = [], n = 1; n < arguments.length; n++)t.push(arguments[n]); "function" == typeof e ? f.ya.push([e, t]) : f.debugTracking && f.F("DEBUG: Non function type passed to registerPostTrackCallback") }, f.bb = function (e) { f.wa(f.ya, e) }, f.wa = function (e, t) { if ("object" == typeof e) for (var n = 0; n < e.length; n++) { var i = e[n][0], r = e[n][1]; if (r.unshift(t), "function" == typeof i) try { i.apply(null, r) } catch (e) { f.debugTracking && f.F(e.message) } } }, f.tl = f.trackLink = function (e, t, n, i, r) { return f.linkObject = e, f.linkType = t, f.linkName = n, r && (f.l = e, f.A = r), f.track(i) }, f.trackLight = function (e, t, n, i) { return f.lightProfileID = e, f.lightStoreForSeconds = t, f.lightIncrementBy = n, f.track(i) }, f.clearVars = function () { for (var e, t = 0; t < f.g.length; t++)"prop" != (e = f.g[t]).substring(0, 4) && "eVar" != e.substring(0, 4) && "hier" != e.substring(0, 4) && "list" != e.substring(0, 4) && "channel" != e && "events" != e && "eventList" != e && "products" != e && "productList" != e && "purchaseID" != e && "transactionID" != e && "state" != e && "zip" != e && "campaign" != e || (f[e] = void 0) }, f.tagContainerMarker = "", f.Gb = function (e, t) { var n = f.trackingServer, i = "", r = f.dc, a = "sc.", o = f.visitorNamespace; n ? f.trackingServerSecure && f.ssl && (n = f.trackingServerSecure) : (o || (0 <= (n = (o = f.account).indexOf(",")) && (o = o.substring(0, n)), o = o.replace(/[^A-Za-z0-9]/g, "")), i = i || "2o7.net", r = r ? ("" + r).toLowerCase() : "d1", "2o7.net" == i && ("d1" == r ? r = "112" : "d2" == r && (r = "122"), a = ""), n = o + "." + r + "." + a + i), i = f.ssl ? "https://" : "http://", r = f.AudienceManagement && f.AudienceManagement.isReady() || 0 != f.usePostbacks, i += n + "/b/ss/" + f.account + "/" + (f.mobile ? "5." : "") + (r ? "10" : "1") + "/JS-" + f.version + (f.Kb ? "T" : "") + (f.tagContainerMarker ? "-" + f.tagContainerMarker : "") + "/" + e + "?AQB=1&ndh=1&pf=1&" + (r ? "callback=s_c_il[" + f._in + "].doPostbacks&et=1&" : "") + t + "&AQE=1", f.cb(i), f.tb(i), f.ka() }, f.Ua = /{(%?)(.*?)(%?)}/, f.Ob = RegExp(f.Ua.source, "g"), f.ub = function (e) { if ("object" == typeof e.dests) for (var t = 0; t < e.dests.length; ++t) { var n = e.dests[t]; if ("string" == typeof n.c && "aa." == n.id.substr(0, 3)) for (var i = n.c.match(f.Ob), r = 0; r < i.length; ++r) { var a = i[r], o = a.match(f.Ua), s = ""; "%" == o[1] && "timezone_offset" == o[2] ? s = (new Date).getTimezoneOffset() : "%" == o[1] && "timestampz" == o[2] && (s = f.yb()), n.c = n.c.replace(a, f.escape(s)) } } }, f.yb = function () { var e = new Date, t = new Date(6e4 * Math.abs(e.getTimezoneOffset())); return f.k(4, e.getFullYear()) + "-" + f.k(2, e.getMonth() + 1) + "-" + f.k(2, e.getDate()) + "T" + f.k(2, e.getHours()) + ":" + f.k(2, e.getMinutes()) + ":" + f.k(2, e.getSeconds()) + (0 < e.getTimezoneOffset() ? "-" : "+") + f.k(2, t.getUTCHours()) + ":" + f.k(2, t.getUTCMinutes()) }, f.k = function (e, t) { return (Array(e + 1).join(0) + t).slice(-e) }, f.ta = {}, f.doPostbacks = function (e) { if ("object" == typeof e) if (f.ub(e), "object" == typeof f.AudienceManagement && "function" == typeof f.AudienceManagement.isReady && f.AudienceManagement.isReady() && "function" == typeof f.AudienceManagement.passData) f.AudienceManagement.passData(e); else if ("object" == typeof e && "object" == typeof e.dests) for (var t = 0; t < e.dests.length; ++t) { var n = e.dests[t]; "object" == typeof n && "string" == typeof n.c && "string" == typeof n.id && "aa." == n.id.substr(0, 3) && (f.ta[n.id] = new Image, f.ta[n.id].alt = "", f.ta[n.id].src = n.c) } }, f.tb = function (e) { f.i || f.Cb(), f.i.push(e), f.ma = f.C(), f.Sa() }, f.Cb = function () { f.i = f.Eb(), f.i || (f.i = []) }, f.Eb = function () { var e, t; if (f.ra()) { try { (t = d.localStorage.getItem(f.pa())) && (e = d.JSON.parse(t)) } catch (e) { } return e } }, f.ra = function () { var e = !0; return f.trackOffline && f.offlineFilename && d.localStorage && d.JSON || (e = !1), e }, f.Ja = function () { var e = 0; return f.i && (e = f.i.length), f.q && e++, e }, f.ka = function () { var e; f.q && (f.B && f.B.complete && f.B.G && f.B.va(), f.q) || (f.Ka = p, f.qa ? (f.ma > f.O && f.Qa(f.i), f.ua(500)) : 0 < (e = f.ob()) ? f.ua(e) : (e = f.Ga()) && (f.q = 1, f.Fb(e), f.Jb(e))) }, f.ua = function (e) { f.Ka || (e = e || 0, f.Ka = setTimeout(f.ka, e)) }, f.ob = function () { var e; return !f.trackOffline || f.offlineThrottleDelay <= 0 ? 0 : (e = f.C() - f.Pa, f.offlineThrottleDelay < e ? 0 : f.offlineThrottleDelay - e) }, f.Ga = function () { if (0 < f.i.length) return f.i.shift() }, f.Fb = function (e) { if (f.debugTracking) { var t, n = "AppMeasurement Debug: " + e; for (e = e.split("&"), t = 0; t < e.length; t++)n += "\n\t" + f.unescape(e[t]); f.F(n) } }, f.gb = function () { return f.marketingCloudVisitorID || f.analyticsVisitorID }, f.Y = !1; try { i = JSON.parse('{"x":"y"}') } catch (e) { i = null } for (i && "y" == i.x ? (f.Y = !0, f.X = function (e) { return JSON.parse(e) }) : d.$ && d.$.parseJSON ? (f.X = function (e) { return d.$.parseJSON(e) }, f.Y = !0) : f.X = function () { return null }, f.Jb = function (e) { var t, n; if (f.gb() && ("undefined" != typeof XMLHttpRequest && ("withCredentials" in (t = new XMLHttpRequest) ? n = 1 : t = 0), t || "undefined" == typeof XDomainRequest || (t = new XDomainRequest, n = 2), t && (f.AudienceManagement && f.AudienceManagement.isReady() || 0 != f.usePostbacks) && (f.Y ? t.Ba = !0 : t = 0)), !t && f.d.createElement && (0 != f.usePostbacks || f.AudienceManagement && f.AudienceManagement.isReady()) && (t = f.d.createElement("SCRIPT")) && "async" in t && ((r = (r = f.d.getElementsByTagName("HEAD")) && r[0] ? r[0] : f.d.body) ? (t.type = "text/javascript", t.setAttribute("async", "async"), n = 3) : t = 0), t || ((t = new Image).alt = "", t.abort || void 0 === d.InstallTrigger || (t.abort = function () { t.src = p })), t.Da = function () { try { t.G && (clearTimeout(t.G), t.G = 0) } catch (e) { } }, t.onload = t.va = function () { if (f.bb(e), t.Da(), f.sb(), f.ga(), f.q = 0, f.ka(), t.Ba) { t.Ba = !1; try { f.doPostbacks(f.X(t.responseText)) } catch (e) { } } }, t.onabort = t.onerror = t.Ha = function () { t.Da(), (f.trackOffline || f.qa) && f.q && f.i.unshift(f.rb), f.q = 0, f.ma > f.O && f.Qa(f.i), f.ga(), f.ua(500) }, t.onreadystatechange = function () { 4 == t.readyState && (200 == t.status ? t.va() : t.Ha()) }, f.Pa = f.C(), 1 == n || 2 == n) { var i = e.indexOf("?"), r = e.substring(0, i); i = (i = e.substring(i + 1)).replace(/&callback=[a-zA-Z0-9_.\[\]]+/, ""), 1 == n ? (t.open("POST", r, !0), t.send(i)) : 2 == n && (t.open("POST", r), t.send(i)) } else if (t.src = e, 3 == n) { if (f.Na) try { r.removeChild(f.Na) } catch (e) { } r.firstChild ? r.insertBefore(t, r.firstChild) : r.appendChild(t), f.Na = f.B } t.G = setTimeout(function () { t.G && (t.complete ? t.va() : (f.trackOffline && t.abort && t.abort(), t.Ha())) }, 5e3), f.rb = e, f.B = d["s_i_" + f.replace(f.account, ",", "_")] = t, (f.useForcedLinkTracking && f.K || f.A) && (f.forcedLinkTrackingTimeout || (f.forcedLinkTrackingTimeout = 250), f.ha = setTimeout(f.ga, f.forcedLinkTrackingTimeout)) }, f.sb = function () { if (f.ra() && !(f.Oa > f.O)) try { d.localStorage.removeItem(f.pa()), f.Oa = f.C() } catch (e) { } }, f.Qa = function (e) { if (f.ra()) { f.Sa(); try { d.localStorage.setItem(f.pa(), d.JSON.stringify(e)), f.O = f.C() } catch (e) { } } }, f.Sa = function () { if (f.trackOffline) for ((!f.offlineLimit || f.offlineLimit <= 0) && (f.offlineLimit = 10); f.i.length > f.offlineLimit;)f.Ga() }, f.forceOffline = function () { f.qa = !0 }, f.forceOnline = function () { f.qa = !1 }, f.pa = function () { return f.offlineFilename + "-" + f.visitorNamespace + f.account }, f.C = function () { return (new Date).getTime() }, f.La = function (e) { return 0 != (e = e.toLowerCase()).indexOf("#") && 0 != e.indexOf("about:") && 0 != e.indexOf("opera:") && 0 != e.indexOf("javascript:") }, f.setTagContainer = function (e) { var t, n, i; for (f.Kb = e, t = 0; t < f._il.length; t++)if ((n = f._il[t]) && "s_l" == n._c && n.tagContainerName == e) { if (f.R(n), n.lmq) for (t = 0; t < n.lmq.length; t++)i = n.lmq[t], f.loadModule(i.n); if (n.ml) for (i in n.ml) if (f[i]) for (t in e = f[i], i = n.ml[i]) !Object.prototype[t] && ("function" != typeof i[t] || ("" + i[t]).indexOf("s_c_il") < 0) && (e[t] = i[t]); if (n.mmq) for (t = 0; t < n.mmq.length; t++)i = n.mmq[t], f[i.m] && ((e = f[i.m])[i.f] && "function" == typeof e[i.f] && (i.a ? e[i.f].apply(e, i.a) : e[i.f].apply(e))); if (n.tq) for (t = 0; t < n.tq.length; t++)f.track(n.tq[t]); n.s = f; break } }, f.Util = { urlEncode: f.escape, urlDecode: f.unescape, cookieRead: f.cookieRead, cookieWrite: f.cookieWrite, getQueryParam: function (e, t, n, i) { var r, a = ""; return t = t || (f.pageURL ? f.pageURL : d.location), n = n || "&", !e || !t || (r = (t = "" + t).indexOf("?")) < 0 ? a : (t = n + t.substring(r + 1) + n, i && (0 <= t.indexOf(n + e + n) || 0 <= t.indexOf(n + e + "=" + n)) ? void 0 : (0 <= (r = t.indexOf("#")) && (t = t.substr(0, r) + n), (r = t.indexOf(n + e + "=")) < 0 || (0 <= (r = (t = t.substring(r + n.length + e.length + 1)).indexOf(n)) && (t = t.substring(0, r)), 0 < t.length && (a = f.unescape(t))), a)) } }, f.H = "supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" "), f.g = f.H.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")), f.na = "timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "), f.P = f.na.slice(0), f.Aa = "account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks registerPreTrackCallback registerPostTrackCallback AudienceManagement".split(" "), t = 0; t <= 250; t++)t < 76 && (f.g.push("prop" + t), f.P.push("prop" + t)), f.g.push("eVar" + t), f.P.push("eVar" + t), t < 6 && f.g.push("hier" + t), t < 4 && f.g.push("list" + t); t = "pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID".split(" "), f.g = f.g.concat(t), f.H = f.H.concat(t), f.ssl = 0 <= d.location.protocol.toLowerCase().indexOf("https"), f.charSet = "UTF-8", f.contextData = {}, f.offlineThrottleDelay = 0, f.offlineFilename = "AppMeasurement.offline", f.Pa = 0, f.ma = 0, f.O = 0, f.Oa = 0, f.linkDownloadFileTypes = "exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx", f.w = d, f.d = d.document; try { f.Ta = !1, navigator && (r = navigator.userAgent, ("Microsoft Internet Explorer" == navigator.appName || 0 <= r.indexOf("MSIE ") || 0 <= r.indexOf("Trident/") && 0 <= r.indexOf("Windows NT 6")) && (f.Ta = !0)) } catch (e) { } f.ga = function () { f.ha && (d.clearTimeout(f.ha), f.ha = p), f.l && f.K && f.l.dispatchEvent(f.K), f.A && ("function" == typeof f.A ? f.A() : f.l && f.l.href && (f.d.location = f.l.href)), f.l = f.K = f.A = 0 }, f.Ra = function () { f.b = f.d.body, f.b ? (f.v = function (e) { var t, n, i, r, a; if (!(f.d && f.d.getElementById("cppXYctnr") || e && e["s_fe_" + f._in])) { if (f.Ca) { if (!f.useForcedLinkTracking) return f.b.removeEventListener("click", f.v, !0), void (f.Ca = f.useForcedLinkTracking = 0); f.b.removeEventListener("click", f.v, !1) } else f.useForcedLinkTracking = 0; f.clickObject = e.srcElement ? e.srcElement : e.target; try { if (!f.clickObject || f.N && f.N == f.clickObject || !(f.clickObject.tagName || f.clickObject.parentElement || f.clickObject.parentNode)) f.clickObject = 0; else { var o = f.N = f.clickObject; if (f.la && (clearTimeout(f.la), f.la = 0), f.la = setTimeout(function () { f.N == o && (f.N = 0) }, 1e4), i = f.Ja(), f.track(), i < f.Ja() && f.useForcedLinkTracking && e.target) { for (r = e.target; r && r != f.b && "A" != r.tagName.toUpperCase() && "AREA" != r.tagName.toUpperCase();)r = r.parentNode; if (r && (a = r.href, f.La(a) || (a = 0), n = r.target, e.target.dispatchEvent && a && (!n || "_self" == n || "_top" == n || "_parent" == n || d.name && n == d.name))) { try { t = f.d.createEvent("MouseEvents") } catch (e) { t = new d.MouseEvent } if (t) { try { t.initMouseEvent("click", e.bubbles, e.cancelable, e.view, e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget) } catch (e) { t = 0 } t && (t["s_fe_" + f._in] = t.s_fe = 1, e.stopPropagation(), e.stopImmediatePropagation && e.stopImmediatePropagation(), e.preventDefault(), f.l = e.target, f.K = t) } } } } } catch (e) { f.clickObject = 0 } } }, f.b && f.b.attachEvent ? f.b.attachEvent("onclick", f.v) : f.b && f.b.addEventListener && (navigator && (0 <= navigator.userAgent.indexOf("WebKit") && f.d.createEvent || 0 <= navigator.userAgent.indexOf("Firefox/2") && d.MouseEvent) && (f.Ca = 1, f.useForcedLinkTracking = 1, f.b.addEventListener("click", f.v, !0)), f.b.addEventListener("click", f.v, !1))) : setTimeout(f.Ra, 30) }, f.Ra(), e ? f.setAccount(e) : f.F("Error, missing Report Suite ID in AppMeasurement initialization"), f.loadModule("ActivityMap") } function o(e) { var t, n, i, r, a, o = window.s_c_il, s = e.split(","), c = 0; if (o) for (n = 0; !c && n < o.length;) { if ("s_c" == (t = o[n])._c && (t.account || t.oun)) if (t.account && t.account == e) c = 1; else for (i = t.account ? t.account : t.oun, i = t.allAccounts ? t.allAccounts : i.split(","), r = 0; r < s.length; r++)for (a = 0; a < i.length; a++)s[r] == i[a] && (c = 1); n++ } return c ? t.setAccount && t.setAccount(e) : t = new u(e), t } function s() { var e, t, n, i = window, r = i.s_giq; if (r) for (e = 0; e < r.length; e++)(n = o((t = r[e]).oun)).setAccount(t.un), n.setTagContainer(t.tagContainerName); i.s_giq = 0 } a = {}, r.m = i = [function (e, t) { var a, o, s; "function" != typeof window.DIL && (window.DIL = function (n) { var l, e, m, c, u, g, t, d, i, r, a, o, s, f, p, h, v, b = []; n !== Object(n) && (n = {}), m = n.partner, c = n.containerNSID, u = n.mappings, g = n.uuidCookie, t = !0 === n.enableErrorReporting, d = n.visitorService, i = n.declaredId, r = !0 === n.delayAllUntilWindowLoad, a = void 0 === n.secureDataCollection || !0 === n.secureDataCollection, o = "boolean" == typeof n.isCoopSafe ? n.isCoopSafe : null, s = !0 === n.disableDefaultRequest, f = n.afterResultForDefaultRequest, p = n.visitorConstructor, h = !0 === n.disableCORS, v = !0 === n.ignoreHardDependencyOnVisitorAPI, t && DIL.errorModule.activate(), v && b.push("Warning: this instance is configured to ignore the hard dependency on the VisitorAPI service. This means that no URL destinations will be fired if the instance has no connection to VisitorAPI. If the VisitorAPI service is not instantiated, ID syncs will not be fired either."); var y = !0 === window._dil_unit_tests; if ((l = arguments[1]) && b.push(l + ""), !m || "string" != typeof m) { var k = { name: "error", message: l = "DIL partner is invalid or not specified in initConfig", filename: "dil.js" }; return DIL.errorModule.handleError(k), new Error(l) } if (l = "DIL containerNSID is invalid or not specified in initConfig, setting to default of 0", !c && "number" != typeof c || (c = parseInt(c, 10), !isNaN(c) && 0 <= c && (l = "")), l && (c = 0, b.push(l), l = ""), (e = DIL.getDil(m, c)) instanceof DIL && e.api.getPartner() === m && e.api.getContainerNSID() === c) return e; if (!(this instanceof DIL)) return new DIL(n, "DIL was not instantiated with the 'new' operator, returning a valid instance with partner = " + m + " and containerNSID = " + c); DIL.registerDil(this, m, c); var C = { IS_HTTPS: a || "https:" === document.location.protocol, SIX_MONTHS_IN_MINUTES: 259200, IE_VERSION: function () { if (document.documentMode) return document.documentMode; for (var e = 7; 4 < e; e--) { var t = document.createElement("div"); if (t.innerHTML = "\x3c!--[if IE " + e + "]><span></span><![endif]--\x3e", t.getElementsByTagName("span").length) return t = null, e } return null }() }; C.IS_IE_LESS_THAN_10 = "number" == typeof C.IE_VERSION && C.IE_VERSION < 10; var _, I = { stuffed: {} }, D = {}, w = { firingQueue: [], fired: [], firing: !1, sent: [], errored: [], reservedKeys: { sids: !0, pdata: !0, logdata: !0, callback: !0, postCallbackFn: !0, useImageRequest: !0 }, firstRequestHasFired: !1, abortRequests: !1, num_of_cors_responses: 0, num_of_cors_errors: 0, corsErrorSources: [], num_of_img_responses: 0, num_of_img_errors: 0, platformParams: { d_nsid: c + "", d_rtbd: "json", d_jsonv: DIL.jsonVersion + "", d_dst: "1" }, nonModStatsParams: { d_rtbd: !0, d_dst: !0, d_cts: !0, d_rs: !0 }, modStatsParams: null, adms: { TIME_TO_CATCH_ALL_REQUESTS_RELEASE: 3e4, calledBack: !1, mid: null, noVisitorAPI: null, VisitorAPI: null, instance: null, releaseType: "no VisitorAPI", isOptedOut: !0, isOptedOutCallbackCalled: !1, admsProcessingStarted: !1, process: function (e) { try { if (this.admsProcessingStarted) return; this.admsProcessingStarted = !0; var t, n, i, r, a, o = this, s = d; if ("function" != typeof e || "function" != typeof e.getInstance) throw this.noVisitorAPI = !0, new Error("Visitor does not exist."); if (s !== Object(s) || !(t = s.namespace) || "string" != typeof t) throw this.releaseType = "no namespace", new Error("DIL.create() needs the initConfig property `visitorService`:{namespace:'<Experience Cloud Org ID>'}"); if ((n = e.getInstance(t, { idSyncContainerID: c })) === Object(n) && n instanceof e && "function" == typeof n.isAllowed && "function" == typeof n.getMarketingCloudVisitorID && "function" == typeof n.getCustomerIDs && "function" == typeof n.isOptedOut && "function" == typeof n.publishDestinations) return this.VisitorAPI = e, n.isAllowed() ? (this.instance = n, i = function (e) { "VisitorAPI" !== o.releaseType && (o.mid = e, o.releaseType = "VisitorAPI", o.releaseRequests()) }, "string" == typeof (r = n.getMarketingCloudVisitorID(i)) && r.length ? void i(r) : void setTimeout(function () { "VisitorAPI" !== o.releaseType && (o.releaseType = "timeout", o.releaseRequests()) }, this.getLoadTimeout())) : (this.releaseType = "VisitorAPI is not allowed to write cookies", void this.releaseRequests()); throw this.releaseType = "invalid instance", a = "Invalid Visitor instance.", n === Object(n) && "function" != typeof n.publishDestinations && (a += " In particular, visitorInstance.publishDestinations is not a function. This is needed to fire URL destinations in DIL v8.0+ and should be present in Visitor v3.3+ ."), new Error(a) } catch (e) { if (!v) throw new Error("Error in processing Visitor API, which is a hard dependency for DIL v8.0+: " + e.message); this.releaseRequests() } }, releaseRequests: function () { this.calledBack = !0, w.registerRequest() }, getMarketingCloudVisitorID: function () { return this.instance ? this.instance.getMarketingCloudVisitorID() : null }, getMIDQueryString: function () { var e = A.isPopulatedString, t = this.getMarketingCloudVisitorID(); return e(this.mid) && this.mid === t || (this.mid = t), e(this.mid) ? "d_mid=" + this.mid + "&" : "" }, getCustomerIDs: function () { return this.instance ? this.instance.getCustomerIDs() : null }, getCustomerIDsQueryString: function (e) { if (e !== Object(e)) return ""; var t, n, i, r, a = "", o = [], s = []; for (t in e) e.hasOwnProperty(t) && ((n = e[s[0] = t]) === Object(n) && (s[1] = n.id || "", s[2] = n.authState || 0, o.push(s), s = [])); if (r = o.length) for (i = 0; i < r; i++)a += "&d_cid_ic=" + O.encodeAndBuildRequest(o[i], "%01"); return a }, getIsOptedOut: function () { this.instance ? this.instance.isOptedOut([this, this.isOptedOutCallback], this.VisitorAPI.OptOut.GLOBAL, !0) : (this.isOptedOut = !1, this.isOptedOutCallbackCalled = !0) }, isOptedOutCallback: function (e) { this.isOptedOut = e, this.isOptedOutCallbackCalled = !0, w.registerRequest() }, getLoadTimeout: function () { var e = this.instance; if (e) { if ("function" == typeof e.getLoadTimeout) return e.getLoadTimeout(); if (void 0 !== e.loadTimeout) return e.loadTimeout } return this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE } }, declaredId: { declaredId: { init: null, request: null }, declaredIdCombos: {}, setDeclaredId: function (e, t) { var n = A.isPopulatedString, i = encodeURIComponent; if (e === Object(e) && n(t)) { var r, a = e.dpid, o = e.dpuuid; if (n(a) && n(o)) return r = i(a) + "$" + i(o), !0 === this.declaredIdCombos[r] ? "setDeclaredId: combo exists for type '" + t + "'" : (this.declaredIdCombos[r] = !0, this.declaredId[t] = { dpid: a, dpuuid: o }, "setDeclaredId: succeeded for type '" + t + "'") } return "setDeclaredId: failed for type '" + t + "'" }, getDeclaredIdQueryString: function () { var e = this.declaredId.request, t = this.declaredId.init, n = encodeURIComponent, i = ""; return null !== e ? i = "&d_dpid=" + n(e.dpid) + "&d_dpuuid=" + n(e.dpuuid) : null !== t && (i = "&d_dpid=" + n(t.dpid) + "&d_dpuuid=" + n(t.dpuuid)), i } }, registerRequest: function (e) { var t, n = this.firingQueue; e === Object(e) && n.push(e), this.firing || !n.length || r && !DIL.windowLoaded || (this.adms.isOptedOutCallbackCalled || this.adms.getIsOptedOut(), this.adms.calledBack && !this.adms.isOptedOut && this.adms.isOptedOutCallbackCalled && (this.adms.isOptedOutCallbackCalled = !1, (t = n.shift()).src = t.src.replace(/demdex.net\/event\?d_nsid=/, "demdex.net/event?" + this.adms.getMIDQueryString() + "d_nsid="), A.isPopulatedString(t.corsPostData) && (t.corsPostData = t.corsPostData.replace(/^d_nsid=/, this.adms.getMIDQueryString() + "d_nsid=")), E.fireRequest(t), this.firstRequestHasFired || "script" !== t.tag && "cors" !== t.tag || (this.firstRequestHasFired = !0))) }, processVisitorAPI: function () { this.adms.process(p || window.Visitor) }, getCoopQueryString: function () { var e = ""; return !0 === o ? e = "&d_coop_safe=1" : !1 === o && (e = "&d_coop_unsafe=1"), e } }, S = { sendingMessages: !1, messages: [], messagesPosted: [], messagesReceived: [], jsonForComparison: [], jsonDuplicates: [], jsonWaiting: [], jsonProcessed: [], requestToProcess: function (e, t) { var n, i, r = this; function a() { r.jsonForComparison.push(e), r.jsonWaiting.push([e, t]) } if (e && !A.isEmptyObject(e)) if (n = JSON.stringify(e.dests || []), this.jsonForComparison.length) { for (var o, s = !1, c = 0, u = this.jsonForComparison.length; c < u; c++)if (o = this.jsonForComparison[c], n === JSON.stringify(o.dests || [])) { s = !0; break } s ? this.jsonDuplicates.push(e) : a() } else a(); this.jsonWaiting.length && (i = this.jsonWaiting.shift(), this.process(i[0], i[1]), this.requestToProcess()), this.messages.length && !this.sendingMessages && this.sendMessages() }, process: function (e, t) { var n, i, r, a, o, s = encodeURIComponent; if (t === Object(t) && O.encodeAndBuildRequest(["", t.dpid || "", t.dpuuid || ""], ","), (n = e.dests) && n instanceof Array && (i = n.length)) for (r = 0; r < i; r++)a = n[r], o = [s("dests"), s(a.id || ""), s(a.y || ""), s(a.c || "")], this.addMessage(o.join("|")); this.jsonProcessed.push(e) }, addMessage: function (e) { this.messages.push(e) }, sendMessages: function () { this.sendingMessages || (this.sendingMessages = !0, this.messages.length && (this.publishDestinations(this.messages), this.messages = []), this.sendingMessages = !1) }, publishDestinations: function (e) { var t = w.adms.instance; t && "function" == typeof t.publishDestinations && t.publishDestinations(m, e, function (e) { b.push("visitor.publishDestinations() result: " + (e.error || e.message)) }), Array.prototype.push.apply(this.messagesPosted, e) } }, T = { traits: function (e) { return A.isValidPdata(e) && (D.sids instanceof Array || (D.sids = []), O.extendArray(D.sids, e)), this }, pixels: function (e) { return A.isValidPdata(e) && (D.pdata instanceof Array || (D.pdata = []), O.extendArray(D.pdata, e)), this }, logs: function (e) { return A.isValidLogdata(e) && (D.logdata !== Object(D.logdata) && (D.logdata = {}), O.extendObject(D.logdata, e)), this }, customQueryParams: function (e) { return A.isEmptyObject(e) || O.extendObject(D, e, w.reservedKeys), this }, signals: function (e, t) { var n, i = e; if (!A.isEmptyObject(i)) { if (t && "string" == typeof t) for (n in i = {}, e) e.hasOwnProperty(n) && (i[t + n] = e[n]); O.extendObject(D, i, w.reservedKeys) } return this }, declaredId: function (e) { return w.declaredId.setDeclaredId(e, "request"), this }, result: function (e) { return "function" == typeof e && (D.callback = e), this }, afterResult: function (e) { return "function" == typeof e && (D.postCallbackFn = e), this }, useImageRequest: function () { return D.useImageRequest = !0, this }, clearData: function () { return D = {}, this }, submit: function () { return E.submitRequest(D), D = {}, this }, getPartner: function () { return m }, getContainerNSID: function () { return c }, getEventLog: function () { return b }, getState: function () { var e = {}, t = {}; return O.extendObject(e, w, { registerRequest: !0 }), O.extendObject(t, S, { requestToProcess: !0, process: !0, sendMessages: !0 }), { initConfig: n, pendingRequest: D, otherRequestInfo: e, destinationPublishingInfo: t, log: b } }, idSync: function () { throw new Error("Please use the `idSyncByURL` method of the Experience Cloud ID Service (Visitor) instance") }, aamIdSync: function () { throw new Error("Please use the `idSyncByDataSource` method of the Experience Cloud ID Service (Visitor) instance") }, passData: function (e) { return A.isEmptyObject(e) ? "Error: json is empty or not an object" : (E.defaultCallback(e), e) }, getPlatformParams: function () { return w.platformParams }, getEventCallConfigParams: function () { var e, t = w, n = t.modStatsParams, i = t.platformParams; if (!n) { for (e in n = {}, i) i.hasOwnProperty(e) && !t.nonModStatsParams[e] && (n[e.replace(/^d_/, "")] = i[e]); !0 === o ? n.coop_safe = 1 : !1 === o && (n.coop_unsafe = 1), t.modStatsParams = n } return n }, setAsCoopSafe: function () { return o = !0, this }, setAsCoopUnsafe: function () { return o = !1, this } }, E = { corsMetadata: (_ = "none", "undefined" != typeof XMLHttpRequest && XMLHttpRequest === Object(XMLHttpRequest) && ("withCredentials" in new XMLHttpRequest || new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/")()) && (_ = "XMLHttpRequest"), { corsType: _ }), getCORSInstance: function () { return "none" === this.corsMetadata.corsType ? null : new window[this.corsMetadata.corsType] }, submitRequest: function (e) { return w.registerRequest(E.createQueuedRequest(e)), !0 }, createQueuedRequest: function (e) { var t, n, i, r, a, o = e.callback, s = "img"; if (!A.isEmptyObject(u)) for (i in u) if (u.hasOwnProperty(i)) { if (null == (r = u[i]) || "" === r) continue; if (i in e && !(r in e) && !(r in w.reservedKeys)) { if (null == (a = e[i]) || "" === a) continue; e[r] = a } } return A.isValidPdata(e.sids) || (e.sids = []), A.isValidPdata(e.pdata) || (e.pdata = []), A.isValidLogdata(e.logdata) || (e.logdata = {}), e.logdataArray = O.convertObjectToKeyValuePairs(e.logdata, "=", !0), e.logdataArray.push("_ts=" + (new Date).getTime()), "function" != typeof o && (o = this.defaultCallback), t = this.makeRequestSrcData(e), (n = this.getCORSInstance()) && !0 !== e.useImageRequest && (s = "cors"), { tag: s, src: t.src, corsSrc: t.corsSrc, callbackFn: o, postCallbackFn: e.postCallbackFn, useImageRequest: !!e.useImageRequest, requestData: e, corsInstance: n, corsPostData: t.corsPostData } }, defaultCallback: function (e, t) { var n, i, r, a, o, s, c, u, l; if ((n = e.stuff) && n instanceof Array && (i = n.length)) for (r = 0; r < i; r++)(a = n[r]) && a === Object(a) && (o = a.cn, s = a.cv, void 0 !== (c = a.ttl) && "" !== c || (c = Math.floor(O.getMaxCookieExpiresInMinutes() / 60 / 24)), u = a.dmn || "." + document.domain.replace(/^www\./, ""), l = a.type, o && (s || "number" == typeof s) && ("var" !== l && (c = parseInt(c, 10)) && !isNaN(c) && O.setCookie(o, s, 24 * c * 60, "/", u, !1), I.stuffed[o] = s)); var d, f, p = e.uuid; A.isPopulatedString(p) && (A.isEmptyObject(g) || ("string" == typeof (d = g.path) && d.length || (d = "/"), f = parseInt(g.days, 10), isNaN(f) && (f = 100), O.setCookie(g.name || "aam_did", p, 24 * f * 60, d, g.domain || "." + document.domain.replace(/^www\./, ""), !0 === g.secure))), w.abortRequests || S.requestToProcess(e, t) }, makeRequestSrcData: function (a) { a.sids = A.removeEmptyArrayValues(a.sids || []), a.pdata = A.removeEmptyArrayValues(a.pdata || []); var o = w, e = o.platformParams, t = O.encodeAndBuildRequest(a.sids, ","), n = O.encodeAndBuildRequest(a.pdata, ","), i = (a.logdataArray || []).join("&"); delete a.logdataArray; var r, s, c = C.IS_HTTPS ? "https://" : "http://", u = o.declaredId.getDeclaredIdQueryString(), l = o.adms.instance ? o.adms.getCustomerIDsQueryString(o.adms.getCustomerIDs()) : "", d = function () { var e, t, n, i, r = []; for (e in a) if (!(e in o.reservedKeys) && a.hasOwnProperty(e)) if (t = a[e], e = encodeURIComponent(e), t instanceof Array) for (n = 0, i = t.length; n < i; n++)r.push(e + "=" + encodeURIComponent(t[n])); else r.push(e + "=" + encodeURIComponent(t)); return r.length ? "&" + r.join("&") : "" }(), f = "d_nsid=" + e.d_nsid + o.getCoopQueryString() + u + l + (t.length ? "&d_sid=" + t : "") + (n.length ? "&d_px=" + n : "") + (i.length ? "&d_ld=" + encodeURIComponent(i) : ""), p = "&d_rtbd=" + e.d_rtbd + "&d_jsonv=" + e.d_jsonv + "&d_dst=" + e.d_dst, g = s = (r = c + m + ".demdex.net/event") + "?" + f + p + d; return 2048 < s.length && (s = s.substring(0, 2048).substring(0, s.lastIndexOf("&"))), { corsSrc: r + "?_ts=" + (new Date).getTime(), src: s, originalSrc: g, corsPostData: f + p + d, isDeclaredIdCall: "" !== u } }, fireRequest: function (e) { var t, n, i; "img" === e.tag ? this.fireImage(e) : (i = { dpid: (n = (t = w.declaredId).declaredId.request || t.declaredId.init || {}).dpid || "", dpuuid: n.dpuuid || "" }, this.fireCORS(e, i)) }, fireImage: function (t) { var e, n, i = w; i.abortRequests || (i.firing = !0, e = new Image(0, 0), i.sent.push(t), e.onload = function () { i.firing = !1, i.fired.push(t), i.num_of_img_responses++, i.registerRequest() }, n = function (e) { l = "imgAbortOrErrorHandler received the event of type " + e.type, b.push(l), i.abortRequests = !0, i.firing = !1, i.errored.push(t), i.num_of_img_errors++, i.registerRequest() }, e.addEventListener("error", n), e.addEventListener("abort", n), e.src = t.src) }, fireCORS: function (i, r) { var a = this, o = w, e = this.corsMetadata.corsType, t = i.corsSrc, n = i.corsInstance, s = i.corsPostData, c = i.postCallbackFn, u = "function" == typeof c; if (!o.abortRequests && !h) { o.firing = !0; try { n.open("post", t, !0), "XMLHttpRequest" === e && (n.withCredentials = !0, n.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), n.onreadystatechange = function () { 4 === this.readyState && 200 === this.status && function (e) { var t; try { if ((t = JSON.parse(e)) !== Object(t)) return a.handleCORSError(i, r, "Response is not JSON") } catch (e) { return a.handleCORSError(i, r, "Error parsing response as JSON") } try { var n = i.callbackFn; o.firing = !1, o.fired.push(i), o.num_of_cors_responses++, n(t, r), u && c(t, r) } catch (e) { e.message = "DIL handleCORSResponse caught error with message " + e.message, l = e.message, b.push(l), e.filename = e.filename || "dil.js", e.partner = m, DIL.errorModule.handleError(e); try { n({ error: e.name + "|" + e.message }, r), u && c({ error: e.name + "|" + e.message }, r) } catch (e) { } } finally { o.registerRequest() } }(this.responseText) }), n.onerror = function () { a.handleCORSError(i, r, "onerror") }, n.ontimeout = function () { a.handleCORSError(i, r, "ontimeout") }, n.send(s) } catch (e) { this.handleCORSError(i, r, "try-catch") } o.sent.push(i), o.declaredId.declaredId.request = null } }, handleCORSError: function (e, t, n) { w.num_of_cors_errors++, w.corsErrorSources.push(n) }, handleRequestError: function (e, t) { var n = w; b.push(e), n.abortRequests = !0, n.firing = !1, n.errored.push(t), n.registerRequest() } }, A = { isValidPdata: function (e) { return !!(e instanceof Array && this.removeEmptyArrayValues(e).length) }, isValidLogdata: function (e) { return !this.isEmptyObject(e) }, isEmptyObject: function (e) { if (e !== Object(e)) return !0; var t; for (t in e) if (e.hasOwnProperty(t)) return !1; return !0 }, removeEmptyArrayValues: function (e) { for (var t, n = 0, i = e.length, r = [], n = 0; n < i; n++)void 0 !== (t = e[n]) && null !== t && "" !== t && r.push(t); return r }, isPopulatedString: function (e) { return "string" == typeof e && e.length } }, O = { convertObjectToKeyValuePairs: function (e, t, n) { var i, r, a = []; for (i in t = t || "=", e) e.hasOwnProperty(i) && void 0 !== (r = e[i]) && null !== r && "" !== r && a.push(i + t + (n ? encodeURIComponent(r) : r)); return a }, encodeAndBuildRequest: function (e, t) { return e.map(function (e) { return encodeURIComponent(e) }).join(t) }, getCookie: function (e) { for (var t, n = e + "=", i = document.cookie.split(";"), r = 0, a = i.length; r < a; r++) { for (t = i[r]; " " === t.charAt(0);)t = t.substring(1, t.length); if (0 === t.indexOf(n)) return decodeURIComponent(t.substring(n.length, t.length)) } return null }, setCookie: function (e, t, n, i, r, a) { var o = new Date; n = n && 1e3 * n * 60, document.cookie = e + "=" + encodeURIComponent(t) + (n ? ";expires=" + new Date(o.getTime() + n).toUTCString() : "") + (i ? ";path=" + i : "") + (r ? ";domain=" + r : "") + (a ? ";secure" : "") }, extendArray: function (e, t) { return e instanceof Array && t instanceof Array && (Array.prototype.push.apply(e, t), !0) }, extendObject: function (e, t, n) { var i; if (e !== Object(e) || t !== Object(t)) return !1; for (i in t) if (t.hasOwnProperty(i)) { if (!A.isEmptyObject(n) && i in n) continue; e[i] = t[i] } return !0 }, getMaxCookieExpiresInMinutes: function () { return C.SIX_MONTHS_IN_MINUTES }, replaceMethodsWithFunction: function (e, t) { var n; if (e === Object(e) && "function" == typeof t) for (n in e) e.hasOwnProperty(n) && "function" == typeof e[n] && (e[n] = t) } }; "error" === m && 0 === c && window.addEventListener("load", function () { DIL.windowLoaded = !0 }); function M() { P || (P = !0, w.registerRequest(), x()) } var P = !1, x = function () { setTimeout(function () { s || w.firstRequestHasFired || ("function" == typeof f ? T.afterResult(f).submit() : T.submit()) }, DIL.constants.TIME_TO_DEFAULT_REQUEST) }, L = document; "error" !== m && (DIL.windowLoaded ? M() : "complete" !== L.readyState && "loaded" !== L.readyState ? window.addEventListener("load", function () { DIL.windowLoaded = !0, M() }) : (DIL.windowLoaded = !0, M())), w.declaredId.setDeclaredId(i, "init"), w.processVisitorAPI(), C.IS_IE_LESS_THAN_10 && O.replaceMethodsWithFunction(T, function () { return this }), this.api = T, this.getStuffedVariable = function (e) { var t = I.stuffed[e]; return t || "number" == typeof t || (t = O.getCookie(e)) || "number" == typeof t || (t = ""), t }, this.validators = A, this.helpers = O, this.constants = C, this.log = b, y && (this.pendingRequest = D, this.requestController = w, this.destinationPublishing = S, this.requestProcs = E, this.variables = I, this.callWindowLoadFunctions = M) }, DIL.extendStaticPropertiesAndMethods = function (e) { var t; if (e === Object(e)) for (t in e) e.hasOwnProperty(t) && (this[t] = e[t]) }, DIL.extendStaticPropertiesAndMethods({ version: "8.0", jsonVersion: 1, constants: { TIME_TO_DEFAULT_REQUEST: 50 }, variables: { scriptNodeList: document.getElementsByTagName("script") }, windowLoaded: !1, dils: {}, isAddedPostWindowLoad: function () { var e = arguments[0]; this.windowLoaded = "function" == typeof e ? !!e() : "boolean" != typeof e || e }, create: function (e) { try { return new DIL(e) } catch (e) { throw new Error("Error in attempt to create DIL instance with DIL.create(): " + e.message) } }, registerDil: function (e, t, n) { var i = t + "$" + n; i in this.dils || (this.dils[i] = e) }, getDil: function (e, t) { var n; return "string" != typeof e && (e = ""), (n = e + "$" + (t = t || 0)) in this.dils ? this.dils[n] : new Error("The DIL instance with partner = " + e + " and containerNSID = " + t + " was not found") }, dexGetQSVars: function (e, t, n) { var i = this.getDil(t, n); return i instanceof this ? i.getStuffedVariable(e) : "" } }), DIL.errorModule = (a = DIL.create({ partner: "error", containerNSID: 0, ignoreHardDependencyOnVisitorAPI: !0 }), s = !(o = { harvestererror: 14138, destpuberror: 14139, dpmerror: 14140, generalerror: 14137, error: 14137, noerrortypedefined: 15021, evalerror: 15016, rangeerror: 15017, referenceerror: 15018, typeerror: 15019, urierror: 15020 }), { activate: function () { s = !0 }, handleError: function (e) { if (!s) return "DIL error module has not been activated"; e !== Object(e) && (e = {}); var t = e.name ? (e.name + "").toLowerCase() : "", n = t in o ? o[t] : o.noerrortypedefined, i = [], r = { name: t, filename: e.filename ? e.filename + "" : "", partner: e.partner ? e.partner + "" : "no_partner", site: e.site ? e.site + "" : document.location.href, message: e.message ? e.message + "" : "" }; return i.push(n), a.api.pixels(i).logs(r).useImageRequest().submit(), "DIL error report sent" }, pixelMap: o }), DIL.tools = {}, DIL.modules = { helpers: { handleModuleError: function (e, t, n) { var i = "", r = t || "Error caught in DIL module/submodule: "; return e === Object(e) ? i = r + (e.message || "err has no message") : (i = r + "err is not a valid object", e = {}), e.message = i, n instanceof DIL && (e.partner = n.api.getPartner()), DIL.errorModule.handleError(e), this.errorMessage = i } } }) }], r.c = a, r.d = function (e, t, n) { r.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: n }) }, r.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, r.t = function (t, e) { if (1 & e && (t = r(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var n = Object.create(null); if (r.r(n), Object.defineProperty(n, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var i in t) r.d(n, i, function (e) { return t[e] }.bind(null, i)); return n }, r.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return r.d(t, "a", t), t }, r.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, r.p = "", r(r.s = 0), u.getInstance = o, "undefined" != typeof window && (window.AppMeasurement = u, window.s_gi = o, window.s_pgicq = s, window.s_objectID || (window.s_objectID = 0), s(), window.AppMeasurement_Module_AudienceManagement = n) }, function (f, e, p) { "use strict"; (function (n) { var e = function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e }; function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var o = p(8), r = p(3), a = p(5), s = p(6), c = p(26), u = p(4), l = p(2).toLogStore, t = (e(d, [{ key: "publish", value: function (r) { var a = this; return this.readyToPublish.then(function () { try { var e = r && r.context && r.context.user || {}, t = r && r.context && r.context.site || {}, n = u.fetchMarketingIdFromCookie("AMCV_" + o.ADOBE_MARKETING_CLOUD_ORGANIZATION_ID), i = a.trvlPixApi.loadXdidApi({ guid: e.guid, tpid: t.tpid, eapid: t.eapid, expUserId: e.expUserProfileId, amcv: n, inAuthId: u.getCookie("IAID"), emailHash: e.xVisitorId, serverPlatform: "bexg" }); return l({ response: i || {} }, "travelpixel", "view", ((r || {}).pageInfo || {}).pageName, a.isDebugEnabled), i } catch (e) { return console.log(e.stack), e } }) } }]), d); function d(e) { var t = this; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, d), this.isDebugEnabled = e, this.hostname = "undefined" != typeof window ? window.location.hostname : "localhost", this.readyToPublish = n.all([a.load(), s.load(), c.load(r)]).then(function (e) { t.s = e[1], t.s.visitor = e[0], t.trvlPixApi = e[2] }) } f.exports = t }).call(this, p(1)) }, function (i, e, o) { "use strict"; (function (e) { var r = o(2).toLogStore, a = (0, o(3).getConfiguration)().travelPixel; i.exports = { load: function () { t = t || function () { n = n || new e(function (n, t) { function e() { var e, t; n((e = window.travelPixel, t = void 0 !== e && new e.Waiter(a.domain, a.environment), r("TravelPixel", "tpw", "load", "travelPixel", !1), t)) } var i; void 0 === window.travelPixel ? ((i = document.createElement("script")).onload = e, i.setAttribute("id", "trvlpxjs"), i.setAttribute("async", ""), i.onerror = function (e) { console.error("Error loading TravelPixel script", e), t(e) }, i.src = a.url, document.getElementsByTagName("head")[0].appendChild(i)) : e() }); return n }(); return t } }; var t = void 0, n = void 0 }).call(this, o(1)) }, function (a, e, f) { "use strict"; (function (o) { var s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, e = function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e }; function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var t = f(3), c = f(2).toLogStore, u = "TEALIUM_OFF", l = new RegExp("page.affhub.home|page.affhub.programs", "i"), n = (e(r, [{ key: "publish", value: function (e) { return this.tAccount === u || this.tProfile === u || e && e.context && e.context.clientInfo && e.context.clientInfo.requestMadeByBot || e && e.pageInfo && e.pageInfo.pageName && l.test(e.pageInfo.pageName) ? o.resolve() : (t = e, n = this.tAccount, i = this.tProfile, r = this.env, a = this.isDebugEnabled, new o(function (e) { document.body ? (d(t, n, i, r, a), e()) : document.onreadystatechange = function () { "complete" === document.readyState && (d(t, n, i, r, a), e()) } })); var t, n, i, r, a } }]), r); function r() { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : { tealiumAccountDetails: {}, env: void 0, isDebugEnabled: void 0 }; if (!function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, r), !t.isBrowser()) throw new Error("Tealium is only supported on a browser"); this.isDebugEnabled = e.isDebugEnabled, this.tAccount = "expedia", e.tealiumAccountDetails && e.tealiumAccountDetails.tealiumAccountName && (this.tAccount = e.tealiumAccountDetails.tealiumAccountName), this.tProfile = "main", e.tealiumAccountDetails && e.tealiumAccountDetails.tealiumProfileName && (this.tProfile = e.tealiumAccountDetails.tealiumProfileName), this.env = t.isTestEnvironment() ? "dev" : "prod" } function d(e, t, n, i, r) { window.utag_data = e, document.getElementById("tealiumjs") ? "object" === s(window.utag) && "function" == typeof window.utag.view && window.utag.view(e) : function (e, t, n) { var i = this, r = document.createElement("script"); r.setAttribute("id", "tealiumjs"), r.setAttribute("async", ""), r.onerror = function (e) { console.error("Error loading Tealium script", e), c(e, "tealium", "view", "error", i.isDebugEnabled) }, r.src = "//tags.tiqcdn.com/utag/" + e + "/" + t + "/" + n + "/utag.js", document.body.appendChild(r) }(t, n, i); var a = e.pageInfo || {}; c(e, "tealium", "view", a.pageName, r) } a.exports = n }).call(this, f(1)) }, function (e, t, n) { "use strict"; var i = function (e, t, n) { return t && r(e.prototype, t), n && r(e, n), e }; function r(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var a = n(3), o = n(2).toLogStore, s = (i(c, [{ key: "publish", value: function (e) { this.enabled && function (e, t, n) { var i; e && (document.body ? (u(t), l(e, n)) : window.addEventListener("load", function () { u(t), l(e, n) }), i = t && t.page_name ? t.page_name : "", o(t, "tagCommander", "view", i, n)) }(this.url, e, this.isDebugEnabled) } }]), c); function c(e) { var t = e.config, n = void 0 === t ? {} : t, i = e.isDebugEnabled; if (!function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, c), !a.isBrowser()) throw new Error("TagCommander is only supported on a browser"); this.isDebugEnabled = i, this.enabled = n.enabled || !1, this.url = n.tcContainerUrl } function u(e) { window.tc_vars = e } function l(e, t) { var n; window.self === window.top && ((n = document.createElement("script")).setAttribute("id", "tcjs"), n.setAttribute("async", ""), n.onerror = function (e) { o(e, "tagCommander", "view", "error", t) }, n.src = e, document.body.appendChild(n)) } e.exports = s }, function (e, t, n) { "use strict"; var o = n(30), a = n(6), i = n(4); var r = function () { return "undefined" == typeof localStorage ? { setItem: function () { }, getItem: function () { } } : localStorage }; function s(e) { var t = i.getQueryParameterByName("adobe_aa_vid", window.location.href) || r().getItem("adobe_aa_vid"); t && (r().setItem("adobe_aa_vid", t), e.visitorID = t) } function c(e, t) { t.prop21 = e.previousPageName, t.prop22 = e.scrollDepth } function u(e, t) { var n, i; 1 < t.length && (n = new Set, t.forEach(function (e) { e.traceId && n.add(e.traceId) }), i = [], n.forEach(function (e) { i.push(e) }), 1 < i.length && e.push({ schemaName: "mergeTraces", messageContent: { traceIds: i } })) } e.exports = { getAllSchemas: function () { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : [], t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : [], n = {}, i = [], r = t[0].context.pageName; return u(i, t), function (e, t) { t.prop41 = function () { var e = document.documentElement.getAttribute("data-version"); if (e) return e; if (window.uitk && window.uitk.version) return window.uitk.version; return "unknown" }().match(/^v(\d+\.\d+\.\d+)/) ? RegExp.$1 : "unknown", t.prop50 = "PLATFORM-ANALYTICS-PRIME-JAVA " + e + "|PLATFORM-ANALYTICS-PRIME-JS 1.13.5" }(t[0].version, n), 0 < e.length && e.forEach(function (e) { i.push(e) }), s(n), a.load().then(function (e) { return r && 0 < r.length && function (e, t, n, i) { { var r; !e || (r = e[0]) && r.context && (t.cookieDomainPeriods = r.context.cookieDomainPeriods, t.fpCookieDomainPeriods = r.context.fpCookieDomainPeriods) } var a = { pageName: n, appMeasurement: t }; c(o.populate(a), i) }(t, e, r, n), { adobeData: n, schema: i } }) }, populateVisitorId: s, captureMergeTraces: u, updateAdobeScollDepthParameters: c } }, function (e, t, n) { "use strict"; (function (s) { var c = 1, u = 2; e.exports.populate = function (e) { var t = {}, n = e.appMeasurement.getPreviousValue(e.pageName, "s_ppn"); t.previousPageName = n; var i, r = [], a = (s.location || {}).hostname || void 0; try { a && a.indexOf("chase.com") < 0 && (r = e.appMeasurement.getPercentPageViewed(n)); var o = e.pageName && "no value" !== e.pageName && r ? r[c] + "|" + ((i = r)[c] - i[u]) : ""; t.scrollDepth = "undefined|NaN" == o ? "" : o } catch (e) { console.log(e), t.scrollDepth = "" } return t } }).call(this, n(0)) }, function (e, t, n) { "use strict"; var i = n(2).toLogStore, r = "pageIdentity", a = "parentView", o = "events"; function s(e, t) { var n, i = (n = t, e.filter(function (e) { return e.schemaName === o && e.messageContent.name === n })); 0 === i.length && (i = { schemaName: o, messageContent: { name: t } }, e.push(i)) } function c(e, t) { return e.filter(function (e) { return e.schemaName === t }) } e.exports = { addPageIdentity: function (e, t) { var n; 0 < c(e, r).length || (t.pageIdentity ? e.push({ schemaName: r, messageContent: t.pageIdentity }) : (n = "PlatformAnalyticsPrime: pageIdentity not available in PlatformAnalytics instance", console.error(n), i(n, "PlatformAnalyticsPrime", "track", "error", !1))) }, addParentView: function (e, t) { 0 < c(e, a).length || e.push({ schemaName: a, messageContent: { applicationNameOfTheView: t.applicationName, traceIdOfTheView: t.traceIdOfTheView } }) }, addVisitEvents: function (e, t) { t.newVisit && s(e, "NewVisit"), t.entryPageView && s(e, "EntryPageView") } } }, function (e, t, n) { "use strict"; function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var r = (function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e }(a, [{ key: "pageName", get: function () { return this.platformAnalyticsInstance._ctx.pageName } }]), a); function a() { var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {}; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), this.platformAnalyticsInstance = e } e.exports = r }, function (e, t, n) { "use strict"; var i = n(3), r = n(4), a = n(7), o = "unknown"; e.exports = { updateContextualInfoWithFirstPayload: function (t, n) { t = t || {}, n && (n.applicationName && (t.applicationName = n.applicationName), n.traceId && (t.traceIdOfTheView = n.traceId), n.context && Object.keys(n.context).forEach(function (e) { "pageIdentity" === e && t.pageIdentity || "pageName" === e || (t[e] = n.context[e]) }), n.tealiumContext && (t.tealiumContext = t.tealiumContext || {}, Object.keys(n.tealiumContext).forEach(function (e) { t.tealiumContext[e] = n.tealiumContext[e] }))) }, createContextualInfo: function (e) { var t, n = {}; return n.env = i.isTestEnvironment() ? "dev" : "prod", n.overridenMicroMessages = e && e.overridenMicroMessages || [], n.deviceId = e && e.deviceId || r.getCookie("DUAID"), !n.overridenMicroMessages || (t = a.searchPageIdentity(n.overridenMicroMessages)) && (n.pageIdentity = t.messageContent), n.pageName = n.pageIdentity ? n.pageIdentity.pageIdentifier : o, n.hasPub = !1, n.isPwa = !!e.isPwa, n.isClientSidePageLoad = !1, n.isCrossSite = e.isCrossSite, n.traceIdOfTheView = e.traceIdOfTheView, n.applicationName = e.applicationName, n.isAutomaticAdobePageViewDisabled = !!e.isAutomaticAdobePageViewDisabled, n.additionalHeaders = e && e.additionalHeaders || {}, n }, updatePageName: function (e, t) { var n = e._ctx.pageName; return n === o && (t.context && t.context.pageIdentity ? n = t.context.pageIdentity.pageIdentifier : t.adobeMappedData && t.adobeMappedData.pageName ? n = t.adobeMappedData.pageName : t.tealiumUtagData && t.tealiumUtagData.pageInfo && t.tealiumUtagData.pageInfo.pageName && (n = ((t.tealiumUtagData || {}).pageInfo || {}).pageName)), e._ctx.pageName = n, e.pageName = n, t.context.pageName = n, t.adobeMappedData && t.adobeMappedData.pageName && (t.adobeMappedData.pageName = n), t.tealiumUtagData && t.tealiumUtagData.pageInfo && t.tealiumUtagData.pageInfo.pageName && (t.tealiumUtagData.pageInfo.pageName = n), n }, UNSPECIFIED: o } }, function (e, t, n) { "use strict"; var i = n(7).mergeObjects, r = n(35), a = n(36), o = n(37); e.exports = { injectMarketingData: function (e, t) { var n; e && (n = r.getMarketingDataFromCesc(), e.adobeMappedData || (e.adobeMappedData = {}), a.map(n, e.adobeMappedData, t), e.tealiumUtagData && o.map(n, e.tealiumUtagData)) }, updateDebugData: function (e) { e.debug && (e.adobeMappedData = e.adobeMappedData || {}, e.debug.adobeMappedData = e.debug.adobeMappedData || {}, i(e.debug.adobeMappedData, e.adobeMappedData), e.tealiumUtagData = e.tealiumUtagData || {}, e.debug.tealiumUtagData = e.debug.tealiumUtagData || {}, i(e.debug.tealiumUtagData, e.tealiumUtagData)) } } }, function (e, t, n) { "use strict"; function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } var r = (function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e }(a, [{ key: "getCampaignValue", value: function () { return this.campaignValue } }, { key: "getTimestamp", value: function () { return this.timestamp } }, { key: "exists", value: function () { return this.campaignValue && null !== this.timestamp } }]), a); function a(e, t) { !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, a), this.campaignValue = e, this.timestamp = t } function o() { var e = function () { for (var e = decodeURIComponent(document.cookie).split(";"), t = 0; t < e.length; t += 1) { for (var n = e[t]; " " === n.charAt(0);)n = n.substring(1); if (0 === n.indexOf("cesc=")) return n.substring("cesc=".length, n.length) } return "" }(); return e && 1 < e.length ? JSON.parse(e) : {} } var v = "eml", b = "dps", y = "sem", k = "semdtl", C = "aff", _ = "ola", I = "icm", D = "entryPage", w = "cid", S = "cidVisit", T = "gclid", E = "seo", A = "mcicid", O = "visitNumber", M = "hitNumber", P = "marketingClick"; function s(e) { var t = {}, n = x(e, S); t.campaignIdVisit = n.getCampaignValue(), t.campaignIdVisitTimestamp = n.getTimestamp(), t.hitLevelCampaignId = n.getCampaignValue(); var i = x(e, w); t.campaignId30Day = i.getCampaignValue(), t.campaignId30DayTimestamp = i.getTimestamp(); var r = x(e, v); t.emailMarketingCode = r.getCampaignValue(), t.emailMarketingCodeTimestamp = r.getTimestamp(); var a = x(e, b); t.distributionPartner = a.getCampaignValue(), t.distributionPartnerTimestamp = a.getTimestamp(); var o = x(e, y); t.searchEngineMarketingCode = o.getCampaignValue(), t.searchEngineMarketingCodeTimestamp = o.getTimestamp(); var s = x(e, C); t.affiliateMarketingCode = s.getCampaignValue(), t.affiliateMarketingCodeTimestamp = s.getTimestamp(); var c = x(e, _); t.onlineAdvertisingCode = c.getCampaignValue(), t.onlineAdvertisingCodeTimestamp = c.getTimestamp(); var u = x(e, I); t.intraCompanyMarketingCode = u.getCampaignValue(), t.intraCompanyMarketingCodeTimestamp = u.getTimestamp(), t.campaignIdInternalVisit = function (e, t) { if (e && t) { var n = decodeURIComponent(t.replace(new RegExp("^(?:.*[&\\?]" + encodeURIComponent(e).replace(/[\\.\\+\\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1")); return "" !== n ? n : null } return null }(A, window.location.href); var l = x(e, k); t.searchEngineMarketingDetails = l.getCampaignValue(), t.searchEngineMarketingDetailsTimestamp = l.getTimestamp(); var d = x(e, T); t.googleClickIdentifier = d.getCampaignValue(), t.googleClickIdentifierTimestamp = d.getTimestamp(); var f = x(e, E); t.searchEngineOptimisationCodeTimestamp = f.getTimestamp(); var p = x(e, P); t.marketingClick = p.getCampaignValue(); var g = x(e, D); t.entryPage = g.getCampaignValue(); var m = x(e, O); t.visitNumber = m.getCampaignValue(); var h = x(e, M); return t.hitNumber = h.getCampaignValue(), t } function x(t, n) { if (t[n]) try { var e = t[n]; return new r(e[0], e[1]) } catch (e) { console.error("Campaign '{}' does not exist in cesc {}", n, t) } return new r(null, null) } e.exports = { getCescCookieAsJson: o, toMarketingData: s, getMarketingDataFromCesc: function () { return s(o()) } } }, function (e, t, n) { "use strict"; function a(e) { return e || "NA" } e.exports = { map: function (e, t, n) { var i, r; t.eVar10 = a(e.campaignId30Day), t.eVar12 = a(e.campaignIdInternalVisit), t.eVar13 = a(e.emailMarketingCode), t.eVar14 = a(e.distributionPartner), t.eVar15 = a(e.searchEngineMarketingCode), t.eVar16 = a(e.affiliateMarketingCode), t.eVar17 = a(e.entryPage), t.eVar19 = a(e.onlineAdvertisingCode), t.eVar21 = a(e.intraCompanyMarketingCode), t.eVar23 = a(e.visitNumber), t.eVar36 = a(e.searchEngineMarketingDetails), t.eVar26 = a(e.googleClickIdentifier), t.campaign = a(e.campaignIdVisit), e.hitLevelCampaignId && "true" === e.marketingClick && !n ? (t.eVar22 = e.hitLevelCampaignId, t.eVar27 = e.hitLevelCampaignId, t.eVar33 = e.hitLevelCampaignId, r = "event227", (i = t).events ? i.events.includes(r) || (i.events += "," + r) : i.events = r) : (delete t.eVar22, delete t.eVar27, delete t.eVar33) } } }, function (e, t, n) { "use strict"; e.exports = { map: function (e, t) { t.context || (t.context = {}), t.context.marketingAttribution || (t.context.marketingAttribution = {}), e.emailMarketingCode && e.emailMarketingCodeTimestamp && (t.context.marketingAttribution.emailId = e.emailMarketingCode, t.context.marketingAttribution.emailIdTimestamp = e.emailMarketingCodeTimestamp), e.distributionPartner && e.distributionPartnerTimestamp && (t.context.marketingAttribution.distributionPartners = e.distributionPartner, t.context.marketingAttribution.distributionPartnersTimestamp = e.distributionPartnerTimestamp), e.searchEngineMarketingCode && e.searchEngineMarketingCodeTimestamp && (t.context.marketingAttribution.searchEngineMarketingCode = e.searchEngineMarketingCode, t.context.marketingAttribution.searchEngineMarketingCodeTimestamp = e.searchEngineMarketingCodeTimestamp), e.googleClickIdentifier && e.googleClickIdentifierTimestamp && (t.context.marketingAttribution.googleClickIdentifier = e.googleClickIdentifier, t.context.marketingAttribution.googleClickIdentifierTimestamp = e.googleClickIdentifierTimestamp), e.searchEngineMarketingDetails && e.searchEngineMarketingDetailsTimestamp && (t.context.marketingAttribution.searchEngineMarketingDetails = e.searchEngineMarketingDetails, t.context.marketingAttribution.searchEngineMarketingDetailsTimestamp = e.searchEngineMarketingDetailsTimestamp), e.affiliateMarketingCode && e.affiliateMarketingCodeTimestamp && (t.context.marketingAttribution.affiliateMarketingCode = e.affiliateMarketingCode, t.context.marketingAttribution.affiliateMarketingCodeTimestamp = e.affiliateMarketingCodeTimestamp), e.onlineAdvertisingCode && e.onlineAdvertisingCodeTimestamp && (t.context.marketingAttribution.onlineAdvertisingCode = e.onlineAdvertisingCode, t.context.marketingAttribution.onlineAdvertisingCodeTimestamp = e.onlineAdvertisingCodeTimestamp), e.intraCompanyMarketingCode && e.intraCompanyMarketingCodeTimestamp && (t.context.marketingAttribution.intraCompanyMarketingCode = e.intraCompanyMarketingCode, t.context.marketingAttribution.intraCompanyMarketingCodeTimestamp = e.intraCompanyMarketingCodeTimestamp), e.campaignIdVisit && e.campaignIdVisitTimestamp && (t.context.marketingAttribution.campaignIdVisit = e.campaignIdVisit, t.context.marketingAttribution.campaignIdVisitTimestamp = e.campaignIdVisitTimestamp), e.campaignId30Day && e.campaignId30DayTimestamp && (t.context.marketingAttribution.campaignId = e.campaignId30Day, t.context.marketingAttribution.campaignIdTimestamp = e.campaignId30DayTimestamp), e.entryPage && (t.context.marketingAttribution.entryPage = e.entryPage), t.context.marketingAttribution.pageName = "D=pageName" } } }]);